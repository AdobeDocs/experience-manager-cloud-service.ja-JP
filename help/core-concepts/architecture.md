---
title: クラウドサービスとしてのAdobe Experience Managerのアーキテクチャの概要
description: 'クラウドサービスとしてのAdobe Experience Managerのアーキテクチャの概要を説明します。 '
translation-type: tm+mt
source-git-commit: 5a846d34ee094e7d2f7fc71dbeef65f3fa58e86c

---


# クラウドサービスとしてのAdobe Experience Managerのアーキテクチャの概要 {#an-introduction-to-the-architecture-adobe-experience-manager-as-a-cloud-service}

クラウドサービスとしてのAdobe Experience Manager(AEM)は、アーキテクチャに変更を加えました。

## スケーリング {#scaling}

クラウドサービスとしてのAEMには、次の機能が追加されました。

* 可変数のAEM画像を持つ動的アーキテクチャ。

![動的アーキテクチャ](assets/concepts-01.png "動的アーキテクチャ")

このアーキテクチャ：

* 実際のトラフィックと実際のアクティビティ *に基づいて* 、スケール *設定されます* 。

* 個々のインスタンスが必要な場合にのみ実行されます。

* モジュール化されたアプリケーションを使用します。

* デフォルトとして作成者クラスターを持つ。これにより、メンテナンスタスクのダウンタイムを回避できます。

これにより、様々な使用パターンに対する自動スケーリングが可能になります。

![様々な使用パターンの自動スケー](assets/concepts-02.png "リング様々な使用パターンの自動スケーリング")

これを達成するために、クラウドサービスとしてのAEMのすべてのインスタンスは、ノード数、割り当てメモリ、割り当てコンピューティング容量に関して、それぞれ同じデフォルトのサイズ設定特性を持つように作成されます。

クラウドサービスとしてのAEMは、次の機能を備えたオーケストレーションエンジンの使用に基づいています。

* サービスの状態を常に監視します。

* 各サービスインスタンスを、実際のニーズに応じて動的に拡大・縮小します。必要に応じて拡大/縮小します。

このクライアントライブラリは:

* 各ノードのノード数、メモリ量、および割り当てられたCPU容量に適用できます。

* AEMをクラウドサービスとして、変更に伴うトラフィックパターンに対応できます。

サービスのテナントごとのインスタンスのスケーリングは、2つの軸で自動または手動で行うことができます。

* 縦：割り当てられたメモリとCPU容量は、一定数のノードに対して拡大または縮小できます。

* 水平方向：所与のサービスのノード数は増減できる。

## 環境 {#environments}

>[!NOTE]
>
> 詳しくは、デプロイ — 実行モ [ードを参照してください](/help/implementing/deploying/overview.md#runmodes)

クラウドサービスとしてのAEMは、各インスタンスが完全なAEM環境を表す個々のインスタンスとして使用できるようになりました。 AEMでクラウドサービスとして使用できる環境には、次の4種類があります。

* **実稼働環境**:ビジネス・プラクティショナー用のアプリケーションをホストします。

* **ステージ環境**:は、常に1:1の関係で単一の実稼働環境に結び付けられます。 ステージ環境は、アプリケーションに対する変更が実稼働環境に反映される前に、様々なパフォーマンスと品質のテストに使用されます。

* **開発環境**:開発者は、ステージ環境と実稼働環境と同じランタイム条件でAEMアプリケーションを実装できます。

* **デモ環境**:は、評価、デモ、プロトタイピングおよびトレーニングの目的で使用できます。

開発環境とデモ環境は、実稼働環境以外の環境と呼 *ばれることが多い* 。

## プログラム {#programs}

新しいAEMプロジェクトは常に1つの特定のコードベースに連結され、プロジェクトの設定とカスタムコードの両方を保存できます。 この情報はコードリポジトリに保存され、通常のGitクライアントを介してアクセスでき、新しいプログラムの作成時に利用できるようになります。

AEMプログラムは、次のものを含むコンテナです。

|  プログラム要素 |  番号 |
|--- |--- |
| コードリポジトリ(Git) |  1 |
| ベースライン画像（サイトまたはアセット） |  1 |
| ステージ環境と実稼働環境セット(1:1) | 0 または 1 |
| 実稼働環境以外（開発またはデモ） | 0 ～ N |
| 各環境のパイプライン | 0 または 1 |

AEMでは、クラウドサービスとして、次の2種類のプログラムを最初に使用できます。

* AEMクラウドサイトサービス

* AEM Cloud Assetsサービス

どちらも、多くの機能にアクセスできます。 作成者層には、すべてのプログラムに対するすべてのSitesとAssetsの機能が含まれますが、Assetsプログラムには、デフォルトで公開層がありません。

## ランタイムアーキテクチャ {#runtime-architecture}

この新しいアーキテクチャには、様々な主要コンポーネントがあります。

<!--- needs reworking -->

![AEM as a Cloud Service - Runtime](assets/concepts-03.png "ArchitectureクラウドサービスとしてのAEM - Runtime Architecture")

* AEMサイトをクラウドサービスとして使用する場合：

   * 各環境に対して、オーサリング層と公開層の概念が（上位レベルで）引き続き存在します。

   * 作成者層は、1つの作成者クラスター内の複数のノードで構成されます。 オーサリングアクティビティに応じて自動的に拡大縮小されます。

      * コンテンツ作成者/作成者は、AEM作成者層にログインして、コンテンツを作成、編集および管理します。

      * 作成者層へのログインは、Adobe ID管理サービス(IMS)で管理されます。

      * アセットの統合と処理には、専用のアセット計算サービスが使用されます。
   * 発行層は、単一の発行ファーム内の2つ以上のノードで構成されます。互いに独立して動くことができる。 各ノードは、AEMパブリッシャーと、AEMディスパッチャーモジュールを備えたWebサーバーで構成されます。 サイトトラフィックのニーズに合わせて自動的に拡張されます。

      * エンドユーザーまたはサイトの訪問者は、AEM発行サービスを通じてWebサイトにアクセスします。


* AEM Assetsをクラウドサービスとして使用する場合：

   * このアーキテクチャには、オーサリング環境のみが含まれます。

* 作成者層と発行層の両方が、Content Repository Serviceのコンテンツを読み取り、保持します。

   * 発行層は永続化レイヤーからのみコンテンツを読み取ります。

   * 作成者層は、永続化レイヤーのコンテンツを読み書きします。

   * BLOBストレージは、発行層と作成者層で共有されます。ファイルは移動され *ません*。

   * コンテンツが作成者層から承認されると、そのコンテンツがアクティブ化され、発行層の永続化レイヤーにプッシュされる可能性があります。 これは、ミドルウェア・パイプラインであるレプリケーション・サービスを介して発生します。 このパイプラインは、新しいコンテンツを受け取り、パイプラインにプッシュされたコンテンツにサブスクライブする個々のパブリッシュサービスノードを持ちます。

      >[!NOTE]
      >
      >For more details see [Replication](/help/operations/replication.md).

   * 開発者と管理者は、 [Cloud Managerを介して提供される継続的統合/継続的配信(CI/CD)サービスを使用して、AEMをクラウドサービスアプリケーションとして管理します](/help/overview/what-is-new-and-different.md#cloud-manager)。 これには、Cloud ManagerのCI/CDパイプラインを使用したコードと設定のデプロイメントが含まれます。 監視、メンテナンス、トラブルシューティング（ログファイルなど）に関連するすべての情報は、Cloud Manager内でユーザーに公開されます。

   * 作成者層と発行層へのアクセスは、常にロードバランサーを介して行われます。 これは、各層のアクティブなノードと常に最新のものです。

   * 公開層では、Continuous Delivery Network(CDN)サービスも最初のエントリポイントとして使用できます。

* クラウドサービスとしてのAEMのデモインスタンスの場合、アーキテクチャは単一の作成者ノードに簡素化されます。 したがって、標準的な開発環境、ステージ環境、または実稼働環境のすべての特性が表示されるわけではありません。 また、ダウンタイムが発生する可能性があり、バックアップ/リストア・オペレーションがサポートされていないことを意味します。

## 導入アーキテクチャ {#deployment-architecture}

Cloud Managerは、AEMのインスタンスに対するすべての更新をクラウドサービスとして管理します。 作成者層と発行層の両方に、顧客アプリケーションを作成、テストおよびデプロイする唯一の方法であることが必須です。 これらの更新は、アドビが、新しいバージョンのAEMクラウドサービスの準備が整ったとき、またはお客様が、新しいバージョンのアプリケーションの準備が整ったときにトリガーできます。

技術的には、これは、プログラム内の各環境に結び付けられた、デプロイメントパイプラインの概念によって実装されます。 Cloud Managerパイプラインが実行されると、作成者層と発行層の両方に対して、新しいバージョンの顧客アプリケーションが作成されます。 これは、最新の顧客パッケージと最新のベースラインAdobeイメージを組み合わせることで達成できます。 新しい画像が正常に構築およびテストされると、Cloud Managerは、周期的な更新パターンを使用してすべてのサービスノードを更新することで、最新バージョンの画像への切り替えを完全に自動化します。 これにより、作成者または発行サービスのダウンタイムが発生することはありません。

<!--- needs reworking -->

![AEM as a Cloud Service - Deployment](assets/concepts-04.png "ArchitectureクラウドサービスとしてのAEM - Deployment Architecture")

## コンテンツの配布 {#content-distribution}

クラウドサービスとしてのAdobe Experience Managerでは、コンテンツの公開の仕組みが変更されました。 AEMをクラウドサービスとして使用する場合、以前のバージョンのAEMのレプリケーションフレームワークは、ページの発行に使用されなくなりました（作成者インスタンスから発行インスタンスに変更を移動）。

クラウドサービスとしてのAEMで、 [Sling Content Distribution機能を使用して](https://sling.apache.org/documentation/bundles/content-distribution.html) 、適切なコンテンツを移動できるようになりました。 これは、AEMランタイムの外部にあるAdobe I/Oで実行されるパイプラインサービスを使用します。

パブリッシュノードが実行時に追加、削除またはリサイクルされる場合の自動自己設定を含め、設定は自動化されます。

1回の発行または非公開のリクエストに複数のリソースを含めることはできますが、すべてのリソースに適用された単一のステータスを返します。aem発行サービスのすべてのリソースで成功するか、失敗します。 これにより、AEM発行サービス内のリソースの状態が不整合になることがなくなります。

**高レベルのコンテンツ配信アーキテクチャ図**

![高レベルのコンテンツ配信アーキテクチャ](assets/architecture-diagram.png "図高レベルのコンテンツ配信アーキテクチャ図")

## 主な進化 {#key-evolutions}

AEMのクラウドサービスとしての新しいアーキテクチャは、前世代と比較して、次のような基本的な変更と革新を導入しています。

* すべてのファイル(BLOB)は、クラウドデータストアから直接アップロードされ、提供されます。 関連するビットストリームは、AEM作成者サービスと発行サービスのJVMを通過しません。 その結果、AEM作成者サービスと発行サービスのノードのサイズが小さくなり、高速自動拡大縮小の期待値に応えることができます。 ビジネス従事者の場合、画像、ビデオなどをアップロードおよびダウンロードする際の操作性が向上します。

* コンテンツの公開で構成されるすべての操作に、購読パターンに従ったパイプラインが含まれるようになりました。 公開済みコンテンツは、パイプライン内の様々なキューにプッシュされ、このキューに公開サービスのすべてのノードがサブスクライブされます。 その結果、発行サービスのノード数を作成者層が認識する必要はありません。これにより、公開層を高速に自動拡大縮小できます。

* ゴールデンマスターの概念は、パブリッシュノードのライフサイクルを自動化するために導入されました。 ゴールデンマスターは特殊な発行ノードで、エンドユーザーはアクセスせず、発行サービスのすべてのノードを作成します。 圧縮などのメンテナンス操作は、ゴールデンマスターに添付されたコンテンツリポジトリに対して実行されます。 発行ノードは毎日リサイクルされ、定期的なメンテナンスは必要ありません。以前は、特に作成者インスタンスの場合、このようなメンテナンスには多少のダウンタイムが必要でした。

* アーキテクチャは、アプリケーションのコンテンツをアプリケーションのコードと設定から完全に分離します。 すべてのコードと設定は実際には不変で、作成者と公開サービスの様々なノードを作成するために使用されるベースライン画像にベイク処理されます。 その結果、各ノードが同一であることが絶対的に保証され、コードと設定に対する変更はCloud Managerパイプラインを実行することによってのみグローバルに行えます。
