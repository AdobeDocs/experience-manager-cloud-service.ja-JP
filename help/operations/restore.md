---
title: AEM as a Cloud Service でのコンテンツの復元
description: Cloud Manager を使用して、AEM as a Cloud Service のコンテンツをバックアップから復元する方法を説明します。
exl-id: 921d0c5d-5c29-4614-ad4b-187b96518d1f
source-git-commit: bf8493909fa995ec30d67646aec5b712318dbf75
workflow-type: tm+mt
source-wordcount: '1166'
ht-degree: 76%

---


# AEM as a Cloud Service でのコンテンツの復元 {#content-restore}

Cloud Manager を使用して、AEM as a Cloud Service のコンテンツをバックアップから復元する方法を説明します。

>[!NOTE]
>
>この機能は、次の場合にのみ使用できます。 [早期採用プログラム](/help/implementing/cloud-manager/release-notes/current.md#early-adoption) また、この記事に記載されているもの以外に、一定の制限があります。 初期の導入フェーズでは、次のようになります。
>
>* この機能は、開発環境でのみ使用できます。
>* コンテンツの復元は、1 プログラムあたり 2 か月に制限されます。
>
>AEM as a Cloud Serviceの既存のバックアップおよび復元システムの詳細については、ドキュメントを参照してください [AEMでのバックアップと復元のas a Cloud Service](/help/operations/backup.md)

## 概要 {#overview}

Cloud Manager のセルフサービス復元プロセスでは、アドビシステムのバックアップからデータをコピーし、元の環境に復元します。リストアは、失われたデータ、破損したデータ、または誤って削除されたデータを元の状態に戻すために実行されます。

復元プロセスが影響するのはコンテンツのみで、AEM のコードとバージョンは変更されません。個々の環境の復元操作はいつでも開始できます。

Cloud Manager には、コンテンツを復元できる 2 種類のバックアップが用意されています。

* **ポイント・イン・タイム (PIT):** このタイプは、現在の時刻から過去 24 時間の継続的なシステムバックアップからリストアします。
* **過去 1 週間：**&#x200B;このタイプでは、過去 24 時間を除く過去 7 日間のシステムバックアップから復元します。

どちらの場合も、カスタムコードのバージョンとAEMのバージョンは変更されません。

>[!TIP]
>
>[パブリック API を使用](https://developer.adobe.com/experience-cloud/cloud-manager/reference/api/)してバックアップを復元することもできます。

## コンテンツの復元 {#restoring-content}

最初に、復元するコンテンツの期間を決定します。 次に、バックアップから環境のコンテンツを復元するには、次の手順を実行します。

>[!NOTE]
>
>復元操作を開始するには、**ビジネスオーナー**&#x200B;または&#x200B;**デプロイメントマネージャー**&#x200B;の役割を持つユーザーでログインする必要があります。

1. [my.cloudmanager.adobe.com](https://my.cloudmanager.adobe.com/) で Cloud Manager にログインし、適切な組織を選択します。

1. 復元を開始するプログラムをクリックします。

1. **プログラムの概要**&#x200B;ページの&#x200B;**環境**&#x200B;カードで、復元を開始する環境の横にある省略記号ボタンをクリックし、「**コンテンツを復元**」を選択します。

   ![復元オプション](assets/backup-option.png)

   * または、特定の環境の環境詳細ページの「**コンテンツを復元**」タブに直接移動することもできます。

1. 環境の詳細ページの 「**コンテンツを復元**」タブで、まず&#x200B;**復元する時間枠**&#x200B;ドロップダウンで復元の期間枠を選択します。

   1. 次を選択した場合、 **過去 24 時間** 隣人 **時間** 「 」フィールドでは、復元する過去 24 時間以内の正確な時間を指定できます。

      ![過去 24 時間](assets/backup-time.png)

   1. 次を選択した場合、 **先週** 隣人 **日** 「 」フィールドで、過去 7 日以内の日付（過去 24 時間を除く）を選択できます。

      ![過去 1 週間](assets/backup-date.png)

1. 日付を選択するか時間を指定すると、下の「**使用可能なバックアップ**」セクションに、復元可能なバックアップのリストが表示されます。

   ![使用可能なバックアップ](assets/backup-available.png)

1. 情報アイコンを使用して復元するバックアップを見つけ、そのバックアップに含まれるコードのバージョンと AEM リリースに関する情報を表示し、[バックアップを選択](#choosing-the-right-backup)する際に復元の影響を考慮します。

   ![バックアップ情報](assets/backup-info.png)

   * 復元オプションに表示されるタイムスタンプはすべて、ユーザーのコンピューターのタイムゾーンに基づいています。

1. 復元するバックアップを表す、行の右端にある「**復元**」アイコンをクリックして復元プロセスを開始します。

1. **復元**&#x200B;をクリックしてリクエストを確定する前に、**コンテンツを復元**&#x200B;ダイアログで詳細を確認します。

   ![復元を確認](assets/backup-restore.png)

バックアッププロセスが開始され、そのステータスは **[アクティビティを復元](#restore-activity)** リスト。 復元操作の完了に要する時間は、復元するコンテンツのサイズとプロファイルによって異なります。

リストアが正常に完了すると、環境は次のようになります。

* 復元操作を開始した時点と同じコードと AEM リリースを実行します。
* 選択したスナップショットのタイムスタンプ時に使用可能だったものと同じコンテンツを用意し、現在のコードに合わせてインデックスを再構築します。

## 適切なバックアップの選択 {#choosing-backup}

Cloud Manager のセルフサービスの復元プロセスでは、コンテンツがAEMに復元されるだけです。 このため、現在のコミット ID と復元先のコミット履歴を確認して、目的のリストアポイントと現在の時刻の間に行われたコードの変更を慎重に検討する必要があります。

複数の方法があります。

* 環境と復元のカスタムコードは、同じリポジトリと同じブランチにあります。
* 環境と復元のカスタムコードは、同じリポジトリ上にあり、共通のコミットを持つ別のブランチにあります。
* 環境と復元のカスタムコードは、異なるリポジトリ上にあります。
   * この場合、コミット ID は表示されません。
   * 両方のリポジトリを複製し、差分ツールを使用してブランチを比較することを強くお勧めします。

 また、復元により、実稼動環境とステージング環境が同期しなくなる可能性があることに注意してください。コンテンツの復元の結果については、ユーザーが責任を負います。

## 復元アクティビティ {#restore-activity}

The **アクティビティを復元** リストには、アクティブなリストア操作を含む直近 10 件のリストア要求のステータスが表示されます。

![復元アクティビティ](assets/backup-activity.png)

バックアップの情報アイコンをクリックすると、そのバックアップのログをダウンロードしたり、復元が開始された時点でのスナップショットとデータの違いなど、コードの詳細を調べたりすることができます。

## オフサイトバックアップ {#offsite-backup}

通常のバックアップは、AEM Cloud Services 内で誤って削除された場合や技術的な障害が発生する場合のリスクをカバーしますが、領域の障害が原因で追加のリスクが発生する可能性があります。可用性に加えて、このような領域の停止における最大のリスクは、データの損失です。

AEM as a Cloud Service は、すべての AEM コンテンツをリモート領域に継続的にコピーし、3 か月間復旧に利用できるようにすることで、すべての AEM 実稼動環境のこのリスクを軽減します。この機能は、オフサイトバックアップと呼ばれます。

オフサイトバックアップからのステージング環境および実稼動環境での AEM Cloud Services の復元は、データ領域の停止が発生した場合に AEM Service Reliability Engineering によって実行されます。

## 制限事項 {#limitations}

セルフサービス復元メカニズムを使用する際は、次の制限事項が適用されます。

* 復元操作は 7 日間に制限されています。つまり、7日より古いスナップショットを復元することはできません。
* プログラム内のすべての環境で、1 か月あたり最大 10 回の復元に成功できます。
* 環境の作成後、最初のバックアップスナップショットが作成されるまでに 6 時間かかります。このスナップショットが作成されるまで、その環境で復元を実行することはできません。
* その環境で現在実行中のフルスタックまたは web 層の設定パイプラインがある場合、復元操作は開始されません。
* 同じ環境で別のリストアが既に実行されている場合は、リストアを開始できません。
* まれに、24 時間や 7 日間のバックアップ制限により、バックアップが選択されてから復元が開始されるまでの遅延により、選択したバックアップが使用できなくなる場合があります。
* 削除された環境のデータは恒久的に失われ、復元できません。
