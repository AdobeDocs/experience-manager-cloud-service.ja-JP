---
title: MSMの問題とよくある質問のトラブルシューティング
description: MSM関連の最も一般的な問題のトラブルシューティング方法と、MSM関連の最も一般的な質問の回答を得る方法を説明します。
feature: マルチサイトマネージャー
role: Administrator
exl-id: 50f02f4f-a347-4619-ac90-b3136a7b1782
source-git-commit: 90de3cf9bf1c949667f4de109d0b517c6be22184
workflow-type: tm+mt
source-wordcount: '761'
ht-degree: 0%

---

# MSMの問題とFAQのトラブルシューティング{#troubleshooting-msm}

## 最初の手順{#first-steps}のトラブルシューティング

MSMで誤った動作やエラーが発生している場合は、トラブルシューティングを開始して詳細を説明する前に、次の点に注意してください。

* 問題や質問が既に解決されているので、[MSMのFAQ](#faq)を確認してください。
* [MSMのベストプラクティスの記事](best-practices.md)を確認します。多くの誤解を説明すると共に、そこで多くのヒントが提供されています。

## ブループリントとライブコピーのステータスに関する詳細情報を見つける{#advanced-info}

MSMは、リソースURLのセレクターで要求できる複数のサーブレットを登録します。 これらはUIで使用されますが、ページに対して追加の高度な計算済みMSMステータスを直接表示するために直接要求することもできます。

1. `http://<host>:<port>/content/path/to/bluprint/page.blueprint.json?&maxSize=500&advancedStatus=true&returnRelationships=true&msm%3Atrigger=ROLLOUT`
   * ブループリントページでこれを使用して、そのページにリンクされているすべてのライブコピーのリストと、追加のライブコピーのステータス情報を取得します。
1. `http://<host>:<port>/content/path/to/livecopy/page.msm.json`
   * ライブコピーページでこれを使用して、ブループリントページとの接続に関する詳細情報を取得します。 ページがライブコピーでない場合は、何も返されません。

これらのサーブレットは、 `com.day.cq.wcm.msm`ロガーを介してDEBUGログメッセージを生成しますが、これも役に立ちます。

## リポジトリ内のMSM固有の情報の確認{#checking-repo}

以前のサーブレットは、MSM固有のノードおよびmixinに基づいて計算済みの情報を返しました。 情報は、次の方法でリポジトリに保存されます。

* `cq:LiveSync` Mixinタイプ
   * これは`jcr:content`ノードで設定され、ルートライブコピーページを定義します。
   * これらのページには、タイプ`cq:LiveCopy`の`cq:LiveSyncConfig`子ノードがあり、次のプロパティを使用して、ライブコピーの基本情報と必須情報が含まれます。
      * `cq:master` は、ライブコピーのブループリントページを指します。
      * `cq:rolloutConfigs` は、ライブコピーに適用されたアクティブなロールアウト設定を示します。
      * `cq:isDeep` は、このルートライブコピーページの子ページがライブコピーに含まれる場合にtrueになります。
* `cq:LiveRelationship` Mixinタイプ
   * ライブコピーページの`jcr:content`ノードには、そのようなmixinタイプが含まれます。
   * そうでない場合、ライブコピーアクション（作成またはロールアウト）の外部にあるオーサリングインターフェイスを使用して、ある時点のページが分離されているか、手動で作成されています。
* `cq:LiveSyncCancelled` Mixinタイプ
   * 休止されたライブコピーページの`jcr:content`ノードに追加されました。
   * 休止が子ページに対しても有効な場合は、同じノードで`cq:isCancelledForChildren`プロパティがtrueに設定されます。

これらのプロパティに表示される情報はUIに反映する必要がありますが、トラブルシューティングを行う際は、MSMアクションが発生した際に、リポジトリ内で直接MSMの動作を観察すると便利です。

また、これらのプロパティを把握すると、リポジトリに対してクエリを実行し、特定の状態にあるページのセットを見つけ出すのに役立ちます。 以下に例を示します。

* `select * from cq:LiveSync` は、すべてのライブコピーのルートページを返します。

## FAQ {#faq}

MSMとライブコピーに関するよくある質問を以下に示します。

### MSMのロールアウト中に一部のプロパティ（タイトル、注釈など）が更新されないのはなぜですか？{#missing-properties}

MSM同期アクションは高度に設定可能です。 ロールアウト時に変更されるプロパティやコンポーネントは、これらの設定のプロパティに直接依存します。

このトピックの詳細については、[この記事](best-practices.md)を参照してください。

### 作成者グループのロールアウト権限を削除するにはどうすればよいですか？{#remove-rollout-permissions}

AEMプリンシパル（ユーザーまたはグループ）に対して設定または削除できる&#x200B;**rollout**&#x200B;権限はありません。

別の方法として、次のいずれかを実行できます。

* 製品UIをカスタマイズして、特定のプリンシパルのロールアウトアクションを非表示にします。
* ロールアウトを許可されていない作成者のライブコピーツリーから書き込み権限を削除します。

### 「_msm_moved」というサフィックスの付いたライブコピーページが表示されるのはなぜですか？{#moved-pages}

ブループリントページがロールアウトされる場合は、ライブコピーページを更新するか、新しいライブコピーページが存在しない場合（例えば、初めてロールアウトしたときやライブコピーページが手動で削除されたとき）に作成されます。

ただし、後者の場合は、`cq:LiveRelationship`プロパティのないページが同じ名前で存在する場合、ライブコピーページが作成される前に、そのページの名前が適宜変更されます。

デフォルトでは、ロールアウトは、ライブコピーページの作成時にブループリントの更新がロールアウトされる、リンクされたライブコピーページ、またはページがないことを前提としています。

「スタンドアロン」ページが見つかった場合、MSMはこのページの名前を変更し、別のリンクされたライブコピーページを作成します。

通常、ライブコピーサブツリー内のこのようなスタンドアロンページは、**分離**&#x200B;操作の結果です。または、元のライブコピーページが作成者によって手動で削除され、同じ名前で再作成されました。

これを回避するには、**分離**&#x200B;の代わりに、ライブコピー&#x200B;**休止**&#x200B;機能を使用します。 **[この記事の分離**&#x200B;アクションの詳細。](creating-live-copies.md)
