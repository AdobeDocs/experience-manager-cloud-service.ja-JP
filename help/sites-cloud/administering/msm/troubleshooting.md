---
title: MSMの問題とFAQのトラブルシューティング
description: MSMに関する最も一般的な問題のトラブルシューティング方法と、MSMに関する最も一般的な質問に対する回答を得る方法を説明します。
feature: マルチサイトマネージャー
role: Administrator
translation-type: tm+mt
source-git-commit: 0f2b7176b44bb79bdcd1cecf6debf05bd652a1a1
workflow-type: tm+mt
source-wordcount: '762'
ht-degree: 0%

---


# MSMの問題とFAQのトラブルシューティング{#troubleshooting-msm}

## 最初の手順{#first-steps}のトラブルシューティング

MSMで誤った動作やエラーと思われる問題が発生している場合は、トラブルシューティングを開始し、詳細なトラブルシューティングを行う前に、以下を確認してください。

* [MSM FAQ](#faq)を調べてください。問題や質問は既にそこで解決しているかもしれません。
* [MSMのベストプラクティスの記事](best-practices.md)を確認し、多数の誤解を説明するとともに、多くのヒントが提供されていることを確認します。

## 青写真とライブコピーの状態に関する詳細な情報を見つける{#advanced-info}

MSMは、リソースURLのセレクターと共に要求できる複数のサーブレットを登録します。 これらはUIで使用されますが、ページの高度な計算済みMSMステータスを直接表示するために直接要求することもできます。

1. `http://<host>:<port>/content/path/to/bluprint/page.blueprint.json?&maxSize=500&advancedStatus=true&returnRelationships=true&msm%3Atrigger=ROLLOUT`
   * この情報は、ブループリントページで使用して、リンクされているすべてのライブコピーのリストと、追加のライブコピーのステータス情報を取得します。
1. `http://<host>:<port>/content/path/to/livecopy/page.msm.json`
   * Live Copyページでこれを使用して、設計図ページとの関連に関する詳細情報を取得します。 ページがライブコピーでない場合は、何も返されません。

これらのサーブレットは、`com.day.cq.wcm.msm`ロガーを介してDEBUGログメッセージを生成します。これも役に立ちます。

## リポジトリ{#checking-repo}内のMSM固有の情報を確認しています

以前のサーブレットは、MSM固有のノードとミックスインに基づいて計算済みの情報を返しました。 情報は、次の方法でリポジトリに格納されます。

* `cq:LiveSync` ミックスイン型
   * これは`jcr:content`ノードに設定され、ルートのライブコピーページを定義します。
   * これらのページにはタイプ`cq:LiveCopy`の`cq:LiveSyncConfig`子ノードがあり、以下のプロパティを介してライブコピーの基本情報と必須情報が含まれます。
      * `cq:master` ライブコピーのブループリントページを指します。
      * `cq:rolloutConfigs` は、ライブコピーに適用されたアクティブなロールアウト設定を示します。
      * `cq:isDeep` は、このルートLive Copyページの子ページがライブコピーに含まれる場合はtrueです。
* `cq:LiveRelationship` ミックスイン型
   * すべてのライブコピーページの`jcr:content`ノードにこのようなミックスインタイプがあります。
   * そうでない場合は、ライブコピーアクション（作成またはロールアウト）以外のオーサリングインターフェイスを使用して、ある時点でのページがデタッチまたは手動で作成されています。
* `cq:LiveSyncCancelled` ミックスイン型
   * 中断されたライブコピーページの`jcr:content`ノードに追加されました。
   * サスペンションが子ページに対しても有効な場合、同じノードで`cq:isCancelledForChildren`プロパティがtrueに設定されます。

これらのプロパティに表示される情報はUIに反映される必要がありますが、トラブルシューティングを行う場合は、MSMアクションが発生したときにリポジトリで直接MSMの動作を確認すると便利です。

また、リポジトリをクエリし、特定の状態にあるページのセットを見つけるためにも、これらのプロパティを知ることが役立ちます。 次に例を示します。

* `select * from cq:LiveSync` すべてのライブコピーのルートページを返します。

## FAQ {#faq}

MSMとLive Copyに関するよくある質問を以下に示します。

### MSMロールアウト中に一部のプロパティ（タイトル、注釈など）が更新されないのはなぜですか。{#missing-properties}

MSM同期アクションは詳細に設定できます。 ロールアウト中に変更されるプロパティまたはコンポーネントは、それらの設定のプロパティに直接依存します。

このトピックの詳細については、[この記事](best-practices.md)を参照してください。

### 作成者グループのロールアウト権限を削除する方法を教えてください。{#remove-rollout-permissions}

AEMプリンシパル（ユーザーまたはグループ）に対して設定または削除できる&#x200B;**ロールアウト**&#x200B;権限がありません。

別の方法として、次のいずれかを実行できます。

* 特定のプリンシパルのロールアウトアクションを非表示にするには、製品UIをカスタマイズします。
* ロールアウトを許可されていない作成者のライブコピーツリーから書き込み権限を削除します。

### サフィックス「_msm_moved」の付いたLive Copyページが表示されるのはなぜですか。{#moved-pages}

BluePrintページがロールアウトされた場合は、そのLive Copyページを更新するか、まだ存在しない場合は新しいLive Copyページを作成します（初めてロールアウトした場合やLive Copyページが手動で削除された場合など）。

ただし、この後者の場合、`cq:LiveRelationship`プロパティのないページが同じ名前で存在する場合は、Live Copyページが作成される前に、それに応じてこのページの名前が変更されます。

既定では、ロールアウトは、ライブコピーページが作成されたときに、設計図の更新がロールアウトされるリンクされたライブコピーページ、またはページが作成されないことを前提とします。

「スタンドアロン」ページが見つかった場合、MSMはこのページの名前を変更し、別のリンク付きLive Copyページを作成することにします。

ライブコピーサブツリー内のこのようなスタンドアロンページは、通常、**Detach**&#x200B;操作の結果です。または、以前のライブコピーページが作成者によって手動で削除され、同じ名前で再作成されました。

これを回避するには、**デタッチ**&#x200B;の代わりに、ライブコピー&#x200B;**休止**&#x200B;機能を使用します。 [この記事の&#x200B;**Detach**&#x200B;アクションの詳細。](creating-live-copies.md)
