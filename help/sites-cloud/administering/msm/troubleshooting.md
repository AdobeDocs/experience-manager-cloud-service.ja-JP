---
title: MSM の問題のトラブルシューティングと FAQ
description: MSM に関する最も一般的な問題のトラブルシューティング方法と、MSM に関する最も一般的な質問に対する回答を説明します。
feature: マルチサイトマネージャー
role: Admin
exl-id: 50f02f4f-a347-4619-ac90-b3136a7b1782
source-git-commit: 24a4a43cef9a579f9f2992a41c582f4a6c775bf3
workflow-type: ht
source-wordcount: '761'
ht-degree: 100%

---

# MSM の問題のトラブルシューティングと FAQ {#troubleshooting-msm}

## トラブルシューティングの最初の手順 {#first-steps}

MSM で誤った動作やエラーと思われる問題が発生している場合は、トラブルシューティングを開始し、詳細なトラブルシューティングをおこなう前に、以下を確認してください。

* [MSM FAQ](#faq) を調べてください。問題や質問は既に解決されているものかもしれません。
* [MSM のベストプラクティスの記事](best-practices.md)をご確認ください。多数のヒントが提供されているのに加え、多数の誤解を明かにしています。

## ブループリントとライブコピーに関する詳細な情報を見つける {#advanced-info}

MSM は、リソース URL のセレクターと共に要求できる複数のサーブレットを登録します。これらは UI で使用されますが、ページに対する高度な計算済み MSM ステータスを追加で直接表示するために、直接要求することもできます。

1. `http://<host>:<port>/content/path/to/bluprint/page.blueprint.json?&maxSize=500&advancedStatus=true&returnRelationships=true&msm%3Atrigger=ROLLOUT`
   * ブループリントページでこの情報を使用して、リンクされているすべてのライブコピーのリストと、追加のライブコピーのステータス情報を取得します。
1. `http://<host>:<port>/content/path/to/livecopy/page.msm.json`
   * ライブコピーページでこれを使用して、ブループリントページとの接続に関する詳細情報を取得します。ページがライブコピーでない場合は、何も返されません。

これらのサーブレットは、`com.day.cq.wcm.msm` ロガーを介して DEBUG ログメッセージを生成します。これも役に立ちます。

## リポジトリ内の MSM 固有の情報を確認する {#checking-repo}

以前のサーブレットは、MSM 固有のノードと Mixin に基づいて計算済みの情報を返していました。情報は、次の方法でリポジトリに格納されます。

* `cq:LiveSync` mixin タイプ
   * `jcr:content`ノードで設定され、ルートのライブコピーページを定義します。
   * これらのページには、以下のプロパティを介してライブコピーの基本情報と必須情報が含まれるタイプ `cq:LiveCopy` の `cq:LiveSyncConfig` 子ノードがあります。
      * `cq:master` は、ライブコピーのブループリントページを指します。
      * `cq:rolloutConfigs` は、ライブコピーに適用されたアクティブなロールアウト設定を示します。
      * このルートライブコピーページの子ページが、ライブコピーに含まれる場合、`cq:isDeep` は、true になります。
* `cq:LiveRelationship` mixin タイプ
   * すべてのライブコピーページの `jcr:content` ノードにこのような mixin タイプがあります。
   * そうでない場合は、ライブコピーアクション（作成またはロールアウト）以外のオーサリングインターフェイスを使用して、ある時点でのページがデタッチまたは手動で作成されています。
* `cq:LiveSyncCancelled` mixin タイプ
   * 中断されたライブコピーページの `jcr:content` ノードに追加されました。
   * サスペンションが子ページに対しても有効な場合、同じノードで `cq:isCancelledForChildren` プロパティが true に設定されます。

これらのプロパティに表示される情報は UI に反映される必要がありますが、トラブルシューティングをおこなう場合は、MSM アクションが発生したときにリポジトリで直接 MSM の動作を確認すると便利です。

また、リポジトリでクエリーを実行し、特定の状態にあるページのセットを見つけるためにも、これらのプロパティを知ることが役立ちます。次に例を示します。

* `select * from cq:LiveSync` は、すべてのライブコピーのルートページを返します。

## FAQ {#faq}

MSM とライブコピーに関するよくある質問を以下に示します。

### MSM ロールアウト中に一部のプロパティ（タイトル、注釈など）が更新されないのはなぜですか  {#missing-properties}

MSM 同期アクションは詳細に設定できます。ロールアウト中に変更されるプロパティまたはコンポーネントは、それらの設定のプロパティに直接依存します。

このトピックの詳細については、[この記事](best-practices.md)を参照してください。

### 作成者グループのロールアウト権限を削除する方法を教えてください。  {#remove-rollout-permissions}

AEM プリンシパル（ユーザーまたはグループ）の&#x200B;**ロールアウト**&#x200B;権限を設定または削除することはできません。

別の方法として、次のいずれかを実行できます。

* 製品 UI をカスタマイズし、特定のプリンシパルのロールアウトアクションを非表示にする。
* ロールアウトを許可されていない作成者に対し、ライブコピーツリーからの書き込み権限を削除する。

### サフィックス「_msm_moved」の付いたライブコピーページが表示されるのはなぜですか  {#moved-pages}

ブループリントページがロールアウトされた場合は、そのライブコピーページを更新するか、まだ存在しない場合（初めてロールアウトした場合やライブコピーページが手動で削除された場合など）は新しいライブコピーページを作成します。

ただし、後者の場合、`cq:LiveRelationship` プロパティのないページが同じ名前で存在する場合は、ライブコピーページが作成される前に、このページの名前が適宜変更されます。

既定では、ロールアウトは、ライブコピーページが作成されたときに、設計図の更新がロールアウトされるリンクされたライブコピーページ、またはページが作成されないことを前提とします。

「スタンドアロン」ページが見つかった場合、MSM はこのページの名前を変更し、別のリンク付きライブコピーページを作成することにします。

ライブコピーサブツリー内のこのようなスタンドアロンページは、通常、**デタッチ**&#x200B;操作の結果、または以前のライブコピーページが作成者によって手動で削除された後、同じ名前で再作成されまた場合に発生します。

これを回避するには、**デタッチ**&#x200B;の代わりに、ライブコピーの&#x200B;**休止**&#x200B;機能を使用します。詳細は、この[記事&#x200B;**の**&#x200B;デタッチ](creating-live-copies.md)アクションを参照してください。
