---
title: コンテンツの再利用 — マルチサイトマネージャーとライブコピー
description: AEMの強力なライブコピーとマルチサイトマネージャー機能を使用してコンテンツを再利用する方法を紹介します。
translation-type: tm+mt
source-git-commit: b22d972adeaec6af4f15e11fa3359758a1ed77c3
workflow-type: tm+mt
source-wordcount: '2682'
ht-degree: 22%

---


# コンテンツの再利用：マルチサイトマネージャーとライブコピー {#multi-site-manager-and-live-copy}

マルチサイトマネージャー(MSM)を使用すると、同じサイトコンテンツを複数の場所で使用できます。 MSMは、そのライブコピー機能を使用してこれを実現します。

* MSM では、次の操作を実行できます。
   * コンテンツの作成を何度も行う
   * このコンテンツは、同じサイトまたは他のサイトの他の領域（[ライブコピー](#live-copies)を介して）で再利用してください。
* その後、MSMは、ソースコンテンツとライブコピーの間のライブな関係を維持するので、次のことができます。
   * ソースコンテンツに変更を加えると、ソースコピーとライブコピーが同期されます。
   * 個々のサブページやコンポーネントのライブリレーションシップを切断することで、ライブコピーのコンテンツに対してのみ調整を行うことができます。

このページでは、MSMでのコンテンツの再利用の概要を説明します。 以下のページでは、関連する問題について詳しく説明します。

* [ライブコピーの作成と同期](creating-live-copies.md)
* [ライブコピーの概要コンソール](live-copy-overview.md)
* [ライブコピーの同期の設定](live-copy-sync-config.md)
* [MSM ロールアウトの競合](rollout-conflicts.md)
* [MSM のベストプラクティス](best-practices.md)

## 考えられるシナリオ {#possible-scenarios}

MSMおよびライブコピーの使用例は多数あります。 次のようなシナリオがあります。

* **多国籍 - グローバル企業から現地企業**

   MSM がサポートする一般的な使用事例は、複数の多国籍かつ同一言語のサイトにおけるコンテンツの再利用です。これにより、コアコンテンツを再利用できると同時に、全国的なバリエーションも許可されます。

   例えば、[WKNDチュートリアルサンプル](/help/implementing/developing/introduction/develop-wknd-tutorial.md)の英語の節は、米国のお客様向けに作成されています。 このサイトのコンテンツのほとんどは、異なる国や文化の英語を話すお客様を対象とした、他のWKNDサイトでも使用できます。 主要なコンテンツは全サイトで同じになる一方で、地域ごとに調整を加えることができます。

   次の構造は、米国およびカナダのサイトで使用できます。 `language-masters`ノードが、英語だけでなく他の言語のコンテンツのマスターコピーを保持する方法に注意してください。 このコンテンツは、英語と共に地域言語コンテンツを追加する際の基礎として利用できます。

   ```xml
   /content
       |- wknd
           |- language-masters
               |- en
               |- es
               |- fr
           |- us
               |- en
               |- es
           |- ca
               |- en
               |- fr
   ```

   >[!NOTE]
   >
   >MSM はコンテンツを翻訳しません。必要な構造を作成し、コンテンツをデプロイするために使用します。
   >
   >
   >そのような例については、[多言語サイトのコンテンツの翻訳](/help/sites-cloud/administering/translation/overview.md)を参照してください。

* **国内 - 本社から地方支社**

   また、ディーラー網を持つ会社は、各ディーラー向けに別々のWebサイトを必要とする場合があります。各Webサイトは、本社が提供するメインサイトのバリエーションです。 これは、複数の支社を持つ単一の企業や、フランチャイズ本部と国内の複数のフランチャイズ加盟店で構成されるフランチャイズシステムに適してします。

   本社が中核となる情報を提供し、各地方の部門が問い合わせ先の詳細情報、営業時間、イベントなどのローカル情報を追加します。

   ```xml
   /content
       |- head-office-berlin
       |- branch-hamburg
       |- branch-stuttgart
       |- branch-munich
       |- branch-frankfurt
   ```

* **複数バージョン**

   MSMは、特定のサブブランチのバージョンを作成できます。 例えば、サポートサブサイトには、特定の製品の異なるバージョンの詳細を保持できます。基本情報は一定であり、更新された機能のみを変更する必要があります。

   ```xml
   /content
       |- game-support
           |- polybius
               |- v5.0
               |- v4.0
               |- v3.0
               |- v2.0
               |- v1.0
   ```

   >[!TIP]
   >
   >このようなシナリオでは、単純なコピーを作成するか、ライブコピーを使用するかは、次の残りの問題になります。
   >
   >* 複数のバージョンでの更新に必要なコアコンテンツの量。
   >
   >および
   >
   >* 個々のコピーのどれだけ調整が必要か。


## UI からの MSM {#msm-from-the-ui}

MSM は、該当するコンソールの UI から各種オプションを使用して直接アクセスできます。

* **サイトを作成**（**サイト**）

   * MSMを使用すると、共通コンテンツを共有する複数のWebサイトを管理できます。 例えば、Webサイトは多くの場合、すべての国でほとんどのコンテンツが共通で、個々の国に固有のコンテンツのサブセットも含む、国際的なオーディエンス向けに提供されます。 MSMでは、ソースサイト](creating-live-copies.md#creating-a-live-copy-of-a-site-from-a-blueprint-configuration)に基づいて1つ以上のサイトを自動的に更新するライブコピーを[作成できます。 また、共通の基本構造が適用され、複数サイト全体で共通のコンテンツを使用し、共通のルックアンドフィールが保持されるので、サイト間で実際に異なるコンテンツの管理に注力することができます。次の方法でサイトを作成します。
      * ソースの指定に事前に定義されたブループリント設定が必要です。
      * （定義済みの）ソースのライブコピーを作成します。
      * 「**ロールアウト**」ボタンを使用してユーザーを指定します。

* **ライブコピーを作成**（**サイト**）

   * MSMでは、Webサイトの個々のページまたはサブブランチのアドホック（1回限りの）ライブコピーを作成できます。](creating-live-copies.md#creating-a-live-copy-of-a-page)例えば、新しい/更新されたバージョンの製品に関する情報を提供するサブブランチを複製します。 [次の方法でライブコピーを作成します。
      * アドホックライブコピーを作成します（設定の設計図は不要）。
      * 任意のページ/ブランチのライブコピーを（即座に）作成する場合に使用できます。
      * **同期**&#x200B;が必要です（**ロールアウト**&#x200B;ボタンを提供しません）。

* **プロパティを表示**（**サイト**）

   * 必要に応じて、[ライブコピー](creating-live-copies.md#monitoring-your-live-copy)を監視し、関連する&#x200B;**ライブコピー**&#x200B;または&#x200B;**Blueprint**&#x200B;に関する情報を提供します。

* **参照**（**サイト**）

   * [参照](/help/sites-cloud/authoring/getting-started/basic-handling.md#references)レールは、**ライブコピー**&#x200B;に関する情報と、該当するアクションへのアクセスを提供します。

* **ライブコピーの概要**（**サイト**）

   * このコンソールを使うと、設計図とそのライブコピーを[表示し、管理できます。](live-copy-overview.md)

* **ブループリント**（**ツール**／**サイト**）

   * このコンソールを使用すると、BluePrint設定を[作成および管理できます。](creating-live-copies.md#creating-a-blueprint-configuration)

>[!NOTE]
>
>MSM機能の側面は、起動など、他のAEMのいくつかの機能で使用されます。 この場合、ライブコピーはこの機能によって管理されます。

### 使用されている用語 {#terms-used}

入門として、MSMで使用される主な用語の概要を次の表に示します。これらの詳細については、以降のセクションおよびページで詳しく説明します。

| 用語 | 定義 | 詳細 |
|---|---|---|
| ソース | ライブコピーの基盤として使用される元のページ | BlueprintsページまたはBlueprintページと同義語 |
| ライブコピー | （ソースの）コピー。ロールアウト設定で定義される同期操作によって保持されます。 |  |
| ライブコピーの設定 | ライブコピーの設定の詳細の定義 |  |
| ライブの関係 | 特定のリソースの継承の有効な定義（ソースとライブコピー間の接続） | ソースに対する変更をライブコピーと同期できるようにします。 |
| ブループリント | ソースと同義語 | ブループリント構成で定義可能 |
| ブループリント設定 | ソースパスを指定する事前定義済みの設定 | BluePrintページがBluePrint設定で参照されると、[ロールアウト]コマンドが使用可能になります |
| 第 章 | ライブコピーに含めるブループリントのセクション | 一般に、ルートのサブページです。 |
| 同期化 | ソースとライブコピー間のコンテンツの同期を表す一般的な用語です（**ロールアウト**&#x200B;と&#x200B;**同期**&#x200B;の両方のオプションで使用）。 |  |
| ロールアウト | ソースからライブコピーに同期します。 | 作成者（設計図のページ）またはシステムイベント（ロールアウト設定で定義）によってトリガーされます。 |
| ロールアウト設定 | どのプロパティを同期するか、どの方法、いつ同期するかを決定するルール |  |
| 同期 | ライブコピーページから手動で行った同期のリクエスト |  |
| 継承 | Live Copyのページ/コンポーネントは、同期の発生時にソースページ/コンポーネントからコンテンツを継承します |  |
| 休止 | ライブコピーとそのブループリントページの間のライブ関係を一時的に削除 |  |
| 分離 | ライブコピーとそのブループリントページの間のライブ関係を完全に削除 |  |
| リセット | ライブコピーページをリセットして、継承のキャンセルをすべて削除し、ページをソースページと同じ状態に戻します | 「リセット」は、ページプロパティ、段落システムおよびコンポーネントに対して行った変更に影響します。 |
| シャロー | 単一ページのライブコピー |  |
| ディープ | ページのライブコピーと子ページ |  |

<!--
>[!TIP]
>
>See [Overview of the Java API](/help/sites-developing/extending-msm.md#overview-of-the-java-api) for the object names.
-->

## ライブコピー {#live-copies}

MSMライブコピーは、元のソースとのライブ関係が維持される特定のサイトコンテンツのコピーです。

* ライブコピーは、ソースからコンテンツを継承します。
* ソースに対して変更が加えられると、同期化によってコンテンツが実際に転送されます。
* ライブコピーは、次のいずれかと見なすことができます。
   * シャロー：単一のページ
   * ディープ：ページとその子ページ
* 同期ルールは、ロールアウト設定と呼ばれ、どのプロパティを同期するか、および同期がいつ行われるかを決定します。

前の例では、`/content/wknd/language-masters/en`は英語のグローバルマスターサイトです。 このサイトのコンテンツを再利用するために、MSM Live Copiesが作成されます。

* `/content/wknd/language-masters/en`の下の内容がソースです。
* `/content/wknd/language-masters/en`の下のコンテンツは、`/content/wknd/us/en/`ノードと`/content/wknd/ca/en`ノードの下にコピーされます。 ライブコピーです。
* 作成者は`/content/wknd/language-masters/en`の下のページに変更を加えます。
* トリガーされると、MSMはこれらの変更をライブコピーに同期します。

### ライブコピー - 構成 {#live-copies-composition}

>[!NOTE]
>
>この節の図と説明は、潜在的なライブコピーのスナップショットを表しています。 これらは包括的ではなく、特徴を説明するための概要を示しています。

ライブコピーを最初に作成したとき、選択したソースページは、ライブコピーに1:1単位で反映されます。 この後、ライブコピー内に新しいリソース（ページや段落）を直接作成することもできるので、これらのバリエーションと、それらのバリエーションが同期に与える影響に注意が必要です。 使用可能な構成は次のとおりです。

* [ライブコピー以外のページのライブコピー](#live-copy-with-non-live-copy-pages)
* [ネストされたライブコピー](#nested-live-copies)

ライブコピーの基本形式は次のとおりです。

* 選択したソースページを1:1単位で反映するライブコピーページ。
* 1 つの設定定義。
* すべてのリソースに定義されているライブ関係。
   * Live Copyリソースをそのブループリント/ソースとリンクします。
   * 継承とロールアウトを実現する際に使用されます。

変更は、要件に応じて[同期](creating-live-copies.md#synchronizing-your-live-copy)できます。

![Live Copyの構成の概要](../assets/live-copy-composition.png)

#### ライブコピー以外のページ{#live-copy-with-non-live-copy-pages}

AEMでライブコピーを作成する場合、ライブコピーブランチを表示および移動して、ライブコピーブランチで通常のAEM機能を使用できます。 つまり、ユーザー（またはプロセス）は、ライブコピー内に新しいリソース（ページや段落）を作成できます。 例：特定の地域や国向けの製品。

* そのようなリソースにはソースやブループリントのページへのライブ関係がなく、同期されません。
* このシナリオは、MSM が特殊なケースを処理する場合に発生することがあります。例えば、ソース/ブループリントとライブコピーの両方の分岐で、同じ位置と名前を持つページを（またはプロセス）作成する場合です。 このような状況では、[MSMロールアウトの競合](rollout-conflicts.md)を参照してください。

![ライブコピー以外のページのライブコピー](../assets/live-copy-with-non-live-copy-pages.png)

#### ネストされたライブコピー {#nested-live-copies}

既存のライブコピー](#live-copy-with-non-live-copy-pages)内に[新しいページを作成する場合、この新しいページは、別の設計図のライブコピーとして設定することもできます。 これは、ネストされたライブコピーと呼ばれます。 ネストされたライブコピーでは、2番目または内側のライブコピーの動作は、次の方法で最初または外側のライブコピーの影響を受けます。

* 最上位レベルのライブコピーに対してトリガーされた詳細なロールアウトは、ネストされたライブコピー内に続けることができます。
* ソース間のリンクはすべて、ライブコピー内で書き換えられます。

例えば、2番目のBluePrintを指すリンクは、ネストされた2番目のLive Copyから1番目のLive Copyを指すリンクとして書き換えられます。

![ネストされたライブコピー](../assets/live-copy-nested.png)

>[!NOTE]
>
>ライブコピーブランチ内でページを移動または名前変更すると、AEMが関係を追跡できるように、これはネストされたライブコピーとして扱われます。

#### 積み重ねられたライブコピー {#stacked-live-copies}

ライブコピーは、浅いライブコピーの子として作成される場合、スタックライブコピーと呼ばれます。 これは、[ネストされたライブコピー](#nested-live-copies)と同じ方法で動作します。

### ソース、ブループリントおよびブループリント設定 {#source-blueprints-and-blueprint-configurations}

ページまたはページの分岐をライブコピーのソースとして使用できます。 ただし、MSM ではソースパスを指定するブループリント設定も定義できます。BluePrint設定を使用する利点は、次のとおりです。

* 作成者が設計図上で&#x200B;**ロールアウト**&#x200B;オプションを使用できるようにします。 例えば、このブループリントを継承するライブコピーに対して変更を明示的にプッシュする場合。
* 作成者が「**サイトを作成**」を使用できるようにします。これにより、ユーザーは簡単に言語を選択し、ライブコピーの構造を設定できます。
* 設計図と関係のあるライブコピーの既定のロールアウト設定を定義します。

ライブコピーのソースは、通常のページまたはブループリント構成に含まれるページにすることができます。どちらも有効な使用例です。

ソースがライブコピーの青写真を形成します。 ブループリントは次のいずれかをおこなうと定義されます。

* [Blueprint構成の作成](creating-live-copies.md#creating-a-blueprint-configuration)  — 設定は、ライブコピーの作成に使用するページを事前に定義します。
* [ページのライブコピーの作成](creating-live-copies.md#creating-a-live-copy-of-a-page)  — ライブコピーの作成に使用されるページ（ソースページ）は、BluePrintページです。ソースページは、BluePrint設定で参照される場合とされない場合があります。

### ロールアウトと同期 {#rollout-and-synchronize}

ロールアウトは、ライブコピーをソースと同期する中央のMSMアクションです。 ロールアウトは手動で実行することも、自動的に実行することもできます。

* [ロールアウト設定](#rollout-configurations)を定義して、特定の[イベント](live-copy-sync-config.md#rollout-triggers)がルートのロールアウトを自動的に引き起こすように設定できます。
* 設計図のページを作成する場合は、**[ロールアウト](creating-live-copies.md#rolling-out-a-blueprint)**&#x200B;コマンドを使用して、変更をライブコピーにプッシュできます。
   * **ロールアウト**&#x200B;コマンドは、Blueprint設定で参照されるBluePrintページで使用できます。

   ![ロールアウト](../assets/live-copy-rollout.png)

* ライブコピーページを作成する場合は、**[「](creating-live-copies.md#synchronizing-a-live-copy)**&#x200B;同期」コマンドを使用して、ソースからライブコピーに変更を取り込むことができます。
   * **Synchronize**&#x200B;コマンドは、ソース/ブループリントページがBluePrint構成に含まれているかどうかに関係なく、常にライブコピーページで使用できます。

   ![同期](../assets/live-copy-synchronize.png)

### ロールアウト設定 {#rollout-configurations}

ロールアウトの設定は、ライブコピーをソースコンテンツといつ、どのように同期するかを定義します。 ロールアウト設定は、トリガーと 1 つ以上の同期アクションで構成されます。

* **トリガー** -トリガーとは、ソースページのアクティベーションなど、ライブアクションの同期を発生させるイベントです。 MSM では、使用可能なトリガーを定義します。
* **同期アクション**  — 同期アクションは、ライブコピーで実行され、ソースと同期されます。アクションの例としては、コンテンツのコピー、子ノードの順序指定、ライブコピーページのアクティブ化などがあります。 MSMには多数の同期アクションが用意されています。

>[!NOTE]
>
>Java API を使用してお使いのインスタンスのカスタムアクションを作成できます。

ロールアウトの設定は再利用できるので、複数のライブコピーが同じロールアウト設定を使用できます。 標準のインストールにいくつかの[ロールアウト設定](live-copy-sync-config.md#installed-rollout-configurations)が含まれています。

### ロールアウトの競合  {#rollout-conflicts}

特に、作成者がソースとライブコピーの両方でコンテンツを編集している場合、ロールアウトが複雑になる可能性があります。したがって、展開中に発生する[競合をAEMがどのように処理するかを知っておくと便利です。](rollout-conflicts.md)

### 継承と同期の休止とキャンセル {#suspending-and-cancelling-inheritance-and-synchronization}

ライブコピー内の各ページとコンポーネントは、ライブ関係を介してソースページとコンポーネントに関連付けられます。 ライブ関係は、ソースからのライブコピーコンテンツの同期を設定します。

ライブコピーページのライブコピーの継承を&#x200B;**中断**&#x200B;して、ページのプロパティやコンポーネントを変更できます。 継承を休止すると、ページプロパティとコンポーネントがソースと同期されなくなります。

個々のページの編集時に、作成者はコンポーネントの&#x200B;**継承をキャンセル**&#x200B;できます。継承がキャンセルされると、ライブの関係が休止状態になり、そのコンポーネントの同期はおこなわれません。継承と同期をキャンセルすると、コンテンツのサブセクションをカスタマイズする必要がある場合に役立ちます。

### ライブコピーの分離 {#detaching-a-live-copy}

また、Live Copy](creating-live-copies.md#detaching-a-live-copy)を設計図から[デタッチして、すべての接続を削除することもできます。

>[!CAUTION]
>
>分離アクションは永続的で元に戻すことはできません。

デタッチアクションは、ライブコピーとそのブループリントページの間のライブリレーションシップを完全に削除します。 MSMに関連するすべてのプロパティがライブコピーから削除され、ライブコピーページはスタンドアロンのコピーになります。

>[!TIP]
>
>サブページと親ページに対する関連する影響など、詳細については、[ライブコピーの切り離し](creating-live-copies.md#detaching-a-live-copy)を参照してください。

## MSM を使用するための標準的な手順 {#standard-steps-for-using-msm}

次の手順では、MSMを使用してコンテンツを再利用し、変更をライブコピーと同期する標準的な手順を説明します。

1. ソースサイトのコンテンツを作成します。
1. 使用するロールアウト設定を決定します。

   1. MSM [は、多くの使用例を満たす可能性のあるいくつかのロールアウト設定](live-copy-sync-config.md#installed-rollout-configurations)をインストールします。
   1. 必要に応じて、[ロールアウト設定を作成](live-copy-sync-config.md#creating-a-rollout-configuration)できます。

1. [使用するロールアウト設定を指定する](live-copy-sync-config.md#specifying-the-rollout-configurations-to-use)場所を決定し、必要に応じて設定をおこないます。
1. 必要に応じて、ライブコピーのソースコンテンツを識別する設計図の構成[を作成します。](creating-live-copies.md#creating-a-blueprint-configuration)
1. [ライブコピーの作成を参照してください。](creating-live-copies.md#creating-a-live-copy)
1. 必要に応じてソースコンテンツを変更します。組織で確立されている通常のコンテンツのレビュー／承認プロセスを採用してください。
1. [設計図](creating-live-copies.md#rolling-out-a-blueprint) を公開するか、ライブ [コピーを変更と](creating-live-copies.md#synchronizing-a-live-copy) 同期します。

## MSM のカスタマイズ {#customizing-msm}

MSM には、コンテンツの共有時に発生する可能性のある例外的な複雑さに実装を対応させるためのツールが用意されています。

* **[カスタムロールアウト設定** ]：インストール済みのロールアウト設定が要件を満たさない場合に、ロールアウト [](live-copy-sync-config.md#creating-a-rollout-configuration) 設定を作成します。有効な任意のロールアウトトリガーおよび同期アクションを使用できます。

<!--
* **Custom Synchronization Actions** - [Create a custom synchronization action](/help/sites-developing/extending-msm.md#creating-a-new-synchronization-action) when the installed actions do not meet your specific application requirements. MSM provides a Java API for creating custom synchronization actions.
-->

## ベストプラクティス {#best-practices}

[MSM のベストプラクティス](best-practices.md)には、実装に関する重要な情報が記載されています。
