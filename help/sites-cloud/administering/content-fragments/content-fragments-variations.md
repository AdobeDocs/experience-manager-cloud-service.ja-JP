---
title: バリエーション - フラグメントコンテンツのオーサリング
description: バリエーションを使用して、フラグメントのコンテンツを作成し、目的に応じてそのコンテンツのバリエーションを作成する方法を説明します。 これにより、ヘッドレス配信とページオーサリングの両方の柔軟性が向上します。
feature: Content Fragments
role: User
hide: true
index: false
hidefromtoc: true
exl-id: f2f28207-3e14-4cf4-acce-c6cf32231e05
source-git-commit: 78ead5f15c2613d9c3bed3025b43423a66805c59
workflow-type: tm+mt
source-wordcount: '2424'
ht-degree: 44%

---

# バリエーション - フラグメントコンテンツのオーサリング{#variations-authoring-fragment-content}

<!--
hide: yes
index: no
hidefromtoc: yes
-->

[バリエーション](/help/sites-cloud/administering/content-fragments/content-fragments.md#constituent-parts-of-a-content-fragment) は、Adobe Experience Manager(AEM) コンテンツフラグメントの重要な機能です。 特定のチャネルやシナリオで使用するために、マスターコンテンツのコピーを作成および編集できるので、ページのオーサリングとヘッドレスコンテンツ配信の両方をより柔軟におこなうことができます。

次から： **バリエーション** 「 」タブでは、次の操作を実行できます。

* フラグメントの[コンテンツの入力](#authoring-your-content)
* **プライマリ**&#x200B;コンテンツの[バリエーションの作成および管理](#managing-variations)

編集中のデータタイプに応じて他の様々なアクションを実行します。次に例を示します。

* [フラグメントへのビジュアルアセットの挿入](#inserting-assets-into-your-fragment)（画像）

* 次の中から選択： [リッチテキスト](#rich-text), [プレーンテキスト](#plain-text)、および [Markdown](#markdown) （編集用）

* [コンテンツのアップロード](#uploading-content)

* [重要な統計の表示](#viewing-key-statistics)（複数行テキストについて）

* [テキストの要約](#summarizing-text)

* [バリエーションとプライマリコンテンツの同期](#synchronizing-with-master)

>[!CAUTION]
>
>フラグメントが公開または参照（あるいは両方）された後で、作成者がフラグメントを開いて編集しようとすると、AEMに警告が表示されます。 フラグメントを変更すると、参照されているページにも影響が及ぶことを警告するためです。

## コンテンツのオーサリング {#authoring-your-content}

コンテンツフラグメントを編集用に開くと、 **バリエーション** タブはデフォルトで開きます。 このタブで、プライマリまたはバリエーション（ある場合）のコンテンツをオーサリングできます。構造化フラグメントには、コンテンツモデルで定義された様々なデータタイプのフィールドが含まれます。

次に例を示します。

![全画面表示エディター](assets/cfm-variations-02.png)

以下の操作を実行できます。

* 「**バリエーション**」タブでコンテンツを直接編集します。データタイプごとに異なる編集オプションが用意されています。次に例を示します。

   * 対象： **複数行テキスト** フィールドに値を入力する場合は、 [全画面表示エディター](#full-screen-editor) 移動先：

      * [形式](#formats)の選択
      * その他の編集オプションの表示（[リッチテキスト](#rich-text)形式の場合）
      * 様々な[アクション](#actions)へのアクセス

   * の場合 **フラグメント参照** フィールド、 [コンテンツフラグメントを編集](#fragment-references-edit-content-fragment) オプションは、モデル定義に応じて使用できます。

* 割り当て **タグ** 現在のバリエーションに追加できます。タグは追加、更新および削除できます。

   * [タグ](/help/sites-cloud/authoring/features/tags.md) は、コンテンツの分類や分類に使用できるようにフラグメントを整理する際に強力です。 タグは、コンテンツを（タグ別に）検索したり、一括操作を適用したりするのに使用できます。

      * タグを検索すると、そのタグのバリエーションがハイライト表示された状態でフラグメントが返されます。
      * バリエーション名を使用する代わりに、バリエーションタグを使用して、特定のコンテンツ配信ネットワーク（CDN）プロファイル（CDN キャッシュ用）のバリエーションをグループ化することもできます。

     例えば、関係のあるフラグメントを「クリスマスローンチ」としてタグ付けして、これらのフラグメントだけをサブセットとして閲覧できるようにしたり、今後の別のローンチで使用するために新しいフォルダーにコピーしたりできます。

  >[!NOTE]
  >
  >**タグ**&#x200B;は、[メタデータ](/help/sites-cloud/administering/content-fragments/content-fragments-metadata.md)の一部として（**マスター**&#x200B;バリエーションに）追加することもできます

* [マスター](#managing-variations)コンテンツの&#x200B;**バリエーションの作成および管理.**

### 全画面表示エディター {#full-screen-editor}

複数行テキストフィールドの編集時には、全画面表示エディターを開くことができます。実際のテキスト内でタップまたはクリックしてから、次のアクションアイコンを選択します。

![全画面表示エディターアイコン](assets/cfm-variations-03.png)

フルスクリーンテキストエディターが開きます。

![全画面表示エディター](assets/cfm-variations-fullscreentexteditor.png)

全画面表示テキストエディターでは、次の情報が表示されます。

* 様々な [アクション](#actions)
* に応じて [形式](#formats)、その他の書式設定オプション ([リッチテキスト](#rich-text))

### アクション {#actions}

次のアクションも使用できます ( すべての [形式](#formats)) をクリックします。

* [形式](#formats)（[リッチテキスト](#rich-text)、[プレーンテキスト](#plain-text)、[Markdown](#markdown)）の選択

* [コンテンツのアップロード](#uploading-content)

* [テキスト統計の表示](#viewing-key-statistics)

* [プライマリとの同期](#synchronizing-with-master)（バリエーションの編集時）

* [テキストの要約](#summarizing-text)

### 形式 {#formats}

複数行テキストを編集するためのオプションは、選択した形式によって異なります。

* [リッチテキスト](#rich-text)
* [プレーンテキスト](#plain-text)
* [Markdown](#markdown)

全画面表示エディターでの作業時に形式を選択できます。

### リッチテキスト {#rich-text}

リッチテキストの編集では、以下の書式を設定できます。

* 太字
* 斜体
* 下線
* 整列：左、中央、右
* 箇条書きリスト
* 番号付きリスト
* インデント：増減
* ハイパーリンクの作成/解除
* テキストを貼り付け/Word から貼り付け
* テーブルを挿入
* 段落スタイル：段落、見出し 1/2/3
* [アセットを挿入](#inserting-assets-into-your-fragment)
* 全画面表示エディターを開く。次の書式設定オプションを使用できます。
   * 検索
   * 検索 / 置換
   * スペルチェッカー
   * [注釈](/help/sites-cloud/administering/content-fragments/content-fragments-variations.md#annotating-a-content-fragment)
* [コンテンツフラグメントを挿入](#inserting-content-fragment-into-your-fragment); **複数行テキスト** 次を使用してフィールドが設定されています： **フラグメント参照を許可**.

[アクション](#actions)は、全画面表示エディターからアクセスすることもできます。

### プレーンテキスト {#plain-text}

プレーンテキストを使用すると、書式設定または Markdown 情報なしでコンテンツをすばやく入力できます。全画面表示エディターを開いて追加の[アクション](#actions)を使用することもできます。

>[!CAUTION]
>
>次を選択した場合、 **プレーンテキスト**&#x200B;に含めると、Markdown やアセットに追加した書式、Markdown、アセットは失われます **リッチテキスト** または **Markdown**.

### マークダウン {#markdown}

>[!NOTE]
>
>詳しくは、 [Markdown](/help/sites-cloud/administering/content-fragments/content-fragments-markdown.md).

これにより、Markdown を使用してテキストを書式設定できます。 以下を定義できます。

* 見出し
* 段落と改行
* リンク
* 画像
* ブロック引用
* リスト
* 強調
* コードブロック
* バックスラッシュエスケープ

全画面表示エディターを開いて追加の[アクション](#actions)を使用することもできます。

>[!CAUTION]
>
>**リッチテキスト**&#x200B;と **Markdown** を切り替えると、ブロック引用やコードブロックに予期しない影響が出ることがあります。ブロック引用とコードブロックの 2 つの形式は処理方法が異なる場合があるからです。

### フラグメント参照 {#fragment-references}

コンテンツフラグメントモデルにフラグメント参照が含まれる場合、フラグメント作成者には次の追加オプションがあります。

* [コンテンツフラグメントを編集](#fragment-references-edit-content-fragment)
* [新しいコンテンツフラグメント](#fragment-references-new-content-fragment)

![フラグメント参照](assets/cfm-variations-12.png)

#### コンテンツフラグメントを編集 {#fragment-references-edit-content-fragment}

オプション **コンテンツフラグメントを編集** は、そのフラグメントを新しいエディタータブ（同じブラウザータブ内）で開きます。

元のタブを再度選択する ( 例： **リトルポニー**) をクリックし、このセカンダリタブを閉じます ( この場合は **Adam Smith**) をクリックします。

![フラグメント参照](assets/cfm-variations-editreference.png)

#### 新しいコンテンツフラグメント {#fragment-references-new-content-fragment}

オプション **新しいコンテンツフラグメント** フラグメントを作成できます。 そのためには、エディターにコンテンツフラグメントを作成ウィザードが開きます。

**コンテンツフラグメントを作成するには：**

1. 目的のフォルダーに移動して選択します。
1. 「**次へ**」を選択します。
1. プロパティの指定（例： ） **タイトル**.
1. 「**作成**」を選択します。
1. 最後に、
   1. **完了**:
      * （元のフラグメントに）を返します。
      * は、新しいフラグメントを参照します
   1. **開く**:
      * は、新しいフラグメントを参照します
      * 新しいフラグメントを編集用に新しいブラウザータブで開く

### 重要な統計の表示 {#viewing-key-statistics}

全画面表示エディターを開いた場合の「 」アクション **テキスト統計** テキストに関する様々な情報を表示します。

次に例を示します。

![統計](assets/cfm-variations-04.png)

### コンテンツのアップロード {#uploading-content}

コンテンツフラグメントのオーサリングプロセスを容易にするには、外部エディターで用意したテキストをアップロードし、フラグメントに直接追加します。

### テキストの要約 {#summarizing-text}

テキストの要約を使用すると、重要ポイントと全体の意味を保ちながら、テキストの長さを規定の単語数に短縮できます。

>[!NOTE]
>
>より技術的に言えば、システムは、 *情報の密度と独自性の最適な比率* 特定のアルゴリズムに従って。

>[!CAUTION]
>
>コンテンツフラグメントには、親フォルダー（ISO コード）として有効な言語フォルダーが必要です。使用する言語モデルを決定するためにこれが使用されます。
>
>例えば、次のパスの `en/` です。
>
>  `/content/dam/my-brand/en/path-down/my-content-fragment`

>[!CAUTION]
>
英語版は標準で提供されています。
>
他の言語は、ソフトウェア配布の言語モデルパッケージとして使用できます。
>
* [フランス語（fr）](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?lang=ja?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq630/product/smartcontent-model-fr)
* [ドイツ語（de）](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?lang=ja?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq630/product/smartcontent-model-de)
* [イタリア語（it）](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?lang=ja?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq630/product/smartcontent-model-it)
* [スペイン語（es）](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?lang=ja?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq630/product/smartcontent-model-es)
>

1. 「**プライマリ**」または必要なバリエーションを選択します。
1. 全画面表示エディターを開きます。

1. ツールバーの「**テキストを要約**」を選択します。

   ![要約](assets/cfm-variations-05.png)

1. ターゲットの単語数を指定し、「 」を選択します。 **開始**:
1. 元のテキストが、提案された要約と並べて表示されます。

   * 削除する文は赤でハイライト表示され、取り消し線が付きます。
   * 強調表示された文をクリックして、要約されたコンテンツに保持できます。
   * 強調表示されていない文をクリックすると、削除できます。

1. 選択 **要約**.

1. 元のテキストが、提案された要約と並べて表示されます。

   * 削除する文は赤でハイライト表示され、取り消し線が付きます。
   * 強調表示された文をクリックして、要約されたコンテンツに保持できます。
   * 強調表示されていない文をクリックすると、削除できます。
   * 要約統計（**実際**&#x200B;と&#x200B;**ターゲット**）が表示されます。
   * 変更を&#x200B;**プレビュー**&#x200B;できます。

   ![要約とオリジナルの比較](assets/cfm-variations-06.png)

### コンテンツフラグメントへの注釈の追加 {#annotating-a-content-fragment}

1. 「**プライマリ**」または必要なバリエーションを選択します。

1. 全画面表示エディターを開きます。

1. 上部のツールバーに、**注釈**&#x200B;アイコンが表示されます。必要に応じて、一部のテキストを選択できます。

   ![注釈](assets/cfm-variations-07.png)

1. ダイアログボックスが表示されます。ここで注釈を入力できます。

   ![注釈](assets/cfm-variations-07a.png)

1. 選択 **適用** をクリックします。

   ![注釈](assets/cfm-variations-annotations-apply-icon.png)

   選択したテキストに注釈が適用された場合、そのテキストはハイライト表示されたままになります。

   ![注釈](assets/cfm-variations-07b.png)

1. 全画面表示エディターを閉じても、注釈はハイライト表示されたままです。選択すると、ダイアログボックスが開き、注釈をさらに編集できます。

1. 「**保存**」を選択します。

1. 全画面表示エディターを閉じても、注釈はハイライト表示されたままです。選択すると、注釈をさらに編集できるダイアログボックスが開きます。

   ![注釈](assets/cfm-variations-07c.png)

### 注釈の表示、編集、削除 {#viewing-editing-deleting-annotations}

注釈：

* エディターのフルスクリーンモードと通常モードの両方で、テキストのハイライトで示されます。 ハイライト表示されたテキストをクリックすると、注釈の詳細が表示、編集または削除され、ダイアログボックスが再び開きます。

  >[!NOTE]
  >
  1 つのテキストに複数の注釈が適用されている場合は、ドロップダウンセレクターが表示されます。

* 注釈が適用されたテキスト全体を削除すると、注釈も削除されます。

* これらをリストに追加したり削除したりするには、 **注釈** 」タブを使用します。

  ![注釈](assets/cfm-variations-08.png)

* これらは、 [タイムライン](/help/sites-cloud/administering/content-fragments/content-fragments-managing.md#timeline-for-content-fragments) 選択したフラグメントの。

### フラグメントへのアセットの挿入 {#inserting-assets-into-your-fragment}

コンテンツフラグメントのオーサリングプロセスを容易にするには、 [Assets](/help/assets/manage-digital-assets.md) （画像）をフラグメントに直接追加します。

書式設定を行わずにフラグメントの段落シーケンスに追加されます。書式設定は、 [フラグメントがページで使用または参照されている](/help/sites-cloud/authoring/fundamentals/content-fragments.md).

>[!CAUTION]
>
参照ページではこれらのアセットの移動や削除はできません。移動や削除にはフラグメントエディターを使用する必要があります。
>
ただし、アセットの書式設定（サイズなど）は、[ページエディター](/help/sites-cloud/authoring/fundamentals/content-fragments.md)で行う必要があります。フラグメントエディターでのアセットの表示は、純粋にコンテンツフローのオーサリング用です。

>[!NOTE]
>
[画像](/help/sites-cloud/administering/content-fragments/content-fragments.md#fragments-with-visual-assets)は様々な方法でフラグメントやページに追加できます。

1. 画像を追加する位置にカーソルを置きます。
1. 以下を使用します。 **アセットを挿入** アイコンをクリックして、検索ダイアログボックスを開きます。

   ![アセット挿入アイコン](assets/cfm-variations-09.png)

1. ダイアログボックスで、DAM 内の必要なアセットに移動するか、DAM 内のアセットを検索します。

   アセットが表示されたら、サムネールをクリックして必要なアセットを選択します。

1. 「**選択**」を使用して、コンテンツフラグメント段落システムの現在の位置にアセットを追加します。

   >[!CAUTION]
   >
   アセットを追加した後に形式を次のように変更した場合：
   >
   * **プレーンテキスト**：アセットがフラグメントから失われます。
   * **Markdown**：アセットは表示されませんが、に戻すとまだ表示されます。 **リッチテキスト**.

### コンテンツフラグメントのフラグメントへの挿入 {#inserting-content-fragment-into-your-fragment}

コンテンツフラグメントのオーサリングプロセスを容易にするには、フラグメントに別のコンテンツフラグメントを追加することもできます。

これらはフラグメントの現在の場所に参照として追加されます。

>[!NOTE]
>
このオプションは、 **複数行テキスト** 次を使用して設定： **フラグメント参照を許可**.

>[!CAUTION]
>
参照ページではこれらのアセットの移動や削除はできません。移動や削除にはフラグメントエディターを使用する必要があります。
>
ただし、アセットの書式設定（サイズなど）は、[ページエディター](/help/sites-cloud/authoring/fundamentals/content-fragments.md)で行う必要があります。フラグメントエディターでのアセットの表示は、純粋にコンテンツフローのオーサリング用です。

>[!NOTE]
>
[画像](/help/sites-cloud/administering/content-fragments/content-fragments.md#fragments-with-visual-assets)は様々な方法でフラグメントやページに追加できます。

1. フラグメントを追加する位置にカーソルを置きます。
1. 以下を使用します。 **コンテンツフラグメントを挿入** アイコンをクリックして、検索ダイアログボックスを開きます。

   ![コンテンツフラグメントを挿入アイコン](assets/cfm-variations-13.png)

1. ダイアログボックスで、Assets フォルダー内の必要なフラグメントに移動するか、フラグメントを検索します。

   必要なフラグメントが表示されたら、サムネールをクリックして選択します。

1. 「**選択**」を使用して、選択したコンテンツフラグメントへの参照を現在のコンテンツフラグメント（現在の場所）に追加します。

   >[!CAUTION]
   >
   別のフラグメントへの参照を追加した後に、形式を次のように変更した場合：
   >
   * **プレーンテキスト**：参照がフラグメントから失われます。
   * **Markdown**：参照は残ります。

## バリエーションの管理 {#managing-variations}

[!CONTEXTUALHELP]
id="aemcloud_sites_contentfragments_variations"
title="バリエーション - フラグメントコンテンツのオーサリング"
abstract="特定のチャネルで使用するコンテンツのバリエーションを作成する方法を説明します。"
additional-url="https://video.tv.adobe.com/v/333295/?captions=jpn" text="コンテンツフラグメントのバリエーション"

### バリエーションの作成 {#creating-a-variation}

バリエーションを使用すると、 **マスター** コンテンツを作成し、目的に応じて変更します（必要に応じて）。

バリエーションを作成するには：

1. フラグメントを開き、サイドパネルが表示されていることを確認します。
1. サイドパネルのアイコンバーから「**バリエーション**」を選択します。
1. 選択 **バリエーションを作成**.
1. ダイアログボックスが開き、 **タイトル** および **説明** 新しいバリエーション用。
1. 選択 **追加**；フラグメント **マスター** が新しいバリエーションにコピーされ、次のバリエーションで開かれます： [編集中](#editing-a-variation).

   >[!NOTE]
   >
   バリエーションを作成する場合、常に **マスター** 開いているバリエーションではなく、コピーされます。


   >[!NOTE]
   >
   バリエーションを作成すると、 **タグ** 現在～に割り当てられている **マスター** バリエーションが新しいバリエーションにコピーされます。

### バリエーションの編集 {#editing-a-variation}

次のいずれかの後で、バリエーションのコンテンツを編集できます。

* [バリエーションの作成](#creating-a-variation).
* 既存のフラグメントを開き、サイドパネルから必要なバリエーションを選択します。

![バリエーションの編集](assets/cfm-variations-10.png)

### バリエーションの名前変更 {#renaming-a-variation}

既存のバリエーションの名前を変更するには：

1. フラグメントを開き、サイドパネルから「**バリエーション**」を選択します。
1. 必要なバリエーションを選択します。
1. 選択 **名前を変更** から **アクション** 」ドロップダウンリストから選択できます。

1. 表示されたダイアログボックスで新しい「**タイトル**」や「**説明**」を入力します。

1. を確認します。 **名前を変更** アクション。

>[!NOTE]
>
これはバリエーションにのみ影響します **タイトル**.

### バリエーションの削除 {#deleting-a-variation}

既存のバリエーションを削除するには：

1. フラグメントを開き、サイドパネルから「**バリエーション**」を選択します。
1. 必要なバリエーションを選択します。
1. 選択 **削除** から **アクション** 」ドロップダウンリストから選択できます。

1. を確認します。 **削除** アクションを使用します。

>[!NOTE]
>
**プライマリ**&#x200B;は削除できません。

### プライマリとの同期 {#synchronizing-with-master}

**マスター** はコンテンツフラグメントの一部であり、定義により、コンテンツのマスターコピーが保持されます。一方、バリエーションは、そのコンテンツの個々の更新済みのカスタマイズ済みバージョンを保持します。 マスターを更新すると、これらの変更がバリエーションにも関連する可能性があるので、バリエーションに反映する必要があります。

バリエーションを編集する際は、バリエーションの現在の要素をマスターと同期するためのアクションにアクセスできます。 これにより、必要なバリエーションに対してマスターに加えた変更を自動的にコピーできます。

>[!CAUTION]
>
同期を使用できるのは、変更内容&#x200B;*を&#x200B;**プライマリ**からバリエーションに*&#x200B;コピーする場合のみです。
>
バリエーションの現在の要素のみが同期されます。
>
同期は、 **複数行のテキスト** データタイプ。
>
*バリエーションから&#x200B;**プライマリ***へ変更内容を転送することはできません。

1. フラグメントエディターでコンテンツフラグメントを開きます。**プライマリ**&#x200B;が編集されていることを確認します。

1. 特定のバリエーションを選択し、次のいずれかから適切な同期アクションを選択します。

   * の **アクション** ドロップダウンセレクター — **現在の要素をマスターと同期**

     ![プライマリとの同期](assets/cfm-variations-11a.png)

   * 全画面表示エディターのツールバー - **マスターと同期**

     ![プライマリとの同期](assets/cfm-variations-11b.png)

1. マスターとバリエーションが並べて表示されます。

   * 緑は、コンテンツが（バリエーションに）追加されたことを示します。
   * 赤はコンテンツが（バリエーションから）削除されたことを示します
   * 青は置換されたテキストを示します

   ![プライマリとの同期](assets/cfm-variations-11c.png)

1. 選択 **同期**&#x200B;の場合、バリエーションが更新され、表示されます。
