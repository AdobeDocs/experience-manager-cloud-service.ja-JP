---
title: AEM Headless as aCloud Serviceの概要
description: AEMヘッドレス開発者ジャーニーのこのパートでは、AEMヘッドレスの前提条件について説明します。
source-git-commit: 8e96827f9353d6ffdf1e01645f2bc8bdaac2610f
workflow-type: tm+mt
source-wordcount: '3059'
ht-degree: 4%

---

# AEMヘッドレスをCloud Serviceとして使用する前に{#getting-started}

[AEMヘッドレス開発者ジャーニーのこのパートでは、独自のプロジェクトをAEMヘッドレスで開始するために必要な操作について説明します。](overview.md)

## {#story-so-far}までの話

AEMヘッドレスジャーニーの前のドキュメントでは、 [CMSヘッドレス開発について](learn-about.md)ヘッドレスCMSの基本理論を学び、次の作業を行う必要があります。

* ヘッドレスコンテンツ配信の基本概念と用語の理解
* ヘッドレスが必要な理由とタイミングの理解
* ヘッドレスな概念の使用方法とその相互関係の概要

この記事は、これらの基本事項に基づいて構築され、AEMを使用してヘッドレスソリューションを実装する方法を理解できます。

## 目的 {#objective}

このドキュメントでは、独自のプロジェクトのコンテキストでAEMヘッドレスを理解するのに役立ちます。 読み終えた後は、次の操作を行う必要があります。

* ヘッドレス機能の基本を理解しますAEM
* AEMヘッドレス機能を使用するための前提条件を理解します。
* AEMヘッドレス統合レベルに注意してください。
* プロジェクトを範囲で定義できる。

## AEMの基本{#aem-basics}

AEM内でヘッドレスプロジェクトを定義する前に、AEMの基本的な概念を理解しておくことが重要です。

### オーサーインスタンス {#author}

最も簡単な方法では、AEMはオーサーインスタンスと、コンテンツの作成、管理、公開を行う[パブリッシュインスタンス](#publish)で構成されます。

コンテンツはオーサーインスタンスで開始されます。 コンテンツ作成者がコンテンツを作成する場所です。 オーサー環境には、作成者がコンテンツを作成、整理、再利用するための様々なツールが用意されています。

### パブリッシュインスタンス {#publish}

オーサーインスタンスでコンテンツを作成したら、他のサービスで利用できるように、コンテンツを公開する必要があります。 パブリッシュインスタンスには、パブリッシュされたすべてのコンテンツが含まれます。

### レプリケーション {#replication}

レプリケーションとは、オーサーインスタンスからパブリッシュインスタンスにコンテンツを転送する行為です。 これは、作成者または適切な権限を持つ他のユーザーがコンテンツを公開する際に、AEMによって自動的におこなわれます。

### AEM Basics概要{#aem-basics-summary}

最もシンプルなレベルで、AEMでデジタルエクスペリエンスを作成するには、次の手順を実行する必要があります。

1. コンテンツ作成者は、オーサーインスタンスにヘッドレスコンテンツを作成します。
1. このコンテンツが準備できたら、パブリッシュインスタンスにレプリケートされます。
1. その後、APIを呼び出して、このコンテンツを取得できます。

AEMヘッドレスは、次の節で説明する[ヘッドレスコンテンツを管理する強力なツールを提供することで、この技術基盤から構築されます。](#aem-headless-basics)

## AEMヘッドレスの基本{#aem-headless-basics}

ヘッドレスなAEMの機能は、いくつかの主要な機能に基づいています。 これらは、このジャーニーの後半で詳しく説明します。 今重要なのは、彼らが何をし、何を呼び出すかの基礎を知ることだけです。

### コンテンツフラグメントモデル {#content-fragment-models}

コンテンツフラグメントモデルは、AEM で作成および管理するデータとコンテンツの構造を定義するもので、コンテンツの一種の基礎として機能します。コンテンツの作成を選択すると、作成者はあなたが定義したコンテンツフラグメントモデルから選択します。これが、コンテンツの作成のガイドとなります。

### コンテンツフラグメント {#content-fragments}

コンテンツフラグメントを使用すると、ページに依存しないコンテンツの設計、作成、キュレーションおよび使用が可能になります。複数の場所や複数のチャネルで使用可能なコンテンツを用意できるようになります。

コンテンツフラグメントには構造化されたコンテンツが含まれ、JSON 形式で配信できます。

### GraphQLおよびREST API {#apis}

コンテンツをヘッドレスに変更するために、AEMには2つの堅牢なAPIが用意されています。

* GraphQL API を使用すると、コンテンツフラグメントにアクセスして配信するリクエストを作成できます。
* アセット REST API を使用すると、コンテンツフラグメント（およびその他のアセット）を作成および変更できます。

これらのAPIの概要と、それらのAPIをAEMヘッドレスジャーニーの後半で使用する方法について説明します。 または、以下の[追加のリソース](#additional-resources)の節を参照して、追加のドキュメントを参照してください。

## ヘッドレス統合レベル{#integration-levels}

AEMは、完全なヘッドレスと、従来のフルスタックまたはCMSのヘッドフルモデルの両方をサポートします。 ただし、AEMは、これら2つの排他的な選択肢のみならず、両方の利点を組み合わせたハイブリッドモデルをサポートする機能を提供し、ヘッドレスプロジェクトに独自の柔軟性を提供します。

ヘッドレスの概念を確実に理解できるように、このAEMヘッドレス開発者ジャーニーでは、純粋なヘッドレスモデルに焦点を当て、AEMでのコーディングなしで、できるだけ早く運用を開始できます。

ただし、AEMヘッドレス機能を理解したら、追加のハイブリッドの可能性に注意する必要があります。 私たちは、あなたの認識のために、これらの事例を以下に示します。 プロジェクトに柔軟性が必要な場合に備えて、ジャーニーの最後にこれらの概念を詳しく紹介します。

### 既に、単一ページアプリケーション(SPA)などのヘッドレスコンテンツを外部で使用しています。 {#already-have-a-spa}

基本的な要件として、AEMから既存の外部サービスにコンテンツを配信する場合を考えてみましょう。

#### レベル1:コンテンツフラグメントの統合 — 従来のヘッドレスモデル{#level-1}

このレベルの統合は、従来のヘッドレスモデルで、コンテンツ作成者がAEMでコンテンツを作成し、GraphQLを使用して任意の数の外部サービスに無理に配信したり、Assets APIを使用して外部サービスから編集したりできます。 AEMではコーディングは不要です。

このモデルでは、AEMは、AEMコンテンツフラグメントを使用してコンテンツを作成および提供する目的でのみ使用されます。 コンテンツのレンダリングとインタラクションは、多くの場合、シングルページアプリケーション(SPA)に委任されます。

#### レベル2:AEM — ハイブリッドモデル{#level-2}にSPAを埋め込む

このレベルの統合は第1レベルに基づいて構築されますが、外部アプリケーション(SPA)をAEMに埋め込んで、コンテンツ作成者がAEM内の外部アプリケーションのコンテキストでコンテンツを表示できるようにすることもできます。 また、AEM内の外部アプリケーションの編集の制限もサポートできます。

このレベルの利点は、コンテンツ作成者が、組み込み外部SPAを使用してコンテンツを文脈内で提示しながら、ヘッドレスにコンテンツを配信しながら、ヘッドフルな方法で柔軟にAEMでコンテンツを作成できることです。

#### レベル3:AEM — ハイブリッドモデル{#level-3}でのSPAの埋め込みと完全有効化

このレベルの統合は、外部SPAのほとんどのコンテンツをAEM内で編集できるようにすることで、レベル2に基づいて構築されます。

### まだ、単一ページアプリケーション(SPA)などのヘッドレスコンテンツの外部消費者がいません。 {#do-not-have-a-spa}

AEMのコンテンツをヘッドレスに使用する新しいSPAを作成することを目的としている場合は、コンテンツフラグメントなどの機能を使用してヘッドレスコンテンツを管理し、AEM SPA Editorフレームワークを使用してSPAを構築できます。

SPA Editorを使用すると、SPAはAEMのコンテンツを使用するだけでなく、コンテンツ作成者がAEM内で完全に編集することもでき、ヘッドレス配信とAEM内でのコンテキスト内編集の両方の柔軟性を実現できます。

## 要件と前提条件{#requirements-prerequisites}

ヘッドレスAEMプロジェクトを開始する前に、いくつかの要件があります。

### 知識 {#knowledge}

* GraphQL
* ReactまたはReactフレームワークを使用したSPAの作成Angularエクスペリエンス
* AEMの基本的なスキルコンテンツフラグメントの作成とエディターの使用

### ツール {#tools}

* プロジェクトのデプロイをテストするためのサンドボックスアクセス
* ローカル開発モデリングとテスト用のデータインスタンス
* 既存の外部SPAまたはヘッドレスAEMコンテンツのその他の消費者

## プロジェクトの定義{#defining-your-project}

成功するプロジェクトに対しては、プロジェクトの要件だけでなく、役割と責務も明確に定義することが重要です。

### 対象範囲 {#scope}

プロジェクトの範囲を明確に定義することは非常に重要です。 範囲は、受け入れ条件に通知し、完了の定義を確立できます。

最初に自問する必要があるのは、「AEMヘッドレスで何を達成しようとしているか」です。 一般的に、AEMと組み合わせずに独自の開発ツールを使用して構築したエクスペリエンスアプリケーションが、将来、または今後用意される必要があります。 このエクスペリエンスアプリケーションは、モバイルアプリ、Webサイト、またはその他のエンドユーザーがエクスペリエンスアプリケーションに直面する顧客である可能性があります。 AEMヘッドレスを使用する目的は、AEMで作成、保存、管理されるコンテンツを、AEMヘッドレスを呼び出してエクスペリエンスアプリケーションから直接コンテンツや完全なCRUDコンテンツを取得する最新のAPIと共にエクスペリエンスアプリケーションに提供することです。 これが目的の操作ではない場合は、[AEMのドキュメント](https://experienceleague.adobe.com/docs/experience-manager-cloud-service.html?lang=ja)に戻り、目的の操作に適したセクションを見つけてください。

### 役割と責務{#roles-responsibilities}

個々のプロジェクトの役割は様々ですが、AEMヘッドレス開発の内容で考慮すべき重要な役割は次のとおりです。

* [管理者](#administrator)
* [コンテンツ作成者](#content-author)
* [コンテンツモデラー](#content-modeler)
* [開発者](#developer)

#### 管理者 {#administrator}

管理者は、システムの基本セットアップと設定を担当します。 例えば、管理者が、Identity Managementシステム(IMS)と呼ばれるAdobeユーザー管理システム内に組織を設定します。 管理者は、組織がIMS内のAdobeによって作成された後、Adobeからの招待メールを受け取る組織の最初のユーザーです。 管理者は、IMSにログインして、他のペルソナのユーザーを追加できます。

管理者がユーザーを設定すると、AEMヘッドレスを使用してエクスペリエンスアプリケーションを配信する際の寄稿者としての作業を遂行するための、すべてのAEMリソースにアクセスする権限がユーザーに付与されます。

管理者はAEMを設定し、ランタイム環境を準備するユーザーで、[コンテンツ作成者](#content-author)がコンテンツを作成および更新でき、[開発者](#developer)がエクスペリエンスアプリケーションのコンテンツを取得または変更するAPIを使用できるようにする必要があります。

#### コンテンツ作成者 {#content-author}

コンテンツ作成者は、AEMによってヘッドレスに配信されるコンテンツを作成および管理します。 コンテンツ作成者は、コンテンツフラグメントやアセットコンソールなどのAEM機能を使用して、コンテンツを管理します。

コンテンツ作成者は、次のベストプラクティスに留意する必要があります。

#### ローカリゼーションの計画 {#localization}

プロジェクトの最初に翻訳とローカライゼーションを計画します。 「国際化プロジェクトマネージャー」は、翻訳するコンテンツと翻訳しないコンテンツ、および地域やローカルのコンテンツプロデューサーが変更する翻訳コンテンツを定義する責任を負う個人として考えます。

必要なコンテンツのローカライゼーションに関する計画を作成します。

* 地域の詳細を取り入れるのに、異なる言語や言語が必要ですか？
* 画像やビデオなどのリッチメディアコンテンツをロケールごとに異なるコンテンツにする必要がありますか。

コンテンツ更新ワークフローについては明確にしてください。 システムがサポートする必要がある承認プロセスは何ですか？ AEMワークフローを活用してこのプロセスを自動化できますか？

[コンテンツ階層](#content-hierarchy)を活用すると、ローカリゼーションを容易にできます。

AEMのワークフローとローカライゼーションツールに関する追加のドキュメントについては、「[その他のリソース](#additional-resources)」の節を参照してください。

##### コンテンツ階層{#content-hierarchy}を活用します。

フォルダー階層では、コンテンツ管理に関する次の2つの主な問題に対処できます。

* [ローカライゼーション](#localization)  - AEMは、ロケール固有のフォルダー内にコンテンツのコピーを保持することで、コンテンツのローカライゼーションを管理します。
* 組織 — フォルダーは、ローカライゼーションのニーズをサポートするために必要なコンテンツ階層を定義し、コンテンツフラグメントを論理的に管理するために使用されます。

AEMでは、非常に柔軟なコンテンツ構造を実現でき、階層は任意に大きくできます。 ただし、フォルダー構造を変更すると、コンテンツパスに[依存する既存のクエリに対して意図しない結果が生じる可能性があることを認識することが重要です。](#developer) したがって、事前に明確に設定された明確な階層は、コンテンツ作成者にとって非常に役立ちます。

フォルダーは、（コンテンツフラグメントモデルに基づいて）特定のタイプのコンテンツのみを許可するように制限することもできます。 通常は、階層内のすべてのフォルダーに許可するモデルを常に明示的に指定することをお勧めします。 特定のフォルダーに許可するコンテンツを指定：

* コンテンツ作成者がフォルダーに属さないコンテンツをオーサリングできないようにします。
* 作成時にフォルダーで許可されているコンテンツのタイプをフィルタリングして、有効なタイプのコンテンツのみを表示することで、コンテンツ作成プロセスを最適化します。

適切なコンテンツ構造を作成すると、チャネル間でヘッドレスコンテンツのオーサリングを調整し、コンテンツの再利用を最大限にするのが容易になります。 複数のチャネルにわたるコンテンツの活用により、コンテンツの作成効率と変更管理が大幅に向上します。

##### 適切な命名規則の確立{#naming-conventions}

コンテンツフラグメント名は、コンテンツ作成者にとってわかりやすい名前にする必要があります。 AEMは、リポジトリレベルで、使用されたIDのエスケープや切り捨てを透過的に処理します。 したがって、コンテンツ作成者が提供する論理名は、常に読み取り可能で、コンテンツを表す必要があります。

* 不正な名前：`cta_btn_1`
* 名称：`Call To Action Button`

AEMページの命名規則に関する追加のドキュメントについては、[追加のリソース](#additional-resources)の節を参照してください。

##### コンテンツのネスト{#content-nesting}を過度に拡張しない

[コンテンツフ](#content-fragments) ラグメントは、ヘッドレスなコンテンツを作成するためにAEMで使用されます。AEMは、コンテンツフラグメントに対して最大10レベルのコンテンツのネストをサポートします。 ただし、AEMは、親コンテンツフラグメントで定義された各参照を反復的に解決し、すべての兄弟に子参照があるかどうかを確認する必要があることに注意してください。 これらの操作は迅速に合計され、パフォーマンスに関する懸念事項になります。

一般的な経験則として、コンテンツフラグメント参照を5レベルを超えてネストしないでください。

#### コンテンツモデラー{#content-modeler}

コンテンツモデラーは、ヘッドレスに配信する必要があるデータの要件を分析し、そのデータの構造を定義します。 これらの構造は、AEMでは[コンテンツフラグメントモデル](#content-fragment-models)と呼ばれます。 コンテンツフラグメントモデルは、コンテンツ作成者が作成するコンテンツフラグメントの基礎として使用されます。

コンテンツフラグメントモデルを定義する際の便利なアプローチは、コンテンツを使用するアプリケーションのUXコンポーネントにマッピングするモデルを作成することです。

コンテンツ作成者は、新しいコンテンツを作成するたびにモデルと継続的にやり取りするので、モデルをUXに合わせると、結果として得られるデジタルエクスペリエンスを視覚化できます。 この調整をさらに1段階進め、UX要素を表すコンテンツフラグメントモデルにアイコンを割り当て、作成者が視覚的なキューに基づいて適切なモデルを直感的に選択できるようにします。

#### 開発者 {#developer}

開発者は、AEMでヘッドレスに作成されたコンテンツをそのコンテンツの利用者と結び付ける責任を負います。これは、多くの場合、シングルページアプリケーション(SPA)、プログレッシブWebアプリ(PWA)、Webショップ、AEM以外のその他のサービスです。

GraphQLは、AEMとヘッドレスコンテンツの消費者の「接着剤」として機能します。 GraphQLは、必要なコンテンツをAEMに問い合わせる言語です。

開発者は、クエリを計画する際に、次の基本的な推奨事項に留意する必要があります。

* クエリでは、固定パス(`ByPath`)を使用してコンテンツフラグメントを取得しないでください。
   * [コンテンツ作成者は、コンテンツフラグメントの階層を完全](#content-hierarchy) に制御できるので、そのようなクエリを壊すように変更できます。
   * クエリでは、代わりに、動的クエリパラメーターを使用したコンテンツフラグメントモデル参照をオプトインして、結果をフィルタリングし、目的のペイロードを生成する必要があります。
* 最高のクエリパフォーマンスを得るには、常にAEMで永続的なクエリを使用します。 これらは、ジャーニーの後半で説明します。
* GraphQLは、「何が必要かを尋ね、それを正確に得る」というモットーに従って宣言するように設計されています。 つまり、GraphQLクエリを作成する場合、リレーショナルデータベースで作成する可能性のある`select *`タイプのクエリは常に避けてください。

AEMを使用した[一般的なヘッドレス実装の場合、開発者はAEMのコーディングに関する知識を必要としません。](#level-1)

### パフォーマンス要件{#performance-requirements}

プロジェクトを成功させるには、コンテンツを作成する前にパフォーマンスを考慮する必要があります。

ユーザー/訪問者の期待を理解し、それらのためのデザインを行う必要があります。 SLO(Service Level Objective)を設定し、ユーザーの期待に応える場合は、SLOを測定して理解します。

#### トラフィックパターン{#traffic-patterns}

トラフィックとトラフィックのパターンを理解するには、まず過去の知識を収集し、その後数年間で予想される成長を予測します。 最も重要な変数の一部を次に示します。

* 1時間/日/月あたりのAPI呼び出し数はどれくらいですか。また、スパイクや季節性が生じる可能性はありますか。
* コンテンツ作成者の数
* 同時に作業するコンテンツ作成者は何人いると予想されますか？
* コンテンツ更新の頻度はどれくらいですか？
* 必要なコンテンツモデルの数
* モデルのインスタンスはいくつ必要ですか？

#### 更新頻度{#update-frequency}

多くの場合、エクスペリエンスのセクションが異なれば、コンテンツの更新の頻度が異なります。 CDNとキャッシュ設定を微調整できるようにするには、これを理解することが重要です。 これは、コンテンツを表すモデルを設計する際に、[コンテンツモデラー](#content-modeler)に対する重要な入力でもあります。 次の点を考慮してください。

* 一部のタイプのコンテンツは、一定の期間が過ぎると期限切れになりますか？
* ユーザー固有の要素があり、そのためキャッシュできない要素はあるか。

## 次の手順{#what-is-next}

これで、AEMヘッドレス開発者ジャーニーのこの部分が完了し、次の作業が完了しました。

* ヘッドレス機能の基本を理解しますAEM
* AEMヘッドレス機能を使用するための前提条件を理解します。
* AEMヘッドレス統合レベルに注意してください。
* プロジェクトを範囲で定義できる。

次に、必要なツールの設定方法とAEMでのデータのモデリングに関する考え方を学ぶ[AEMヘッドレスを使用した初めてのエクスペリエンスへのパス](path-to-first-experience.md)を確認して、AEMヘッドレスのジャーニーを続ける必要があります。

## その他のリソース {#additional-resources}

[AEMヘッドレスを使用した初めてのエクスペリエンスへのパス](path-to-first-experience.md)ドキュメントを確認して、ヘッドレス開発の次の部分に進むことをお勧めしますが、以下は、このドキュメントで取り上げたいくつかの概念に関する詳細な説明です。

* [Adobe Experience Manager as aCloud Serviceのアーキテクチャの概要](/help/core-concepts/architecture.md)  - AEMをCloud Serviceの構造として理解する
* [AEMヘッドレスTutorials](https://experienceleague.adobe.com/docs/experience-manager-learn/getting-started-with-aem-headless/overview.html?lang=ja)  — これらの実践チュートリアルを使用して、AEMを使用してヘッドレスエンドポイントにコンテンツを配信し、適切なコンテンツを選択するための様々なオプションの使用方法を検討します。
* [GraphQL APIを使用したヘッドレスコンテンツ管理](https://experienceleague.adobe.com/?Solution=Experience+Manager&amp;Solution=Experience+Manager+Sites&amp;Solution=Experience+Manager+Forms&amp;Solution=Experience+Manager+Screens&amp;launch=ExperienceManager-D-1-2020.1.headless#courses)  - AEMで実装されたGraphQL APIの概要については、このコースに従ってください。Adobe IDを使用した認証が必要です。
* [AEMガイドWKND - GraphQL](https://github.com/adobe/aem-guides-wknd-graphql)  — このGitHubプロジェクトには、AEM GraphQL APIをハイライトするサンプルアプリケーションが含まれています。
* [オーサリングの概念](/help/sites-cloud/authoring/getting-started/concepts.md)  — オーサーとパブリッシュの設定の詳細など、AEMのオーサリング環境に関する技術ドキュメント
* [ページの公開](/help/sites-cloud/authoring/fundamentals/publishing-pages.md)  - AEMでのコンテンツの公開に関する技術ドキュメント
* [命名規則](/help/implementing/developing/introduction/naming-conventions.md)  - AEMのページ命名の制限に関する技術ドキュメント
* [マルチサイトマネージャーと翻訳](/help/sites-cloud/administering/msm-and-translation.md) - AEMの強力な翻訳機能に関する技術ドキュメント
* [AEMワークフロー](/help/sites-cloud/authoring/workflows/overview.md)  - AEMでのワークフローの自動化方法に関する技術ドキュメント
* [コンテンツフラグメント](/help/assets/content-fragments/content-fragments.md)  — コンテンツフラグメントの技術ドキュメント。
* [コンテンツフラグメントモデル](/help/assets/content-fragments/content-fragments-models.md)  — コンテンツフラグメントモデルの技術ドキュメント。
* [GraphQL技術ドキュメント](https://graphql.org)  - GraphQL定義（外部リンク）
* [GraphQL API](/help/assets/content-fragments/graphql-api-content-fragments.md)  — コンテンツフラグメントにアクセスして配信するリクエストの作成方法を説明する技術ドキュメント
* [Assets REST API](/help/assets/content-fragments/assets-api-content-fragments.md)  — コンテンツフラグメント（およびその他のアセット）の作成および変更方法を説明する技術ドキュメント
* [永続クエリ](/help/assets/content-fragments/graphql-api-content-fragments.md#persisted-queries-caching)  - AEMでの永続クエリに関する技術ドキュメント
* [AEMのヘッドフルとヘッドレス](/help/implementing/developing/headful-headless.md)  - AEMで使用可能なヘッドレス統合レベルの完全な説明
