---
title: アダプティブフォームのテーブル
seo-title: Tables in Adaptive Forms
description: ' [!DNL AEM Forms]  のテーブルコンポーネントでは、モバイルレイアウトにレスポンシブなアダプティブフォームでテーブルを作成することができ、XDP テーブルコンポーネントも使用できます。'
seo-description: The Table component in [!DNL AEM Forms] lets you create tables in Adaptive Forms that are responsive to mobile layouts, and also allows using XDP table components.
uuid: 03436c81-42f0-430f-9e52-14a4ab0e877d
topic-tags: author
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: fc418da9-496f-4a2b-bfe4-2add3ac4f468
docset: aem65
source-git-commit: 7163eb2551f5e644f6d42287a523a7dfc626c1c4
workflow-type: tm+mt
source-wordcount: '2311'
ht-degree: 100%

---


# アダプティブフォームのテーブル {#tables-in-adaptive-forms}

複雑なデータであっても、テーブルを使用することで、効果的かつシンプルにまとめて提示できます。情報をわかりやすく配置し、行と列に分けて規則正しく配列することで、ユーザーも入力しやすくなります。金融サービスや政府機関が提供するフォームの大部分は、数字を入力して計算を実行できる大規模なデータテーブルを必要とします。

[!DNL AEM Forms] を使用すると、サイドバーにあるコンポーネントブラウザーからテーブルコンポーネントを追加し、アダプティブフォーム内でテーブルを作成できるようになります。主な機能には、以下のようなものがあります。

* モバイルデバイス上のレスポンシブなレイアウト
* 設定可能な行と列
* 実行時の動的な追加と削除
* セルの結合と分割
* スクリーンリーダーによるアクセス
* CSS を使用したカスタムレイアウト
* XDP テーブルコンポーネントとの互換性とマッピング
* XSD 複合タイプ要素を使用した行またはセルの追加のサポート
* XML ファイルからのデータの結合

## テーブルの作成 {#create-a-table}

テーブルを作成するには、テーブルコンポーネントをサイドキックにあるコンポーネントブラウザーからアダプティブフォームにドラッグ＆ドロップします。テーブルには、デフォルトで 2 つの列とヘッダー行を含む 3 つの行が含まれています。

![AEM サイドバーのテーブルコンポーネント](assets/sidebar-tables.png)

### ヘッダーとボディセルについて {#about-header-and-body-cells}

ヘッダーセルは、テキストフィールドです。ヘッダーのラベルを変更するには、ヘッダーセルを右クリックし、「**編集**」をクリックします。編集ダイアログの「**値**」フィールドのラベルを編集して、「**OK**」をクリックします。

ボディセルは、デフォルトでテキストボックスになっています。ボディセルは、数値ボックス、日付選択、ドロップダウンリストなど、サイドキックで使用できるどのアダプティブフォームコンポーネントとでも置き換えることができます。

例えば、以下のテーブルの最初のボディ行には、テキストボックス、日付選択、ドロップダウンリストのコンポーネントがセルとして含まれています。

![行セルのタイプ](assets/row-cell-types.png)

結合したいセルを選択し、右クリックして「**結合**」を選択することで、複数のセルを結合できます。また、結合されたセルを右クリックして「**セルの分割**」を選択することで、セルを分割できます。

### 行および列の追加、削除、移動 {#add-delete-move-rows-and-columns}

行または列を追加／削除したり、テーブルの中で行を上下に移動させることができます。

行または列を追加／削除する、または行を移動させるには、行または列に含まれるセルのいずれかをクリックします。列の一番上および行の左側にドロップダウンメニューが表示されます。上部のメニューには列を追加または削除するオプションが表示され、左側のメニューには行を追加、削除または移動させるオプションが表示されます。

* 追加の操作では、選択された行の下に行が、そして選択された列の右隣に列が追加されます。
* 削除の操作では、選択された行または列が削除されます。
* 上へ移動または下へ移動の操作は、選択された行を上下に移動させます。

行のドロップダウンメニューでは、行のプロパティ、設定、スタイル設定オプションを編集する編集操作も提供されます。

![add-delete-move-row-column](assets/add-delete-move-row-column.png)

>[!NOTE]
>
>* テーブルには、任意の数の行を追加できますが、追加できる列の数は最大 6 つまでに制限されています。また、テーブルからヘッダー行を削除することはできません。
>
>* PDF フォームのアダプティブフォームへの自動変換により、ヘッダーなしのテーブルを作成できます。ヘッダーのないテーブルに、列を追加したり、削除したりできます。列の追加と削除に役立つように、非表示のヘッダーがこのようなテーブルに追加されます。これらのヘッダーは、オーサリング中には表示されますが、公開されたフォームでは非表示のままになります。





### テーブルの説明の追加 {#add-table-description}

情報がどのように整理されているか、スクリーンリーダーが解釈し、読み出すことのできる説明を、テーブルに追加できます。説明を追加するには、以下の手順を実行します。

1. テーブルを選択して ![cmppr](assets/cmppr.png) をタップし、サイドバーにプロパティを表示します。
1. 「アクセシビリティ」タブで概要を指定します。
1. 「**完了**」をクリックします。

### テーブルの列の並べ替え {#sortcolumnstable}

アダプティブフォームのテーブルの任意の列に基づいてデータを並べ替えることができます。列の値は、昇順または降順で並べ替えることができます。

並べ替えは、以下の項目を含むテーブルの列に適用できます。

* 静的テキスト
* データモデルオブジェクトプロパティ
* 静的テキストとデータモデルオブジェクトプロパティの組み合わせ

テーブルの列に並べ替えを適用するには、数値ボックス、数値ステッパー、日付入力フィールド、日付選択、テキスト、テキストボックスのうち、いずれかのコンポーネントがテーブルの列のセルに含まれている必要があります。

並べ替えを有効にするには、以下の手順を実行します。

1. テーブルを選択し、![configure_icon](assets/configure_icon.png)（設定）をタップします。インタラクティブ通信のサイドキックにある&#x200B;**コンテンツ**&#x200B;ブラウザーを使用して、テーブルを選択することもできます。
1. 「**並べ替えを有効にする**」を選択します。
1. ![done_icon](assets/done_icon.png) をタップして、テーブルのプロパティを保存します。列ヘッダー内の並べ替えアイコンの上向き矢印と下向き矢印は、並べ替えが有効になっていることを表します。

   ![並べ替えを有効にする](assets/enable_sorting_new.png)

1. **プレビュー**&#x200B;モードに切り替えて、出力を表示します。テーブルは、テーブルの最初の列に基づいて自動的に並べ替えられます。
1. 列ヘッダーをクリックして、列に基づいて値を並べ替えます。

   上向き矢印の付いた列ヘッダーは、その列に基づいてテーブルが並べ替えられていることを表します。さらに、列の値が昇順で表示されます。

   ![昇順での並べ替え](assets/sorting_ascending_new.png)

   同様に、下向き矢印の付いた列見出しは、列内の値が降順で表示されていることを表します。

   また、**プレビュー**&#x200B;モードでテーブルを変更し、列見出しをもう一度クリックして、列の値を並べ替えることもできます。

## テーブルのスタイルの設定 {#configure}

ページツールバーでスタイルモードを使用することで、テーブルのスタイルを定義できます。以下の手順を実行して、スタイルモードに切り替え、テーブルのスタイルを編集します。

1. ページツールバーで、プレビューの前に、![canvas-drop-down](assets/canvas-drop-down.png)／**スタイル**&#x200B;をタップします。

1. サイドバーでテーブルを選択し、編集ボタン ![edit-button](assets/edit-button.png) をタップします。サイドバーにスタイルプロパティが表示されます。

![テーブルのスタイルプロパティ](assets/style-table.png)

>[!NOTE]
>
>ヘッダーおよびボディ行のカラーテーマは、LESS 変数の値を変更することで変更できます。詳しくは、[ [!DNL AEM Forms]](themes.md) のテーマを参照してください

## 行の動的な追加または削除 {#add-or-delete-a-row-dynamically}

テーブルには、実行時の動的な行の追加および削除のサポートがあらかじめ含まれています。

1. テーブルの行を選択して ![cmppr](assets/cmppr.png) をタップします。
1. 「設定を繰り返し」タブで、テーブルの行の数を制限する最大値と最小値を指定します。
1. 「**完了**」をクリックします。

実行時に、行を追加／削除するための **+** と *-* ボタンが表示されます。

![add-delete-rows-dynamically](assets/add-delete-rows-dynamically.png)

>[!NOTE]
>
>行の動的な追加／削除は、テーブルの「左側にヘッダー」のモバイルレイアウトではサポートされていません。

## テーブルの式 {#expressions-in-a-table}

アダプティブフォームのテーブルでは、テーブルまたは行を表示／非表示にする、すべての数値を加算して合計をセルに表示する、セルを有効または無効にする、ユーザー入力を検証するなどの動作を誘導する式を JavaScript で作成できます。これらの式は、アダプティブフォームのスクリプトモデル API を使用しています。

テーブルと行では、式によって返される値を基にその表示をコントロールする表示式のみがサポートされていますが、セルでは、以下の式がサポートされています。

* **初期化スクリプト：**&#x200B;フィールドの初期化時にアクションを実行します。
* **値コミットスクリプト：**&#x200B;フィールドの値が変更された後でフォームのコンポーネントを変更します。

>[!NOTE]
>
>同じフィールドに XFA change/exit スクリプトも適用されている場合は、値コミットスクリプトの前に XFA change/exit スクリプトが実行されます。

* **式の計算**：フィールドの値を自動計算します。
* **検証式**：フィールドを検証します。
* **アクセス式**：フィールドを有効／無効にします。
* **表示式**：フィールドおよびパネルの表示をコントロールします。

テーブルまたは行の表示の式は、対応する編集コンポーネントダイアログの「パネルプロパティ」タブで定義できます。セルの式は、編集コンポーネントダイアログの「スクリプト」タブで定義できます。

アダプティブフォームクラス、イベント、オブジェクトおよびパブリック API の完全なリストについては、「[アダプティブフォーム用 JavaScript ライブラリ API リファレンス](https://helpx.adobe.com/jp/experience-manager/6-5/forms/javascript-api/index.html)」を参照してください。

## モバイルレイアウト {#mobile-layouts}

アダプティブフォームのテーブルは、その流動的でレスポンシブなレイアウトで、モバイルデバイスでの卓越したエクスペリエンスを提供します。[!DNL AEM Forms] には、テーブル用のモバイルレイアウトとして、「左側にヘッダー」と「折りたたみ可能な列」の 2 種類が用意されています。

テーブルのモバイルレイアウトは、テーブルの編集コンポーネントダイアログの「スタイル設定」タブから設定できます。

### 左側にヘッダー {#headers-on-left}

左側にヘッダーのレイアウトでは、テーブルのヘッダーが左側に転置され、ヘッダーに寄せてセルがひとつだけ表示されている形になっています。このレイアウトでの各行は、個別のセクションとして表示されます。以下の画像では、デスクトップ上でのテーブルとモバイルデバイス上でのテーブルを比較しています。

![デスクトップビュー](assets/desktopview_new.png)

左側にヘッダーのレイアウトを使用したテーブルのデスクトップビュー

![左側にヘッダー](assets/headersontheleft_new.png)

左側にヘッダーのレイアウトを使用したテーブルのモバイルビュー

### 折りたたみ可能な列のレイアウト {#collapsible-columns-layout}

折りたたみ可能な列のレイアウトでは、デバイスの大きさによって 1 つまたは 2 つの列が表示され、その他の列は折りたたまれます。折りたたみ／展開アイコンをクリックすると、テーブルの他の列を表示できます。

>[!NOTE]
>
>折りたたみ可能な列のレイアウトはモバイルデバイス向けに最適化されていますが、テーブルの中のすべての列を表示するのに十分な幅がない場合に、デスクトップにも使用できます。

以下の画像では、列が折りたたまれた状態と展開された状態で、テーブルがどのように表示されるかを比較しています。

![折りたたまれた列](assets/collapsed-column.png)

モバイルデバイス上で、列が 2 つだけ表示されているテーブルの中の折りたたまれた列

![collapsible_column](assets/collapsible_column.png)

モバイルデバイス上で展開されたテーブルの列

## テーブルでのデータの結合 {#merge-data-in-a-table}

アダプティブフォームのテーブルでは、実行時に、XML ファイルからのデータを使用してテーブルにデータを入力できます。データ XML ファイルは、[!DNL AEM Forms] サーバーが稼動しているマシンのローカルファイルシステム、または CRX リポジトリーに置くことができます。

XML ファイルのデータを使用して入力する、以下の銀行取引概要テーブルの例を見てみましょう。

![data-merge-table](assets/data-merge-table.png)

この例で使用する要素名プロパティを以下に示します。

* 行：**Row1**
* 取引日の下のボディセル：**tableItem1**
* 説明の下のボディセル：**tableItem2**
* 取引の種類の下のボディセル：**type**
* 金額（USD）の下のボディセル：**tableItem3**

以下の形式のデータを含む XML ファイル：

```xml
<?xml version="1.0" encoding="UTF-8"?><afData>
  <afUnboundData>
    <data>
 <typeSelect>0</typeSelect>
 <Row1>
      <tableItem1>2015-01-08</tableItem1>
      <tableItem2>Purchase laptop</tableItem2>
      <type>0</type>
      <tableItem3>12000</tableItem3>
 </Row1>
 <Row1>
      <tableItem1>2015-01-05</tableItem1>
      <tableItem2>Transport expense</tableItem2>
      <type>0</type>
      <tableItem3>120</tableItem3>
 </Row1>
 <Row1>
      <tableItem1>2014-01-08</tableItem1>
      <tableItem2>Laser printer</tableItem2>
      <type>0</type>
      <tableItem3>500</tableItem3>
 </Row1>
 <Row1>
      <tableItem1>2014-12-08</tableItem1>
      <tableItem2>Credit card payment</tableItem2>
      <type>0</type>
      <tableItem3>300</tableItem3>
 </Row1>
 <Row1>
      <tableItem1>2015-01-06</tableItem1>
      <tableItem2>Interest earnings</tableItem2>
      <type>1</type>
      <tableItem3>12000</tableItem3>
 </Row1>
 <Row1>
      <tableItem1>2015-01-05</tableItem1>
      <tableItem2>Payment from a client</tableItem2>
      <type>1</type>
      <tableItem3>500</tableItem3>
 </Row1>
 <Row1>
      <tableItem1>2015-01-08</tableItem1>
      <tableItem2>Food expense</tableItem2>
      <type>0</type>
      <tableItem3>120</tableItem3>
 </Row1>
 </data>
  </afUnboundData>
  <afBoundData>
    <data/>
  </afBoundData>
  <afBoundData/>
</afData>
```

サンプル XML では、行のデータは、テーブルの行の要素名である `<Row1>` タグによって定義されています。`<Row1>` タグ内では、各セルのデータは、タグ内の `<tableItem1>`、`<tableItem2>`、`<tableItem3>`、`<type>` などの要素名で定義されています。

実行時にこのデータをテーブルに結合するには、wcmmode を無効にした状態で、XML の絶対位置でこのテーブルを含むアダプティブフォームを指定する必要があります。例えば、アダプティブフォームが *https://`servername`/myForms/bankTransaction.html* にあり、データ XML ファイルが *C:/myTransactions/bankSummary.xml* に保存されている場合、以下の URL でデータを含むテーブルを確認できます。

*https://`servername`/myForms/bankTransaction.html?dataRef=file:/// C:/myTransactions/bankSummary.xml&amp;wcmmode=disabled*

![data-merged-table](assets/data-merged-table.png)

## XDP コンポーネントおよび XSD 複合タイプの使用 {#use-xdp-components-and-xsd-complex-types}

XFA フォームテンプレートに基づいてアダプティブフォームを作成した場合、XFA 要素は AEM コンテンツファインダーの「データモデル」タブで利用できます。テーブルを含むこれらの XFA 要素は、アダプティブフォームにドラッグ＆ドロップできます。

XFA のテーブル要素は、テーブルコンポーネントにマッピングされており、追加設定なしでアダプティブフォームに使用できます。XDP テーブルのすべてのプロパティおよび機能は、アダプティブフォームに移動されるときに保持されるので、ネイティブのアダプティブフォームのテーブルと同様に操作を行うことができます。例えば、XDP テーブルの行が繰り返し可能とマークされている場合、アダプティブフォームにドロップされたときにも繰り返されます。

さらに、XDP サブフォームをドラッグ＆ドロップして、新しい行をテーブルに追加することもできます。ただし、階層化されたサブフォームをドロップすることはできませんので注意してください。

>[!NOTE]
>
>ヘッダー行のない XDP テーブルは、アダプティブフォームのテーブルコンポーネントにマッピングされません。代わりに、流動的なレイアウトを持つアダプティブフォームのパネルコンポーネントにマッピングされます。また、階層化されたテーブルを XDP からアダプティブフォームに追加する場合、外側のテーブルはパネルに変換され、内側のテーブルは保持されます。

さらに、XSD 複合タイプ要素のグループをドラッグ＆ドロップし、テーブルの行を作成できます。要素をドロップした行のすぐ下に、新しい行が作成されます。XSD 複合タイプ要素を使用して作成されたセルは、XSD への連結参照を維持します。また、セルに要素をドロップすることで、ボディセルを XSD 複合タイプ要素で置き換えることもできます。

>[!NOTE]
>
>XDP テーブルコンポーネント（サブフォーム）または XSD 複合タイプ内の要素の数は、行内のセルの数を超えることはできません。例えば、セルが 3 つしかない行に、4 つの要素をドロップすることはできません。これは、エラーとなります。
>
>要素数が行内のセルの数より少ない場合、要素に基づいたセルが新しい行にまず追加され、その後、行内の残りのセルに入力するためにデフォルトのセルが追加されます。例えば、3 つの要素のグループを 4 つのセルを持つ行にドロップした場合、最初の 3 つのセルはドロップされた要素に基づくセルとなり、残りの 1 つのセルはテーブルのデフォルトのセルになります。

## 主な考慮事項 {#key-considerations}

* XSD ベースのテーブルの作成中に行を上下に移動させると、フォームの送信時に、テーブルの行から、XML によって生成されたデータのデータ損失が見られます。
* デフォルトのテーブルの各ボディセルには、事前に定義された要素名が関連付けられています。アダプティブフォームに別のテーブルを追加すると、新しいテーブルのデフォルトのボディセルには、最初のテーブルと同じ要素名が割り当てられます。このようなケースでは、フォームの送信時に生成されるデータに、どちらかひとつのテーブルのデフォルトのボディセルのデータのみが含まれることになります。そのため、テーブルをまたいで一意の名前になるようにデフォルトのボディセルの要素名を変更し、データ損失を避けるようにしてください。

   これは、デフォルトのボディセルにのみ該当します。テーブルに行または列を追加すると、デフォルト以外のボディセルに対して、一意の要素名が自動生成されます。

