---
title: ユニバーサルエディターでのGoogle reCAPTCHA のFormsへの追加
description: Edge Delivery Services フォームにGoogle reCAPTCHA 対策を実装してスパムと自動攻撃を防ぐためのガイド
feature: Edge Delivery Services
keywords: フォームの reCAPTCHA, ユニバーサルエディターでの reCAPTCHA の使用, フォームでの reCAPTCHA の追加, フォームのセキュリティ, スパム保護
role: Developer, Admin
level: Intermediate
exl-id: 1f28bd13-133f-487e-8b01-334be7c08a3f
source-git-commit: 2e2a0bdb7604168f0e3eb1672af4c2bc9b12d652
workflow-type: tm+mt
source-wordcount: '1290'
ht-degree: 5%

---


# ユニバーサルエディターでのGoogle reCAPTCHA のFormsへの追加

Google reCAPTCHA は、人間によるユーザーと自動ボットを区別して、フォームを保護するのに役立ちます。 このガイドでは、ユニバーサルエディターで reCAPTCHA Enterprise バージョンと Standard バージョンの両方を実装する方法について説明します。

**目標：**

- 適切な reCAPTCHA ソリューションを選択します
- reCAPTCHA Enterprise または Standard の設定
- reCAPTCHA のフォームへの追加
- 実装の検証とテスト
- パフォーマンスの監視と最適化

## 前提条件

開始する前に、次の点を確認してください。

### アクセス要件

- AEM as a Cloud Service オーサリングアクセス
- フォーム編集権限を持つユニバーサルエディターへのアクセス
- reCAPTCHA 機能の早期アクセスプログラムへの登録

### 技術要件

- アクティブなGoogle アカウント
- 大規模法人の場合：請求が有効なGoogle Cloud Platform プロジェクト
- Standard の場合：Google reCAPTCHA アカウント
- フォームのドメイン所有権の確認

### 知識要件

- AEM Formsとユニバーサルエディターの基本的な理解
- クラウドサービス設定に精通していること
- フォームセキュリティの概念について

## Formsで reCAPTCHA を使用する理由

| ![セキュリティ](/help/edge/docs/forms/universal-editor/assets/security.svg) | ![ボット保護](/help/edge/docs/forms/universal-editor/assets/bot-protection.svg) | ![ユーザーエクスペリエンス](/help/edge/docs/forms/universal-editor/assets/user-experience.svg) |
|:-------------:|:-------------:|:-------------:|
| **セキュリティの強化** | **ボットおよびスパムの防止** | **シームレスなユーザーエクスペリエンス** |
| 不正行為や攻撃からフォームを保護 | 自動ボットによるフォームの送信の防止 | Invisible reCAPTCHA は、正当なユーザーを混乱させません |

**重要な概念：** reCAPTCHA は、機械学習を使用してユーザーの行動を分析し、人間のインタラクションの可能性を示すスコア（0.0～1.0）を割り当てます。 スコアが高いほど人間のユーザーを示し、スコアが低いほどボットを示します。

**例：** 機密データを処理する税金計算フォームには、自動攻撃からの保護が必要です。 reCAPTCHA は、送信がボットではなく、実際のユーザーからのものであることを検証します。

## reCAPTCHA ソリューションの選択

Edge Delivery Services Formsは、2 つのGoogle reCAPTCHA オプションをサポートします。 次の条件を使用して、適切なソリューションを選択します。

### クイック決定ガイド

**以下がある場合は、reCAPTCHA Enterprise を使用します。**

- 高トラフィックのフォーム（1 か月あたり 10,000 件を超えるリクエスト）
- 厳格なコンプライアンス要件（GDPR、SOX、HIPAA）
- 高度な分析とレポート機能が必要
- プレミアム セキュリティ機能の予算
- 複雑なマルチドメインの導入

**以下がある場合は、reCAPTCHA 標準を使用します。**

- 低～中程度のトラフィック（月あたり 10,000 件未満のリクエスト）
- 基本的なセキュリティのニーズ
- 制限付き予算（無料利用枠）
- シンプルな単一ドメイン設定
- reCAPTCHA を初めて使用する

### 詳細な比較

| **機能** | **reCAPTCHA Enterprise** | **reCAPTCHA Standard** |
|-------------|--------------------------|------------------------|
| **コスト** | 有料（使用状況に基づいた価格設定） | フリー |
| **要求の制限** | 制限なし | 1 か月あたり 100 万のリクエスト |
| **高度な分析** | 詳細なレポート | 基本統計のみ |
| **カスタムルール** | アカウント固有のルール | グローバルルールのみ |
| **マルチドメインのサポート** | 高度な管理 | 基本サポート |
| **SLA** | 99.9% のアップタイム保証 | ベストエフォート |
| **サポート** | エンタープライズサポート | コミュニティサポート |
| **適合** | エンタープライズグレード | 標準コンプライアンス |

**どちらのソリューションも以下を提供します。**

- スコアベースの検出（0.0 ～ 1.0 のスケール）
- 非表示の操作（ユーザーインタラクションは不要）
- 機械学習を活用したボット検出
- リアルタイムのリスク評価

## reCAPTCHA Enterprise の設定


+++ 手順 1:Google Cloud Environment の準備

**要件：**

1. 請求が有効なGoogle Cloud プロジェクト
2. プロジェクト ID （GCP ダッシュボードから）
3. フォームのドメイン検証
4. GCP およびAEMへの管理者アクセス

**設定：**

1. Google クラウドプロジェクトを作成または選択
   - [Google Cloud Console](https://console.cloud.google.com/) に移動します
   - 新しいプロジェクトを作成するか、既存のプロジェクトを選択します
   - プロジェクト ID をメモします

2. reCAPTCHA Enterprise API の有効化
   - API とサービス/ライブラリに移動します。
   - 「reCAPTCHA Enterprise API」を検索します
   - 「有効」をクリックします

3. API 資格情報の作成
   - API とサービス /資格情報に移動します。
   - 「認証情報を作成」/「API キー」をクリックします
   - API キーをコピーして保存

4. サイトキーを作成
   - セキュリティ/reCAPTCHA エンタープライズに移動します
   - 「キーを作成」をクリックします
   - スコアベースのキータイプを選択
   - ドメインを追加
   - しきい値スコアの設定（推奨：0.5）

**検証チェックポイント：** 次のことを確認します。

- プロジェクト ID
- API キー
- サイトキー
- Google Cloud の検証済みドメイン

+++

+++ 手順 2:AEM Cloud Configuration コンテナの設定

![ クラウド設定のセットアップ手順 ](/help/edge/docs/forms/universal-editor/assets/recaptcha-general-configuration.png)
*図：フォームコンテナに対するクラウド設定の有効化*

**設定：**

1. 設定ブラウザーへのアクセス
   - AEM オーサーインスタンスにログインします。
   - ツール/一般/設定ブラウザーに移動します。

2. クラウド設定の有効化
   - フォームの設定コンテナを見つけます
   - プロパティを選択
   - クラウド設定の確認
   - 「保存して閉じる」をクリックします

3. 設定の確認
   - コンテナプロパティに「クラウド設定」が表示されることを確認します

**検証チェックポイント：**

- コンテナに対して有効になっているクラウド設定
- 設定ブラウザーにコンテナが表示される
- プロパティで「クラウド設定」が有効と表示される

+++

+++ 手順 3:AEMでの reCAPTCHA エンタープライズサービスの設定

![reCAPTCHA エンタープライズ設定画面 ](/help/edge/docs/forms/universal-editor/assets/recaptcha-enterprise.png)
*図：AEMの reCAPTCHA エンタープライズ設定インターフェイス*

**設定：**

1. reCAPTCHA 設定へのアクセス
   - ツール/クラウドサービス/reCAPTCHA に移動します
   - フォームの設定コンテナを選択します
   - 「作成」をクリックします

2. エンタープライズ設定の指定
   - タイトル：わかりやすい名前（「Production reCAPTCHA」など）
   - 名前：システム名（自動生成またはカスタム）
   - バージョン :「ReCAPTCHA Enterprise」を選択します
   - プロジェクト ID: Google Cloud プロジェクト ID を入力します
   - サイトキー：Google Cloud からサイトキーを入力します
   - API キー：Google Cloud API キーを入力します
   - キータイプ：スコアベースのサイトキーを選択します

3. セキュリティしきい値の設定
   - しきい値スコア : 0.0 ～ 1.0 に設定
   - 推奨値：
      - 0.7～0.9：高いセキュリティ（一部の正規ユーザーをブロックする可能性あり）
      - 0.5～0.7：バランスの取れたセキュリティ（推奨）
      - 0.1～0.5：セキュリティが低い（より多くのユーザーが許可される）

4. 保存して公開
   - 「作成」をクリックして、設定を保存します
   - 「公開」をクリックして使用可能にします

**検証チェックポイント：**

- 設定が正常に保存されました
- すべての必須フィールドに入力しました
- 設定が公開され、表示されました
- エラーメッセージなし

+++

## reCAPTCHA Standard の設定

+++手順 1:reCAPTCHA API キーの取得（詳細を参照）

>[!IMPORTANT]
>
> Edge Delivery Services Formsは、reCAPTCHA v2 （スコアベース）のみをサポートします。 チェックボックスバージョンは使用しないでください。

**キーの生成：**

1. Google reCAPTCHA コンソールへのアクセス

   - [Google reCAPTCHA Admin Console](https://www.google.com/recaptcha/admin) に移動
   - Google アカウントでログイン

2. 新しいサイトの作成

   - 「+」をクリックして新しいサイトを追加します
   - ラベル：わかりやすい名前を入力します
   - reCAPTCHA タイプ：reCAPTCHA v2 /「I&#39;m not a robot」を選択して非表示
   - ドメイン：フォームドメインを追加します
   - 条件に同意し、「送信」をクリックします

3. キーを収集

   - サイトキー：サイトキー（公開鍵）をコピーします
   - 秘密鍵：秘密鍵をコピーします。

**検証チェックポイント：**

- reCAPTCHA コンソールで作成されたサイト

- サイトキーを取得しました

- 秘密鍵を取得しました

- ドメインが追加および検証されました

+++

+++手順 2:AEM Cloud Configuration コンテナを設定する（詳細を参照）

エンタープライズ設定と同じプロセスに従います。

1. 設定ブラウザーでクラウド設定を有効にする

2. コンテナ設定の検証

3. 設定が保存されたことを確認

+++

+++手順 3:AEMで reCAPTCHA 標準サービスを設定（詳細を参照）

![reCAPTCHA 標準設定画面 ](/help/edge/docs/forms/universal-editor/assets/recaptcha.png)
*図：AEMの reCAPTCHA 標準設定インターフェイス*

**設定：**

1. reCAPTCHA 設定へのアクセス

   - ツール/クラウドサービス/reCAPTCHA に移動します
   - フォームの設定コンテナを選択します
   - 「作成」をクリックします

2. 標準設定を指定

   - タイトル：わかりやすい名前（「標準 reCAPTCHA」など）
   - 名前：システム名（自動生成またはカスタム）
   - バージョン : ReCAPTCHA v2 を選択します
   - サイトキー：Google reCAPTCHA サイトキーを入力します
   - 秘密鍵：Google reCAPTCHA 秘密鍵を入力します

3. 保存して公開

   - 「作成」をクリックして、設定を保存します
   - 「公開」をクリックして使用可能にします

**検証チェックポイント：**

- 設定は作成されましたが、エラーはありません

- 両方のキーが正しく入力されました

- 設定が正常に公開されました

- 設定がリストに表示されます

+++

## reCAPTCHA のフォームへの追加

reCAPTCHA サービスを設定した後、次のようにフォームに保護を追加します。

![reCAPTCHA コンポーネントのフォームへの追加 ](/help/edge/docs/forms/universal-editor/assets/add-recaptcha-component.png)
*図：非表示の Captcha コンポーネントのフォームへの追加*

+++1. フォームをユニバーサルエディターで開く
AEM Sitesのフォームに移動し、「編集」をクリックしてユニバーサルエディターで開きます。 エディターが読み込まれるのを待ちます。

- AEM Sitesのフォームに移動します
- 「編集」をクリックしてユニバーサルエディターで開く
- エディターが読み込まれるまで待ちます
+++

+++2. フォーム構造を見つけます。
コンテンツツリー（左パネル）で、「アダプティブフォーム」セクションを見つけ、フォーム構造を展開して挿入ポイントを表示します。

- コンテンツツリー（左パネル）で、アダプティブフォーム セクションを探します
- フォーム構造を展開して挿入ポイントを表示する
+++

+++3。 reCAPTCHA コンポーネントの追加
Captcha （非表示）コンポーネントをフォームに追加します。

- フォームセクションで追加（+）アイコンをクリックします
- コンポーネントリストから、「Captcha （非表示）」を選択します
- または、コンポーネント パネルからコンポーネントをドラッグ&amp;ドロップします
+++

+++4. コンポーネントの設定（オプション）
新しく追加された captcha コンポーネントを選択し、reCAPTCHA 設定を使用していることを確認します。

- 新しく追加された captcha コンポーネントを選択します
- プロパティパネルで、reCAPTCHA 設定を使用していることを確認します
- 基本的なセットアップで追加の設定は必要ありません
+++

+++5. 変更を公開する
変更を公開し、エラーがないことを確認します。

- ユニバーサルエディターで「公開」をクリックします
- 確認を待機
- エラーが表示されないことを確認
+++

### 実装の検証

保護されたフォームが次の場所で利用できるようになりました。

```
https://<branch>--<repo>--<owner>.aem.live/content/forms/af/
<form-name>
```

**URL の例：**

```
https://main--my-forms--company.aem.live/content/forms/af/
contact-form
```
