---
title: アダプティブフォームフィールドの事前入力方法
description: 既存データを使用して、アダプティブフォームのフィールドを事前入力します。 ユーザーは、ソーシャルプロファイルを使用してログインすることにより、フォームの基本情報を事前入力できます。
feature: Adaptive Forms, Edge Delivery Services
role: User, Developer
level: Beginner, Intermediate
time: 45-60 minutes
keywords: アダプティブフォームの事前入力、アダプティブフォームエッジ配信サービス、アダプティブフォームの自動入力
source-git-commit: f843a7c91c3d47610580a3787a96e7e3bd49ba09
workflow-type: tm+mt
source-wordcount: '1829'
ht-degree: 4%

---

# Edge Delivery Servicesを使用したアダプティブFormsでの事前入力サービスの設定

フォームの事前入力は、ユーザーがフォームを開くとすぐに、外部ソースからの関連データでフォームフィールドに自動的に入力するプロセスです。 ユーザープロファイル、データベース、保存されたドラフト、その他のバックエンドシステムからの情報を活用することで、事前入力によってフォーム入力エクスペリエンスが合理化され、手動入力の削減、エラーの最小化、完了の加速が実現します。 これにより、ユーザーの満足度が高まるだけでなく、フォーム送信が成功する可能性も高まります。

## フォームの事前入力の利点

| 便益 | 説明 |
|---------|-------------|
| **処理の迅速化** | 手動でのデータ入力を減らし、ユーザーがフォームを素早く完成できるようにします。 |
| **ユーザーエクスペリエンスの向上** | Formsは、特にリピーターに対して、よりパーソナライズされ、便利だと感じます |
| **コンバージョン率の上昇** | 必要なユーザー作業を最小限に抑え、フォームの放棄を減らします。 |
| **入力エラーの削減** | 信頼できるソースからのデータは、入力ミスや誤ったエントリを減らします |
| **データ品質の向上** | バックエンド・システムの構造化された正確で一貫性のあるデータを確保 |

## 事前入力の仕組み

次の図は、ユーザーがアダプティブフォームを開いたときに発生する自動事前入力プロセスを示しています。

![ フォームの事前入力プロセスフロー ](/help/edge/docs/forms/universal-editor/assets/prefill-process-flow.svg)

事前入力プロセスには、次の 4 つの主なステップが含まれます。

1. **ユーザーがフォームを開く**：ユーザーが URL またはナビゲーションを使用してアダプティブフォームにアクセスします
1. **データSourceの特定**：事前入力サービスは、設定済みのデータソース（フォームデータモデルまたはドラフトサービス）を特定します。
1. **データの取得**：システムは、コンテキスト、パラメーター、ユーザー ID に基づいて関連するユーザーデータを取得します
1. **マッピングと表示**：データは、`bindRef` プロパティを使用してフォームフィールドにマッピングされ、入力されたフォームがユーザーに表示されます

この自動プロセスにより、関連情報が事前に入力されたフォームが表示されるので、ユーザーエクスペリエンスとフォームの完了率が大幅に向上します。

## 事前入力用データ構造

アダプティブFormsは、次の 2 種類のフィールドをサポートしています。

- **連結されたフィールド**：空でない `bindRef` プロパティを持つデータソースに接続されたフィールド
- **連結されていないフィールド**：空の `bindRef` 値を持つスタンドアロンフィールド

事前入力データ構造には以下が含まれます。

- **afBoundData**：連結されたフィールドとパネルのデータが含まれます
- **afUnBoundData**：連結されていないフィールドのデータが含まれます

データ形式は、フォームモデルと一致する必要があります。

- **XFA フォーム**: XFA テンプレートスキーマに準拠した XML
- **XML スキーマフォーム**: スキーマ構造に一致する XML
- **JSON スキーマフォーム**：スキーマに準拠した JSON
- **フォームデータモデル（FDM）フォーム**:FDM 構造に一致する JSON
- **スキーマレスフォーム**：すべてのフィールドがバインド解除され、バインドされていない XML を使用します

## 前提条件

事前入力サービスを設定する前に、次のことを確認します。

### 必要な設定

- [Edge Delivery Services用に設定された GitHub リポジトリ](/help/edge/docs/forms/universal-editor/getting-started-universal-editor.md#create-a-new-aem-project-pre-configured-with-adaptive-forms-block)
- [アダプティブFormsブロックがプロジェクトに追加されました](/help/edge/docs/forms/universal-editor/getting-started-universal-editor.md#add-adaptive-forms-block-to-your-existing-aem-project)
- [データソースが設定されました](/help/forms/configure-data-sources.md)
- [フォームデータモデル（FDM）を作成しました](/help/forms/create-form-data-models.md)

### アクセス要件

- AEM Forms as a Cloud Serviceへのアクセス
- フォームを作成および編集する権限
- 必要な拡張機能を有効にしたユニバーサルエディターへのアクセス

>[!TIP]
>
> また、フォームを編集して、ユニバーサルエディターでフォームデータモデル（FDM）を統合し、様々なバックエンドソースからデータを取得することもできます。 詳しくは、[ ユニバーサルエディターでのフォームとフォームデータモデルの統合 ](/help/edge/docs/forms/universal-editor/integrate-forms-with-data-source.md) の記事を参照してください。

## 事前入力サービスオプション

ユニバーサルエディターには、2 つの事前入力サービスオプションが用意されています。

| サービスタイプ | 目的 | データソース | 次に最適 |
|--------------|---------|-------------|----------|
| **フォームポータルドラフトの事前入力** | 一部完了したフォームを再開します | Forms ポータルに保存されたドラフト | 不完全な申請の継続 |
| **フォームデータモデルの事前入力** | 外部システムからフィールドに入力します | FDM を使用したバックエンドデータベース | ユーザープロファイルデータの自動入力 |

### 詳細な比較

| 機能 | ドラフト事前入力サービス | FDM 事前入力サービス |
|---------|----------------------|---------------------|
| **認証** | ドラフトアクセスにはユーザーログインが必要です | データソースに基づいて設定可能 |
| **セットアップの複雑さ** | 最小限の設定 | FDM の設定およびマッピングが必要 |
| **データタイプ** | 静的保存済みデータ | リアルタイムの動的データ |
| **ユースケース** | 保存済みアプリケーションの再開 | ユーザープロファイルまたはデータベースからの事前入力 |


## フォームの事前入力サービスの設定

+++フェーズ 1：フォームデータモデルの設定

### 手順 1：フォームデータモデルを作成する

1. AEM Forms as a Cloud Service インスタンスにログインします
1. **Adobe Experience Manager** / **Forms** / **データ統合** に移動します
1. **作成**/**フォームデータモデル** を選択します。
1. **Data Source設定** を選択し、設定済みの **Data Source** を選択します。

   ![ 作成されたフォームデータモデル ](/help/edge/docs/forms/universal-editor/assets/create-fdm.png)

   >[!TIP]
   >
   >フォームデータモデルの作成手順について詳しくは、「[ フォームデータモデルの作成 ](/help/forms/create-form-data-models.md)」を参照してください。

### 手順 2:FDM サービスの構成

1. **Adobe Experience Manager** / **Forms** / **データ統合** に移動します
1. フォームデータモデルを編集モードで開きます。
1. データモデルオブジェクトを選択して、「**プロパティを編集**」をクリックします
1. 選択したデータモデルオブジェクトに対して **読み取り** および **書き込み** サービスを設定

   ![ 読み取り/書き込みサービスの設定 ](/help/edge/docs/forms/universal-editor/assets/configure-reda-write-service.png)

1. サービス引数の設定：

   - 読み取りサービス引数の「編集」アイコンをクリックします。
   - 引数を **ユーザープロファイル属性**、**リクエスト属性** または **リテラル値** にバインドします
   - 連結値を指定（例：ペット登録フォームの場合は `petid`）

   ![ ペット ID 引数を設定 ](/help/edge/docs/forms/universal-editor/assets/pet-id-arguments.png)

1. **完了** をクリックして引数を保存し、**保存** をクリックして FDM を保存します

   >[!NOTE]
   >
   > FDM サービスの設定について詳しくは、[ フォームデータモデル（FDM）の操作 ](/help/forms/work-with-form-data-model.md) を参照してください。

+++

+++フェーズ 2：アダプティブフォームの作成と設定

### 手順 3：アダプティブフォームを作成する

1. **Adobe Experience Manager** / **Forms** / **Formsとドキュメント** に移動します
1. **作成**/**アダプティブForms** を選択します。
1. 「**Source**」タブで、Edge Delivery Servicesテンプレートを選択します。

   ![Edge Delivery Services テンプレート](/help/edge/assets/create-eds-forms.png)

1. **作成** をクリックして **フォームを作成** ウィザードを開きます
1. フォームの詳細を指定します。

   - **名前**：フォームのわかりやすい名前を入力します
   - **タイトル**：わかりやすいタイトルを指定します
   - **GitHub URL**：リポジトリ URL を入力します（例：`https://github.com/wkndforms/edsforms`）

1. 「**作成**」をクリックします

   ![スキーマベースのフォームを作成](/help/edge/docs/forms/universal-editor/assets/create-schema-based-form1.png)

オーサリング用にユニバーサルエディターでフォームを開きます。

### 手順 4：フォームデータのSourceを設定する

1. フォームを選択し、「**プロパティ**」をクリックします

   ![ フォームプロパティの選択 ](/help/edge/docs/forms/universal-editor/assets/select-form-properties1.png)

2. 「**フォームモデル**」タブを開きます。
3. **選択元** ドロップダウンから「**フォームデータモデル（FDM）**」を選択します。
4. ドロップダウンから、作成したフォームデータモデル（PetFDM など）を選択します

   ![「フォームモデル」タブを選択](/help/edge/docs/forms/universal-editor/assets/select-form-model1.png)

5. 「**保存して閉じる**」をクリックします。
6. フォームをユニバーサルエディターで編集用に開きます

FDM のフォーム要素は、**コンテンツブラウザー** の **データソース** タブに表示されます。

### 手順 5：フォームフィールドへのデータバインディングの追加

1. **データソース** タブからのデータ要素の選択
2. 要素をクリック **追加** またはドラッグ&amp;ドロップしてフォームを作成

   ![ スキーマベースのフォームを示すユニバーサルエディターのスクリーンショット ](/help/edge/docs/forms/universal-editor/assets/ue-form.png)

3. フォームフィールドにデータ連結を追加します。

   - フォームフィールドを選択
   - 「**プロパティ**」パネルで、「**バインド参照**」プロパティを見つけます
   - 適切なデータ連結の参照を選択

     ![データバインディング](/help/edge/docs/forms/universal-editor/assets/schema-based-form-data-binding1.png)

+++

+++フェーズ 3：事前入力サービスの設定

### 手順 6：必要な拡張機能を有効にする

ユニバーサルエディターでこれらの拡張機能が有効になっていることを確認します。

1. **AEM フォームプロパティ拡張機能**

   - ユニバーサルエディターで **Extension Manager** を開く
   - **AEM フォームのプロパティ** 拡張機能を有効にします

   ![ フォームプロパティアイコン ](/help/edge/docs/forms/universal-editor/assets/form-edit-properties.png)

1. **Data Source拡張機能**

   - **データソース** アイコンが表示されない場合は、**データソース** 拡張機能を有効にします

   ![ ユニバーサルエディターExtension Managerのスクリーンショット ](/help/edge/docs/forms/universal-editor/assets/extension-manager.png)

   >[!TIP]
   >
   > 拡張機能の管理手順について詳しくは、[Extension Manager機能のハイライト ](https://developer.adobe.com/uix/docs/extension-manager/feature-highlights/#enablingdisabling-extensions) を参照してください。

### 手順 7：事前入力サービスの設定

1. アダプティブフォームをユニバーサルエディターで開きます
2. **AEM フォームのプロパティ** 拡張機能アイコンをクリックします

   ![ フォームプロパティアイコンの選択 ](/help/edge/docs/forms/universal-editor/assets/select-fdm-properties-icon.png)

3. 「**事前入力** タブをクリックします
4. **フォームデータモデル事前入力サービス** を選択します。

   ![ 事前入力サービスを選択 ](/help/edge/docs/forms/universal-editor/assets/select-fdm-prefill.png)

5. 「**保存して閉じる**」をクリックします。

+++

+++フェーズ 4：事前入力設定のテスト

### 手順 8：プレビューとテスト

1. **Forms** / **Formsとドキュメント** に移動します
2. アダプティブフォームを選択します
3. **HTMLとしてプレビュー** を選択します。
4. URL にパラメーターを追加して事前入力をテストします。

   https://your-preview-url.com?&lt;bindreferencefield>=&lt;value>

   **例：**

   https://your-preview-url.com?petid=12345

   ![ 事前入力フォーム ](/help/edge/docs/forms/universal-editor/assets/prefill-form.png)

フォームは、指定されたパラメーターに基づいてデータを自動的に入力する必要があります。

+++

## 例

### 事前入力データ構造のサンプル

**FDM ベースのフォームの JSON の例：**

    &quot;&#39;
    
    &lbrace;
    &quot;afBoundData&quot;: &lbrace;
    &quot;user&quot;: &lbrace;
    &quot;firstName&quot;: &quot;John&quot;,
    &quot;lastName&quot;: &quot;Doe&quot;,
    &quot;email&quot;: &quot;john.doe@example.com&quot;,
    &quot;phone&quot;: &quot;+1-555-0123&quot;
    &rbrace;
    &rbrace;,
    &quot;afUnBoundData&quot;: &lbrace;
    &quot;additionalInfo&quot;: &quot;User preferences loaded&quot;
    &rbrace;
    &rbrace;
    
    &rbrace;&quot;&#39;

**XFA ベースのフォームの XML の例：**

    ```
    
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>
    &lt;afData>
    &lt;afBoundData>
    &lt;user>
    &lt;firstName>John&lt;/firstName>
    &lt;lastName>Doe&lt;/lastName>
    &lt;email>john.doe@example.com&lt;/email>
    &lt;/user>
    &lt;/afBoundData>
    &lt;/afData>
    
    ```

### 事前入力 URL の例

以下の URL は説明用であり、そのまま機能しません。 事前入力機能をテストする際に、ホストとパラメーターを独自の環境に関連するホストとパラメーターに置き換えます。

**基本的な事前入力テスト：**

`https://preview.example.com/form.html?userId=12345`

**複数パラメーターのテスト：**

`https://preview.example.com/form.html?userId=12345&category=premium`


## トラブルシューティング

+++よくある問題と解決策

| 問題 | 考えられる原因 | 解決策 |
|-------|----------------|----------|
| **フォームフィールドが事前入力されない** | `bindRef` 値が正しくありません | FDM フィ `bindRef` ルド名と完全に一致することを確認 |
| **データフォーマットエラー** | データ構造が一致しません | 事前入力データがフォームモデルスキーマと一致することを確認します。 |
| **サービスが見つかりません** | FDM 設定の問題 | FDM サービスが正しく構成および保存されていることを確認します。 |
| **認証エラー** | データソース接続 | データソースの資格情報と接続の検証 |
| **部分的なデータの読み込み** | フィールドマッピングがありません | すべての必須フィールドに適切なデータバインディングがあることを確認します |

+++

+++デバッグ手順

1. **FDM 設定の確認：**

   - サービスが正しく設定されているかどうかを確認します
   - FDM サービスの個別テスト
   - データソース接続の検証

2. **フォーム設定を確認：**

   - フォームが正しい FDM に関連付けられていることを確認します
   - フィールド `bindRef` 値の検証
   - 事前入力なしのテスト フォームを最初に実行

3. **データフローのテスト：**

   - ブラウザー開発者ツールを使用したネットワークリクエストの調査
   - コンソールでJavaScript エラーを確認します
   - 応答データ形式の検証

4. **一般的なエラーメッセージ：**

   - 「事前入力サービスが見つかりません」: サービス設定を確認します
   - 「データバインディングに失敗しました」:`bindRef` の精度を確認します
   - 「無効なデータ形式」：データがスキーマと一致することを確認します

+++

## ベストプラクティス

+++設定のベストプラクティス

- **説明的な命名を使用**:FDM とサービスに明確な名前を付けます
- **データスキーマの検証**：データ構造がフォームの要件に一致していることを確認します
- **増分テスト**：一度に 1 つのフィールドを設定してテストする
- **ドキュメントマッピング**：フィールドとデータのマッピングを追跡します

+++

+++パフォーマンスの最適化

- **データ量の最小化**：必要なフィールドのみ事前入力します
- **キャッシュの使用**：頻繁にアクセスするデータに適切なキャッシュを設定する
- **クエリの最適化**：データベースクエリの効率を確保する
- **パフォーマンスの監視**：事前入力を有効にしたフォームの読み込み時間を追跡します

+++

+++セキュリティに関する考慮事項

- **入力パラメーターを検証**:URL パラメーターを常に検証します
- **データの不要部分を削除**：フォームに事前入力する前にデータをクリーンアップする
- **アクセス制御の実装**：ユーザーが自身のデータにのみアクセスできるようにする
- **HTTPS を使用**：データ送信には常にセキュリティで保護された接続を使用します

+++

+++ユーザーエクスペリエンスのガイドライン

- **フィードバックを提供**：データ取得中に読み込み指標を表示します
- **エラーを適切に処理**：有用なエラーメッセージを表示します
- **上書きを許可**：ユーザーが事前入力データを変更できるようにします
- **一貫性の維持**：フォーム間で一貫した事前入力動作を使用する

+++

## よくある質問

+++事前入力が正しく機能しているかどうかをテストするにはどうすればよいですか？

フォームをプレビューし、次の形式を使用して事前入力パラメーターを URL に追加します：`?<bindreferencefield>=<value>`。 フィールドに、データ構造に一致する有効な `bindRef` があることを確認します。 ブラウザー開発者ツールを使用して、ネットワークリクエストを調べ、データが正しく取得されていることを確認します。

+++

+++アダプティブFormsの事前入力には、どのようなデータ形式がサポートされていますか？

アダプティブFormsは、フォームモデルに応じて複数の形式をサポートしています。

- **XFA フォーム**: XFA スキーマに一致する XML
- **JSON スキーマフォーム**：スキーマに準拠した JSON データ
- **FDM フォーム**：データモデル構造にマッピングされる JSON
- **XML スキーマフォーム**: スキーマ構造に一致する XML

+++

+++連結されたフィールドと連結されていないフィールドの両方を事前入力できますか？

はい、両方のタイプのフィールドを事前入力できます。 連結されたフィールドは「`afBoundData`」セクションを使用し、フォームモデルスキーマと一致する必要があります。 連結されていないフィールドには「`afUnBoundData`」セクションが使用され、任意の追加データを含めることができます。

+++

+++一部のフィールドのみ事前入力されている場合はどうすればよいですか？

すべてのフィールドに、FDM と完全に一致する正しい `bindRef` 値があることを確認します。 データソースにすべての必須フィールドが含まれ、データ構造がフォームモデルスキーマと一致することを確認します。

+++

+++事前入力サービスの認証はどのように扱われますか？

認証は、データソース設定によって異なります。 FDM ベースの事前入力の場合は、データソース設定で認証を設定します。 ドラフトの事前入力の場合、ユーザーは通常、ログインして保存済みのドラフトにアクセスする必要があります。

+++

+++複数の事前入力サービスを 1 つのフォームで使用できますか？

フォームごとに 1 つのプライマリ事前入力サービスを設定できます。 ただし、1 つのフォームデータモデル内で異なるデータソースを組み合わせて、同様の機能を実現することができます。

+++

## 関連トピック

- [ユニバーサルエディターでのフォームとフォームデータモデルの統合](/help/edge/docs/forms/universal-editor/integrate-forms-with-data-source.md)
- [フォームデータモデルの作成](/help/forms/create-form-data-models.md)
- [フォームデータモデル（FDM）の操作](/help/forms/work-with-form-data-model.md)
- [データソースの設定](/help/forms/configure-data-sources.md)
- [Edge Delivery Services for AEM Formsの概要](/help/edge/docs/forms/universal-editor/getting-started-universal-editor.md)
