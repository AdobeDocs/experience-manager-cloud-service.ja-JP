---
title: WYSIWYG ベースのオーサリング用のフォームフラグメントを作成する方法
description: ユニバーサルエディターでフォームフラグメントを作成し、フォームに追加する方法を説明します。
feature: Edge Delivery Services
role: Admin, User, Developer
exl-id: 7b0d4c7f-f82f-407b-8e25-b725108f8455
source-git-commit: fd3c53cf5a6d1c097a5ea114a831ff626ae7ad7e
workflow-type: tm+mt
source-wordcount: '1693'
ht-degree: 97%

---

# ユニバーサルエディターでのフォームフラグメントの作成

フォームフラグメントは、反復的な開発作業を排除し、組織のフォーム全体で一貫性を確保する、再利用可能なコンポーネントです。連絡先情報、住所の詳細、同意契約などの一般的なセクションをフォームごとに再作成する代わりに、これらの要素をフラグメントとして一度作成し、複数のフォームで再利用できます。

**この記事で達成されること：**

- フォームフラグメントのビジネス価値と技術的機能を理解
- ユニバーサルエディターを使用して再利用可能なフォームフラグメントを作成
- 適切な設定でフラグメントを既存のフォームに統合
- フラグメントのライフサイクルを管理し、フォーム間の一貫性を維持

**ビジネス上のメリット：**

- **開発時間の短縮**：共通のフォームセクションを一度作成すれば、どこでも再利用できます
- **一貫性の向上**：すべてのフォーム間でレイアウトとコンテンツを標準化します
- **メンテナンスの簡素化**：フラグメントを一度更新するだけで、これを使用するすべてのフォームに変更が反映されます
- **コンプライアンスの強化**：規制セクションの一貫性と最新性を確保します

Edge Delivery Services のフォームフラグメントは、ネストされたフラグメント、単一フォーム内の複数のインスタンス、データソースとのシームレスな統合などの高度な機能をサポートします。

## フォームフラグメントについて

Edge Delivery Services のフォームフラグメントは、モジュール形式のフォームを開発するための強力な機能を提供します。

**コア機能：**

- **一貫性のある管理**：フラグメントは、複数のフォーム間で同一のレイアウトとコンテンツを維持します。「1 回の変更でどこにでも反映」アプローチを使用すると、フラグメントに対する更新はプレビューモードのすべてのフォームに自動的に適用されます。
- **複数の使用法**：同じフラグメントを 1 つのフォーム内に複数回追加し、それぞれ異なるデータソースまたはスキーマ要素への独立したデータ連結を設定します。
- **ネストされた構造**：高度なフォームアーキテクチャ用にフラグメントを他のフラグメント内に埋め込むことで複雑な階層を作成します。

**技術要件：**

- **GitHub URL の一貫性**：フラグメントと、これを使用するフォームの両方で同じ GitHub リポジトリ URL を指定する必要があります
- **スタンドアロン編集**：フラグメントはスタンドアロン形式でのみ変更できます。ホスト形式内では変更できません

**公開動作：**

>[!IMPORTANT]
>
>プレビューモードでは、フラグメントの変更はすべてのフォームにすぐに反映されます。公開モードでは、更新を確認するには、フラグメントと、これを使用するフォームの両方を再公開する必要があります。

>[!CAUTION]
>
>レンダリングエラーや予期しない動作が発生するので、再帰的なフラグメント参照（フラグメントをこれ自体の中にネストすること）は回避します。

## 前提条件

**技術的な設定要件：**

- AEM 環境と GitHub リポジトリ間の接続が確立された状態で[設定された GitHub リポジトリ](/help/edge/docs/forms/universal-editor/getting-started-universal-editor.md#get-started-with-the-aem-forms-boilerplate-repository-template)
- GitHub リポジトリ（既存の Edge Delivery Services プロジェクト用）に追加された[最新のアダプティブフォームブロック](/help/edge/docs/forms/universal-editor/getting-started-universal-editor.md#add-adaptive-forms-block-to-your-existing-aem-project)
- Edge Delivery Services テンプレートが使用可能な AEM Forms オーサーインスタンス
- AEM Forms as a Cloud Service オーサーインスタンス URL と GitHub リポジトリ URL へのアクセス

**必要な知識と権限：**

- フォームデザインの概念とコンポーネント階層の基本的な理解
- ユニバーサルエディターインターフェイスとフォーム作成ワークフローに精通
- AEM Forms でフォームアセットを作成および管理するための作成者レベルの権限
- 組織のフォーム標準と再利用可能なコンポーネントの要件を理解

## Edge Delivery Services フォームフラグメントの操作

ユニバーサルエディターで Edge Delivery Services フォームフラグメントを作成し、作成したフラグメントを Edge Delivery Services フォームに追加できます。Edge Delivery Services フォームフラグメントで実行できるアクションは次のとおりです。

- [ユニバーサルエディターでのフォームフラグメントの作成](#creating-form-fragments-in-universal-editor)
   - [フォームフラグメントについて](#understanding-form-fragments)
   - [前提条件](#prerequisites)
   - [Edge Delivery Services フォームフラグメントの操作](#working-with-edge-delivery-services-form-fragments)
   - [ベストプラクティス](#best-practices)
   - [概要](#summary)

+++ フォームフラグメントの作成

ユニバーサルエディターでフォームフラグメントを作成するには、次の手順を実行します。

1. AEM Forms as a Cloud Service オーサーインスタンスにログインします。
1. **[!UICONTROL Adobe Experience Manager]**／**[!UICONTROL Forms]**／**[!UICONTROL フォームとドキュメント]**&#x200B;を選択します。
1. **作成／アダプティブフォームセグメント**&#x200B;をクリックします。

   ![フラグメントの作成](/help/edge/docs/forms/universal-editor/assets/create-fragment.png)

   **アダプティブフォームフラグメントを作成**&#x200B;ウィザードが表示されます。
1. 「**テンプレートを選択**」タブから、Edge Delivery Services ベースのテンプレートを選択し、「**[!UICONTROL 次へ]**」をクリックします。
   ![Edge Delivery Services テンプレートを選択](/help/edge/docs/forms/universal-editor/assets/create-form-fragment.png)

1. フラグメントのタイトル、名前、説明およびタグを指定します。フラグメントには一意の名前を指定してください。同じ名前を持つ別のフラグメントが存在する場合、フラグメントの作成は失敗します。
1. **GitHub URL** を指定します。例えば、GitHub リポジトリの名前が `edsforms` で、アカウント `wkndforms` の下にある場合、URL は `https://github.com/wkndforms/edsforms` になります。

   ![基本プロパティ](/help/edge/docs/forms/universal-editor/assets/fragment-basic-properties.png)

1. （オプション）「**フォームモデル**」タブをクリックして開き、**次から選択**&#x200B;ドロップダウンメニューから、フラグメントに対して次のいずれかのモデルを選択します。

   ![「フォームモデル」タブにモデルタイプを表示](/help/edge/docs/forms/universal-editor/assets/select-fdm-for-fragment.png)

   - **フォームデータモデル（FDM）**：データソースから取得したデータモデルオブジェクトとサービスをフラグメントに統合します。フォームで複数のソースからのデータの読み取りと書き込みが必要な場合は、フォームデータモデル（FDM）を選択します。

   - **JSON スキーマ**：データ構造を定義する JSON スキーマを関連付けることで、フォームをバックエンドシステムと統合します。これにより、スキーマ要素を使用して動的コンテンツを追加できます。
   - **なし**：フォームモデルを使用しないで最初からフラグメントを作成するときに指定します。

   >[!NOTE]
   >
   > ユニバーサルエディターでフォームまたはフラグメントをフォームデータモデル（FDM）と統合して、様々なバックエンドデータソースを使用する方法について詳しくは、[ユニバーサルエディターでのフォームとフォームデータモデルの統合](/help/edge/docs/forms/universal-editor/integrate-forms-with-data-source.md)を参照してください。

1. （オプション）「**詳細**」タブでフラグメントの&#x200B;**公開日**&#x200B;または&#x200B;**非公開日**&#x200B;を指定します。

   ![「詳細」タブ](/help/edge/docs/forms/universal-editor/assets/advanced-properties-fragment.png)
1. 「**作成**」をクリックしてフラグメントを生成します。編集オプションを含む成功ダイアログが表示されます。

   ![フラグメントを編集](/help/edge/docs/forms/universal-editor/assets/edit-fragment.png)

1. 「**編集**」をクリックして、デフォルトのテンプレートが適用されたフラグメントをユニバーサルエディターで開きます。

   ![オーサリング用ユニバーサルエディターのフラグメント](/help/edge/docs/forms/universal-editor/assets/fragment-in-ue.png)

1. **フラグメントコンテンツを設計**：フォームコンポーネント（テキストフィールド、ドロップダウン、チェックボックス）を追加して、再利用可能なセクションを作成します。コンポーネントガイダンスについて詳しくは、[ ユニバーサルエディターを使用して AEM Forms の Edge Delivery Services の基本を学ぶ](/help/edge/docs/forms/universal-editor/getting-started-universal-editor.md#author-forms-using-wysiwyg)を参照してください。

1. **コンポーネントプロパティを設定**：ユースケースに応じて、フィールド名、検証ルール、デフォルト値を設定します。

1. **保存してプレビュー**：フラグメントを保存し、プレビューモードを使用してレイアウトと機能を検証します。

   ![複数のフォームをまたいで再利用できる名前、電話番号、メール、住所のフィールドを示す、ユニバーサルエディターで入力済みの連絡先詳細フォームフラグメントのスクリーンショット](/help/edge/docs/forms/universal-editor/assets/contact-fragment.png)

**検証チェックポイント：**

- ユニバーサルエディターでフラグメントがエラーなしで読み込まれる
- すべてのフォームコンポーネントが正しくレンダリングされる
- フィールドプロパティと検証ルールが期待どおりに機能する
- フラグメントが保存され、Forms とドキュメントコンソールで使用できる

フラグメントが完成したら、[任意の Edge Delivery Services フォームに統合](#adding-form-fragments-to-a-form)できます。

+++


+++ フォームへのフォームフラグメントの追加

この例では、従業員情報セクションとスーパーバイザー情報セクションの両方に `Contact Details` フラグメントを使用する `Employee Details` フォームを作成する方法を示します。このアプローチにより、開発の労力を削減しながら一貫性のあるデータ収集が確保されます。

フォームフラグメントをフォームに統合するには：

1. フォームを編集モードで開きます。
1. フォームフラグメントコンポーネントをフォームに追加します。
1. コンテンツブラウザーを開き、**コンテンツツリー**&#x200B;の&#x200B;**[!UICONTROL アダプティブフォーム]**&#x200B;コンポーネントに移動します。
1. フラグメントを追加するセクションに移動します。例えば、**従業員詳細**&#x200B;パネルに移動します。

   ![セクションに移動](/help/edge/docs/forms/universal-editor/assets/navigate-to-section.png)

1. 「**[!UICONTROL 追加]**」アイコンをクリックし、**アダプティブフォームコンポーネント**&#x200B;リストから&#x200B;**[!UICONTROL フォームフラグメント]**&#x200B;を追加します。
   ![フォームフラグメントを追加](/help/edge/docs/forms/universal-editor/assets/add-fragment.png)

   **[!UICONTROL フォームフラグメント]**&#x200B;コンポーネントを選択すると、フラグメントがフォームに追加されます。追加したフラグメントのプロパティは、この&#x200B;**プロパティ**&#x200B;を開いて設定できます。例えば、フラグメントのタイトルをこの&#x200B;**プロパティ**&#x200B;から非表示にします。

   ![フラグメントのプロパティの設定](/help/edge/docs/forms/universal-editor/assets/fragment-properties.png)

1. 「**基本**」タブで「**フラグメント参照**」を選択します。フォームのモデルに応じて、フォームで使用可能なすべてのフラグメントが表示されます。

   例えば、`/content/forms/af` に移動して、`Contact Details` フラグメントを選択します。

   ![フラグメントを選択](/help/edge/docs/forms/universal-editor/assets/select-fragment.png)

1. 「**[!UICONTROL 選択]**」をクリックします。

   フォームフラグメントは、フォームへの参照により追加され、スタンドアロンのフォームフラグメントと同期を維持します。

   ![ユニバーサルエディター内の従業員フォームに連絡先詳細フラグメントが正常に統合され、フラグメントの構造が再利用時にどのように維持されるかを示すスクリーンショット](/help/edge/docs/forms/universal-editor/assets/fragment-in-form.png)

   >[!NOTE]
   >
   > **フラグメントを編集** ボタンを使用すると、ユーザーはフォームフラグメントに直接移動して編集できます。

   **プレビュー**&#x200B;モードでフォームをプレビューして、フォームがどのように表示されるかを確認できます。

   ![プレビュー](/help/edge/docs/forms/universal-editor/assets/preview-form-with-fragment.png)

   同様に、手順 3～7 を繰り返して、`Supervisor Details` パネルの `Contact Details` フラグメントを挿入できます。

   ![従業員の詳細フォーム](/help/edge/docs/forms/universal-editor/assets/employee-detail-form-with-fragments.png)

+++



+++ フォームフラグメントの管理

AEM Forms ユーザーインターフェイスを使用して、フォームフラグメントに対して複数の操作を実行できます。

1. AEM Forms as a Cloud Service オーサーインスタンスにログインします。
1. **[!UICONTROL Adobe Experience Manager]**／**[!UICONTROL フォーム]**／**[!UICONTROL フォームとドキュメント]**&#x200B;を選択します。

1. フォームフラグメントを選択すると、選択したフラグメントに対して実行できる次の操作がツールバーに表示されます。

   ![フラグメントを管理](/help/edge/docs/forms/universal-editor/assets/manage-fragment.png)

   <table>
    <tbody>
    <tr>
   <td><p><strong>操作</strong></p> </td>
   <td><p><strong>説明</strong></p> </td>
    </tr>
    <tr>
   <td><p>編集</p> </td>
   <td><p>フォームフラグメントを編集モードで開きます。<br /> <br /> </p> </td>
    </tr>
    <tr>
   <td><p>プロパティ</p> </td>
   <td><p>フォームフラグメントのプロパティを変更するオプションを指定します。<br /> <br /> </p> </td>
    </tr>
    <td><p>コピー</p> </td>
   <td><p> フォームフラグメントを目的の場所にコピー＆ペーストするオプションを指定します。<br /> <br /> </p> </td>
    </tr>
   <tr>
   <td><p>プレビュー</p> </td>
   <td><p>フラグメントを HTML としてプレビューするか、XML ファイルのデータをフラグメントと結合してカスタムプレビューを実行するオプションを指定します。<br /> </p> </td>
    </tr>
    <tr>
   <td><p>ダウンロード</p> </td>
   <td><p>選択されているフラグメントをダウンロードします。<br /> <br /> </p> </td>
    </tr>
    <tr>
   <td><p>レビューの開始／レビューの管理</p> </td>
   <td><p>選択されているフラグメントのレビューを開始したり管理したりできます。<br /> <br /> </p> </td>
    </tr>
    <!--<tr>
   <td><p>Add Dictionary</p> </td>
   <td><p>Generates a dictionary for localizing the selected fragment. For more information, see <a>Localizing Adaptive Forms</a>.<br /> <br /> </p> </td>
    </tr>-->
    <tr>
   <td><p>公開／非公開</p> </td>
   <td><p>選択されているフラグメントを公開／非公開します。<br /> <br /> </p> </td>
    </tr>
    <tr>
   <td><p>削除</p> </td>
   <td><p>選択されているフラグメントを削除します。<br /> <br /> </p> </td>
    </tr>
    <tr>
   <td><p>比較</p> </td>
   <td><p>プレビュー目的で 2 つの異なるフォームフラグメントを比較します。<br /> <br /> </p> </td>
    </tr>
    </tbody>
    </table>

+++ 

## ベストプラクティス

**フラグメントデザインと命名：**

- **わかりやすい一意の名前を使用**：フラグメントの目的を明確に示す名前を選択します（例：「fragment1」ではなく「contact-details-with-validation」）
- **再利用性を計画**：様々なフォームタイプで機能するように、フラグメントをコンテキストに依存しないように設計します
- **フラグメントに焦点を当てる**：複雑で多機能なコンポーネントではなく、単一目的のフラグメントを作成します

**開発ワークフロー：**

- **フラグメントを個別にテスト**：フォームに統合する前にフラグメント機能を検証します
- **一貫性のある GitHub URL を維持**：関連するすべてのフラグメントとフォームで同じリポジトリ URL が使用されていることを確認します
- **ドキュメントフラグメントの目的**：チームメンバーが各フラグメントを使用するタイミングを理解できるように、明確な説明とタグを含めます

**公開およびメンテナンス：**

- **公開を調整**：フラグメントを更新する際は、すべての依存フォームを同時に再公開することを計画します
- **バージョン管理**：フラグメントを更新する際に意味のあるコミット、時間の経過と共に変更を追跡します
- **依存関係を監視**：各フラグメントを使用するフォームを追跡して、更新の影響を評価します

>[!TIP]
>
>フラグメントのスタイル、スクリプト、式は埋め込み時に保持されるので、この継承を考慮して設計します。

## 概要

Edge Delivery Services のフォームフラグメントを活用して開発効率を向上させ、組織のフォーム全体の一貫性を維持する方法について説明しました。

**主な達成項目：**

- **理解**：フォームフラグメントのビジネス価値と技術的機能を把握しました
- **作成**：適切な設定のユニバーサルエディターを使用して再利用可能なフォームフラグメントを作成しました
- **統合**：正しい参照設定とプロパティ設定でフォームにフラグメントを追加しました
- **管理**：フラグメントのライフサイクル操作とメンテナンスワークフローを探索しました

**次の手順：**

- 組織で一般的に使用されるフラグメントのライブラリを作成します。
- フラグメントを使用するための命名規則とガバナンスポリシーを確立します。
- 動的なデータ駆動型フラグメントの[フォームデータモデル](/help/edge/docs/forms/universal-editor/integrate-forms-with-data-source.md)との高度な統合を探索
- フラグメントベースのフォームテンプレートを実装して、一貫性のあるユーザーエクスペリエンスを実現します。

フォームには、一貫性のあるユーザーエクスペリエンスを確保しながら、プロジェクト間で効率的に拡張するモジュール形式のメンテナンス可能なアーキテクチャのメリットを活用できるようになりました。


