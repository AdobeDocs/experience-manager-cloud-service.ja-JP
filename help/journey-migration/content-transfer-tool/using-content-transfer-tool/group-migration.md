---
title: グループの移行
description: AEM as a Cloud Service でのグループの移行についての概要です。
exl-id: 4a35fc46-f641-46a4-b3ff-080d090c593b
source-git-commit: 50c8dd725e20cbd372a7d7858fc67b0f53a8d6d4
workflow-type: tm+mt
source-wordcount: '1921'
ht-degree: 97%

---


# グループの移行 {#group-migration}

>[!CONTEXTUALHELP]
>id="aemcloud_ctt_groupmigration"
>title="グループの移行"
>abstract="コンテンツ転送ツールは、グループを既存の Adobe Experience Manager（AEM）システムから AEM as a Cloud Service にコピーする際に役に立ちます。"

>[!NOTE]
>以前のバージョンのユーザーマッピングツールについては、[レガシードキュメント](/help/journey-migration/content-transfer-tool/user-mapping-tool-legacy/considerations-user-mapping-tool-legacy.md)を参照してください。

## はじめに {#introduction}

>[!CONTEXTUALHELP]
>id="aemcloud_ctt_usermigration"
>title="ユーザーが移行されない"
>abstract="コンテンツ転送ツールでは、ユーザーは移行されなくなりました。ユーザーは Admin Console で管理する必要があります。"
>additional-url="https://experienceleague.adobe.com/ja/docs/experience-manager-cloud-service/content/onboarding/journey/admin-console" text="AEM Admin Console ドキュメント"
>additional-url="https://adminconsole.adobe.com/" text="AEM Admin Console"

Adobe Experience Manager（AEM）as a Cloud Service への移行プロセスの一環として、グループを既存の AEM システムから AEM as a Cloud Service に移行する必要があります。このタスクは、コンテンツ転送ツールによって実行されます。

AEM as a Cloud Service の重要な変更の 1 つは、Adobe ID を使用したオーサー層へのアクセスが完全に統合されていることです。このプロセスでは、ユーザーとユーザーグループを管理するために [Adobe Admin Console](https://helpx.adobe.com/jp/enterprise/using/admin-console.html) を使用する必要があります。ユーザープロファイル情報が Adobe Identity Management System（IMS）に一元化され、すべての Adobe クラウドアプリケーションでシングルサインオンを利用できます。詳しくは、[Identity Management](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/overview/what-is-new-and-different.html?lang=ja#identity-management) を参照してください。この変更により、IMS 経由で AEM に最初にログインしたときにユーザーが自動的に AEM に作成されます。そのため、CTT では、ユーザーはクラウドシステムに移行されません。IMS ユーザーは、IMS グループに配置する必要があります。IMS グループは、移行対象のグループや、移行中の AEM コンテンツにアクセスする権限が付与された AEM グループに配置される新しいグループにすることができます。この方法では、クラウドシステム上のユーザーは、ソース AEM システムと同じアクセス権を使用することになります。

## グループの移行の詳細 {#group-migration-detail}

コンテンツ転送ツールおよび Cloud Acceleration Manager では、移行されるコンテンツに関連付けられているすべてのグループがクラウドシステムに移行されます。コンテンツ転送ツールは、抽出プロセス中にソース AEM システムからすべてのグループをコピーすることで、これを行います。すると、CAM 取り込みは、特定のグループのみを選択して移行します。

* 移行されたコンテンツの ACL または CUG ポリシーにグループが含まれている場合、以下に示す例外を除いて、そのグループは移行されます。
* ターゲットのクラウドシステムに既にビルトインされているグループが多数ありますが、これらは移行されません。
   * 一部のビルトイングループには、ビルトイン&#x200B;_ではない_&#x200B;メンバーグループが含まれる場合があります。このようなメンバーグループ（直接のメンバーや、メンバーのメンバーなど）は、移行されたコンテンツの ACL または CUG ポリシーで参照されている場合に移行され、これらのグループのメンバーであるユーザーが（直接または間接的に）移行されたコンテンツへのアクセスを維持できるようになります。
* ACL または CUG ポリシーに見つからないグループ、宛先システムに既に存在するグループ、およびターゲットシステムに一意性制約のあるデータが既に存在するグループなどのその他のグループは移行されません。

あるグループについてログに記録／報告されるパスは、そのグループの移行をトリガーした最初のパスのみです。また、そのグループが他のコンテンツパス上に存在する場合もあります。

移行されるほとんどのグループは、IMS で管理されるように設定されています。つまり、IMS 内にある同じ名前のグループは AEM 内のグループにリンクされ、IMS グループ内のすべての IMS ユーザーは AEM ユーザーとなり、AEM 内のグループのメンバーになります。これにより、これらのユーザーはグループの ACL または CUG ポリシーに従って、コンテンツにアクセスできるようになります。

なお、移行されたグループは、AEM の「ローカルグループ」とは見なされなくなり、AEM では IMS 対応のグループですが、IMS にまだ存在していない場合もあります。AEMと IMS の間で同期できるように、IMS で別個に再作成する必要があります。グループは、IMS で Admin Console などの方法を使用して、個別または一括で作成できます。Admin Console でグループを個別または一括で作成する方法について詳しくは、[ユーザーグループの管理](https://helpx.adobe.com/jp/enterprise/using/user-groups.html)を参照してください。

この IMS 設定の例外は、Assets コレクションとプライベートフォルダーによって作成されたグループにあります。 AEMでコレクションまたはプライベートフォルダーを作成すると、そのコンテンツにアクセスするためのグループが作成されます。このようなグループはクラウドシステムに移行されますが、IMS で管理するように設定されません。  IMS ユーザーをこれらのグループに追加するには、アセット UI のグループプロパティページで、個別に、または別の IMS グループの一部としてまとめて追加する必要があります。


## グループの移行のオプトアウト {#group-migration-option}

CTT バージョン 3.0.20 以降には、グループの移行を無効にするオプションが含まれています。これは、OSGi コンソールで次のように設定されます。

* OSGi 設定 `(http://<server>/system/console/configMgr)` を開きます
* 「**コンテンツ転送ツール抽出サービス設定**」という設定をクリックします
* 「**移行にグループを含める**」をオフにして、グループの移行を無効にします
* 「**保存**」をクリックして、設定が保存され、サーバー上でアクティブになっていることを確認します

この設定を無効にすると、グループは移行されず、プリンシパル移行レポートやユーザーレポート（下記を参照）は作成されません。

## プリンシパル移行レポートとユーザーレポート {#principal-migration-report}

移行中にグループが含まれる場合（デフォルト）、移行中に各グループに何が起こるかを示すプリンシパル移行レポートが保存されます。取り込みが成功した後にこのレポートをダウンロードするには：
* CAM で、コンテンツ転送に移動し、「取り込みジョブ」を選択します。
* 該当する取り込み行の省略記号（...）をクリックし、「プリンシパルの概要を表示」を選択します。
* 表示されるダイアログで、「ファイルをダウンロード...」の下のドロップダウンリストから「プリンシパル移行レポート」を選択し、「ダウンロード」ボタンをクリックします。
* 結果の CSV ファイルを保存します。

グループごとに記録される情報の一部を次に示します。
* 移行された場合、グループの移行の原因となった最初の ACL または CUG へのパス。
* グループが以前に移行されたかどうか。現在の取り込みがワイプなし取り込みの場合、以前の取り込み時に一部のグループが移行されている可能性があります。
* グループがビルトイングループであるかどうか。これらのグループは常にターゲットの AEMaaCS 環境に存在するので、移行されません。
* グループが移行されたコンテンツの ACL または CUG の一部ではなかった場合、そのグループは移行されませんでした。
* そのグループがアセットコレクションによって作成されたグループなどのローカルグループの場合は、移行されている可能性があり、この場合、「ローカル」という単語がそのグループのレポートに追加されます。

移行中、ユーザーは移行されませんが、何らかの方法で取得されない限り、ソースシステム上のユーザーグループの関係は失われます。取り込みプロセスでは、この情報の一部がテキスト形式でユーザーレポートに取り込まれ、プリンシパル移行レポートの最後に表示されます。

### ユーザーレポート {#user-report}

「ユーザーレポート」セクションでは、ユーザー（1 行に 1 人ずつ）が、メールアドレスと、この取り込み中に移行された IMS 対応グループのリストと共に報告されます。移行されなかったグループ、以前の取り込み中に移行されたグループ、ローカルグループは、リストに含まれません。ユーザーが移行された IMS 対応グループに属しておらず、特別なケースであることを示す追加のメモがない場合（以下の&#x200B;**メモ**&#x200B;を参照）、このユーザーはレポートに表示&#x200B;_されません_。各ユーザーとともに報告されるグループは、ユーザーがソースシステムで直接または間接的にメンバーであるグループです。ソースシステムのグループは、ターゲットシステムではネストされないが、ソースシステムではネストされる場合があるので、このグループのリストは IMS で新しくフラット化されたグループ構造をサポートします。

ワイプとその後のワイプなしの取り込みの場合、ワイプなしの取り込みからのユーザーリスト内のグループは、ワイプなしフェーズ中に移行されたグループのみになります。

#### メモ {#user-report-notes}

ユーザーレポートには、各ユーザーのグループのほかに、情報提供の目的でユーザーに関するメモを入力できるフィールドがあります（メモの意味に関する詳細な説明もレポートにあります）。メモの例を次に示します。

* **メモ - A** ACL 内で直接参照されるユーザーの「メモ」セクションには&#x200B;*メモ - A* が表示されます。これは、推奨されるユースケースやベストプラクティスではないからです。
* **メモ - B** 組み込みのグループの直接メンバーであるユーザーの「メモ」セクションには&#x200B;*メモ - B* が表示されます。これもまた、推奨されるユースケースやベストプラクティスではありません。
* **メモ - C** 移行されたローカルグループ（アセットコレクションで作成されたグループなど）の直接メンバーまたは間接メンバーであるユーザーの「メモ」セクションには、*メモ C* が表示されます。これは、ローカルグループが IMS で管理されるように設定されていないからです。

これらのケースは同時に発生し、また以前のケースと同時に発生することもあります。_各メモが各ユーザーに対して参照するグループに関する追加情報について詳しくは、取り込みログを確認してください。取り込みログには、各ユーザーに関するこの情報が報告されます。_

ユーザーレポートは、プリンシパル移行レポートの最後（その一部）に追加され（以下の[最終的な概要とレポート](#final-summary-and-report)を参照）、お客様はグループおよびユーザーと、これらの関係をより完全に理解できます。

## 一括アップロードファイル {#bulk-upload-files}

グループは AEM as a Cloud Service にのみ移行されるので、クラウド内の AEM で適切に動作できるように、IMS にも追加する必要があります。また、ユーザーは移行されないので、IMS にも追加する必要があります。CTT／CAM 移行ツールではこの手順を実行しませんが、取り込みプロセスによって、グループ用とユーザー用の 2 つの一括アップロードファイルが作成されます。これらのファイルを編集し、Admin Console の一括アップロード機能と共に使用して、AEM グループとユーザーに基づいて IMS グループとユーザーを作成できます。

Admin Console を通じて一括アップロードファイルを使用してユーザーとグループを作成する方法について詳しくは、[IMS へのグループおよびユーザーの一括アップロード](/help/journey-migration/content-transfer-tool/using-content-transfer-tool/bulk-principal-uploading.md)を参照してください。

AEM as a Cloud Service ユーザーの管理について詳しくは、[ユーザーの管理](https://helpx.adobe.com/jp/enterprise/using/users.html)も参照してください。

## その他の考慮事項 {#additional-considerations}

* 「**取り込み前にクラウドインスタンス上の既存のコンテンツを消去**」が設定されている場合は、以前に Cloud Service インスタンスに転送されたグループと既存のリポジトリ全体が削除され、コンテンツの取り込み先となる新しいリポジトリが作成されます。このプロセスは、ターゲットの Cloud Service インスタンスの権限を含むすべての設定もリセットします。これは、**管理者**&#x200B;グループに追加されたすべてのユーザーに当てはまります。CTT/CAM 取り込みのアクセストークンを取得するには、管理者ユーザーを&#x200B;**管理者**&#x200B;グループに再度追加する必要があります。
* ワイプなしの取り込みを実行する場合（「**既存のコンテンツを消去**」が設定されていない場合）、前回の転送以降変更がないのでコンテンツが転送されない場合は、そのコンテンツに関連付けられたグループも転送されません。このルールは、グループがソースシステム上で変更された場合でも当てはまります。これは、グループの移行が、ユーザーやグループが関連付けられているコンテンツと共にのみ行われるからです。このため、この場合、ソースシステム上のグループのメンバーであるグループは、移行中の別のグループの一部であるか、移行中の別のコンテンツの ACL に含まれていない限り、移行されません。これらのグループを後で移行する場合は、パッケージの使用、ターゲットからのグループの削除と関連コンテンツの再移行、ワイプ取り込みを使用した再移行を行うことを検討してください。
* ワイプなし取り込み中に、ソース AEM インスタンスとターゲット AEM Cloud Service インスタンスの両方に、同じ一意性制約データ（rep:principalName、rep:authorizableId、jcr:uuid または rep:externalId）のグループが存在する場合、問題のグループは移行&#x200B;_されず_、クラウドシステム上の既存のグループは変更されません。これは、プリンシパル移行レポートに記録されます。
* クローズドユーザーグループ（CUG）ポリシーで使用されるグループに関するその他の考慮事項について詳しくは、[クローズドユーザーグループの移行](/help/journey-migration/content-transfer-tool/using-content-transfer-tool/closed-user-groups-migration.md)を参照してください。

## 最終概要とレポート

抽出と取り込みが正常に完了すると、グループ移行の詳細を示すレポートが生成されます。詳しくは、[グループの移行を検証する方法](/help/journey-migration/content-transfer-tool/using-content-transfer-tool/validating-content-transfers.md#how-to-validate-group-migration)を参照してください。
