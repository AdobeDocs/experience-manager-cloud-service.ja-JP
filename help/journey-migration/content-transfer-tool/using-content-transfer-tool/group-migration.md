---
title: グループの移行
description: AEM as a Cloud Service でのグループの移行についての概要です。
exl-id: 4a35fc46-f641-46a4-b3ff-080d090c593b
source-git-commit: 50c8dd725e20cbd372a7d7858fc67b0f53a8d6d4
workflow-type: tm+mt
source-wordcount: '1921'
ht-degree: 54%

---


# グループの移行 {#group-migration}

>[!CONTEXTUALHELP]
>id="aemcloud_ctt_groupmigration"
>title="グループの移行"
>abstract="コンテンツ転送ツールは、グループを既存の Adobe Experience Manager（AEM）システムから AEM as a Cloud Service にコピーする際に役に立ちます。"

>[!NOTE]
>以前のバージョンのユーザーマッピングツールについては、[レガシードキュメント](/help/journey-migration/content-transfer-tool/user-mapping-tool-legacy/considerations-user-mapping-tool-legacy.md)を参照してください。

## はじめに {#introduction}

>[!CONTEXTUALHELP]
>id="aemcloud_ctt_usermigration"
>title="ユーザーが移行されない"
>abstract="コンテンツ転送ツールでは、ユーザーは移行されなくなりました。ユーザーは Admin Console で管理する必要があります。"
>additional-url="https://experienceleague.adobe.com/ja/docs/experience-manager-cloud-service/content/onboarding/journey/admin-console" text="AEM Admin Console ドキュメント"
>additional-url="https://adminconsole.adobe.com/" text="AEM Admin Console"

Adobe Experience Manager（AEM）as a Cloud Service への移行プロセスの一環として、グループを既存の AEM システムから AEM as a Cloud Service に移行する必要があります。このタスクは、コンテンツ転送ツールによって実行されます。

AEM as a Cloud Service の重要な変更の 1 つは、Adobe ID を使用したオーサー層へのアクセスが完全に統合されていることです。このプロセスでは、ユーザーとユーザーグループを管理するために [Adobe Admin Console](https://helpx.adobe.com/jp/enterprise/using/admin-console.html) を使用する必要があります。ユーザープロファイル情報が Adobe Identity Management System（IMS）に一元化され、すべての Adobe クラウドアプリケーションでシングルサインオンを利用できます。詳しくは、[Identity Management](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/overview/what-is-new-and-different.html?lang=ja#identity-management) を参照してください。この変更により、IMS 経由で AEM に最初にログインしたときにユーザーが自動的に AEM に作成されます。そのため、CTT では、ユーザーはクラウドシステムに移行されません。IMS ユーザーは、IMS グループに配置する必要があります。IMS グループは、移行対象のグループや、移行中の AEM コンテンツにアクセスする権限が付与された AEM グループに配置される新しいグループにすることができます。この方法では、クラウドシステム上のユーザーは、ソース AEM システムと同じアクセス権を使用することになります。

## グループの移行の詳細 {#group-migration-detail}

コンテンツ転送ツールおよび Cloud Acceleration Manager では、移行されるコンテンツに関連付けられているすべてのグループがクラウドシステムに移行されます。コンテンツ転送ツールは、抽出プロセス中にソース AEM システムからすべてのグループをコピーすることで、これを行います。すると、CAM 取り込みは、特定のグループのみを選択して移行します。

* 移行されたコンテンツの ACL または CUG ポリシーにグループが含まれている場合、以下に示す例外を除いて、そのグループは移行されます。
* ターゲットのクラウドシステムに既にビルトインされているグループが多数ありますが、これらは移行されません。
   * 一部のビルトイングループには、ビルトイン&#x200B;_ではない_&#x200B;メンバーグループが含まれる場合があります。このようなメンバーグループ（直接のメンバーや、メンバーのメンバーなど）は、移行されたコンテンツの ACL または CUG ポリシーで参照されている場合に移行され、これらのグループのメンバーであるユーザーが（直接または間接的に）移行されたコンテンツへのアクセスを維持できるようになります。
* ACL または CUG ポリシーに見つからないグループ、宛先システムに既に存在するグループ、およびターゲットシステムに一意性制約のあるデータが既に存在するグループなどのその他のグループは移行されません。

あるグループについてログに記録／報告されるパスは、そのグループの移行をトリガーした最初のパスのみです。また、そのグループが他のコンテンツパス上に存在する場合もあります。

移行されるほとんどのグループは、IMS で管理されるように設定されています。つまり、IMS 内にある同じ名前のグループは AEM 内のグループにリンクされ、IMS グループ内のすべての IMS ユーザーは AEM ユーザーとなり、AEM 内のグループのメンバーになります。これにより、これらのユーザーはグループの ACL または CUG ポリシーに従って、コンテンツにアクセスできるようになります。

なお、移行されたグループは、AEM の「ローカルグループ」とは見なされなくなり、AEM では IMS 対応のグループですが、IMS にまだ存在していない場合もあります。AEMと IMS の間で同期できるように、IMS で別個に再作成する必要があります。グループは、IMS で Admin Console などの方法を使用して、個別または一括で作成できます。Admin Console でグループを個別または一括で作成する方法について詳しくは、[ユーザーグループの管理](https://helpx.adobe.com/jp/enterprise/using/user-groups.html)を参照してください。

この IMS 設定の例外は、Assets コレクションとプライベートフォルダーによって作成されたグループにあります。 AEMでコレクションまたはプライベートフォルダーを作成すると、そのコンテンツにアクセスするためのグループが作成されます。このようなグループはクラウドシステムに移行されますが、IMS で管理するように設定されません。  IMS ユーザーをこれらのグループに追加するには、アセット UI のグループプロパティページで、個別に、または別の IMS グループの一部としてまとめて追加する必要があります。


## グループの移行のオプトアウト {#group-migration-option}

CTT バージョン 3.0.20 以降には、グループの移行を無効にするオプションが含まれています。これは、OSGi コンソールで次のように設定されます。

* OSGi 設定 `(http://<server>/system/console/configMgr)` を開きます
* 「**コンテンツ転送ツール抽出サービス設定**」という設定をクリックします
* 「**移行にグループを含める**」をオフにして、グループの移行を無効にします
* 「**保存**」をクリックして、設定が保存され、サーバー上でアクティブになっていることを確認します

この設定を無効にすると、グループは移行されず、プリンシパル移行レポートまたはユーザーレポートは表示されません（以下を参照）。

## プリンシパル移行レポートとユーザーレポート {#principal-migration-report}

移行中にグループが含まれると（デフォルト）、プリンシパル移行レポートが保存され、移行中に各グループがどうなるかの概要が示されます。  取り込みに成功した後にこのレポートをダウンロードするには：
* CAM で、コンテンツ転送に移動し、「取り込みジョブ」を選択します。
* 該当する取り込みの行の省略記号（...）をクリックし、「プリンシパルの概要を表示」を選択します。
* 表示されるダイアログで、「ファイルをダウンロード…」の下のドロップダウンリストから「プリンシパル移行レポート」を選択し、「ダウンロード」ボタンをクリックします。
* 結果の CSV ファイルを保存します。

グループごとに記録される情報の一部を次に示します。
* 移行した場合は、グループの移行の原因となった最初の ACL または CUG へのパス。
* グループが以前に移行されたかどうか。現在の取り込みが非ワイプ取り込みの場合、以前の取り込み時に一部のグループが移行された可能性があります。
* グループが組み込みグループであるかどうか。これらのグループは常にターゲットの AEMaaCS 環境に存在するので、移行されません。
* 移行されたコンテンツ上の ACL または CUG にグループが含まれていない場合、そのグループは移行されませんでした。
* そのグループがAssets コレクションによって作成されたグループなどのローカルグループの場合は、移行されている可能性があり、この場合、「local」という単語がそのグループのレポートに追加されます。

移行中はユーザーは移行されませんが、何らかの方法でキャプチャされない限り、ソース・システム上のユーザー・グループの関係は失われます。 取り込みプロセスでは、この情報の一部をテキスト形式でユーザーレポートに取り込みます。このレポートは、プリンシパル移行レポートの最後に表示されます。

### ユーザーレポート {#user-report}

「ユーザーレポート」セクションでは、ユーザーがメールアドレスおよびこの取り込み中に移行された IMS 対応グループのリストと共に（行ごとに 1 つずつ）レポートされます。  移行されなかったグループ、以前の取り込み時に移行されたグループ、ローカルグループはリストに含まれません。   ユーザーが移行済みの IMS 対応グループに属しておらず、特殊なケースであることを示す追加のメモ（以下の **メモ** を参照）がない場合、そのユーザーは _レポートに表示されません_。 各ユーザーと共にレポートされるグループは、ユーザーがソースシステム内で直接または間接的にメンバーであるグループです。ソースシステム内のグループはネストされ、ターゲットシステム内ではネストされない場合があるので、このグループのリストは、IMS で新しくフラット化されたグループ構造をサポートします。

ワイプ操作の後に非ワイプ操作の場合、非ワイプ操作からのユーザーリスト内のグループは、非ワイプ操作時に移行されたグループのみに適用されます。

#### メモ {#user-report-notes}

各ユーザーのグループに加えて、ユーザーレポートには、ユーザーに関するメモを情報提供するためのフィールドがあります（メモの意味に関する詳細な説明もレポートにあります）。  使用可能なメモは次のとおりです。

* **メモ - A** ACL で直接参照されるユーザーのメモセクションには *メモ - A* が表示されます。これは、推奨されるユースケースやベストプラクティスではないからです。
* **メモ B** ビルトイングループの直接メンバーであるユーザーのメモセクションには *メモ B* が表示されます。これもまた、推奨されるユースケースやベストプラクティスではありません。
* **メモ - C** 移行したローカルグループの間接的なメンバー（Assets コレクションで作成されたグループなど）の直接のユーザーは、ローカルグループが IMS によって管理されるように設定されていないので、メモセクションに *メモ - C* が含まれます。

これらのケースは同時に発生し、また以前のケースと同時に発生する可能性があります。  _各メモが各ユーザーについて参照するグループに関する追加情報については、取り込みログを確認してください。この情報は各ユーザーについてレポートされます。_

ユーザーレポートは、プリンシパル移行レポート（以下の [ 最終概要およびレポート ](#final-summary-and-report) を参照）の最後に追加され、ユーザーがグループとユーザー、およびユーザーの関係をより深く理解できるようにします。

## ファイルの一括アップロード {#bulk-upload-files}

グループはAEM as a Cloud Serviceにのみ移行されるので、クラウド内のAEMで正しく動作できるように、グループを IMS に追加する必要もあります。 また、ユーザーは移行されないので、IMS にも追加する必要があります。 CTT/CAM 移行ツールではこの手順は実行されませんが、取り込みプロセスによって 2 つのバルクアップロードファイル（1 つはグループ用、もう 1 つはユーザー用）が作成されます。 これらのファイルを編集および使用して、Admin Consoleの一括アップロード機能を使用し、AEMのグループとユーザーに基づいて IMS グループとユーザーを作成できます。

一括アップロードファイルを使用して、Admin Consoleでユーザーとグループを作成する方法について詳しくは、[IMS へのグループとユーザーの一括アップロード ](/help/journey-migration/content-transfer-tool/using-content-transfer-tool/bulk-principal-uploading.md) を参照してください。

AEM as a Cloud Service ユーザーの管理について詳しくは、[ ユーザーの管理 ](https://helpx.adobe.com/ca/enterprise/using/users.html) も参照してください。

## その他の考慮事項 {#additional-considerations}

* 「**取り込み前にクラウドインスタンス上の既存のコンテンツを消去**」が設定されている場合は、以前に Cloud Service インスタンスに転送されたグループと既存のリポジトリ全体が削除され、コンテンツの取り込み先となる新しいリポジトリが作成されます。このプロセスは、ターゲットの Cloud Service インスタンスの権限を含むすべての設定もリセットします。これは、**管理者**&#x200B;グループに追加されたすべてのユーザーに当てはまります。CTT/CAM 取り込みのアクセストークンを取得するには、管理者ユーザーを&#x200B;**管理者**&#x200B;グループに再度追加する必要があります。
* ワイプなしの取り込みを実行する場合（「**既存のコンテンツを消去**」が設定されていない場合）、前回の転送以降変更がないのでコンテンツが転送されない場合は、そのコンテンツに関連付けられたグループも転送されません。このルールは、グループがソースシステム上で変更された場合でも当てはまります。これは、グループの移行が、ユーザーやグループが関連付けられているコンテンツと共にのみ行われるからです。このため、この場合、ソースシステム上のグループのメンバーであるグループは、移行中の別のグループの一部であるか、移行中の別のコンテンツの ACL に含まれていない限り、移行されません。これらのグループを後で移行する場合は、パッケージの使用、ターゲットからのグループの削除と関連コンテンツの再移行、ワイプ取り込みを使用した再移行を行うことを検討してください。
* ワイプなし取り込み中に、ソース AEM インスタンスとターゲット AEM Cloud Service インスタンスの両方に、同じ一意性制約データ（rep:principalName、rep:authorizableId、jcr:uuid または rep:externalId）のグループが存在する場合、問題のグループは移行&#x200B;_されず_、クラウドシステム上の既存のグループは変更されません。これは、プリンシパル移行レポートに記録されます。
* クローズドユーザーグループ（CUG）ポリシーで使用されるグループに関するその他の考慮事項について詳しくは、[クローズドユーザーグループの移行](/help/journey-migration/content-transfer-tool/using-content-transfer-tool/closed-user-groups-migration.md)を参照してください。

## 最終概要とレポート

抽出と取り込みが正常に完了すると、グループ移行の詳細を示すレポートが生成されます。詳しくは、[グループの移行を検証する方法](/help/journey-migration/content-transfer-tool/using-content-transfer-tool/validating-content-transfers.md#how-to-validate-group-migration)を参照してください。
