---
title: コンテンツ転送ツール使用のガイドラインとベストプラクティス
description: コンテンツ転送ツール使用のガイドラインとベストプラクティス
exl-id: d1975c34-85d4-42e0-bb1a-968bdb3bf85d
source-git-commit: 6f2a306f54295ec0ec78706fec4b34313e3000c7
workflow-type: tm+mt
source-wordcount: '1570'
ht-degree: 94%

---

# コンテンツ転送ツール使用のガイドラインとベストプラクティス {#guidelines}

## ガイドラインとベストプラクティス {#best-practices}

>[!CONTEXTUALHELP]
>id="aemcloud_ctt_guidelines"
>title="ガイドラインとベストプラクティス"
>abstract="リビジョンクリーンアップタスク、ディスク容量に関する考慮事項など、コンテンツ転送ツールを使用する際のガイドラインとベストプラクティスを確認します。"
>additional-url="https://experienceleague.adobe.com/docs/experience-manager-cloud-service/moving/cloud-migration/content-transfer-tool/using-content-transfer-tool.html?lang=ja#pre-reqs" text="コンテンツ転送ツール使用時の重要な考慮事項"
>additional-url="https://experienceleague.adobe.com/docs/experience-manager-cloud-service/moving/cloud-migration/content-transfer-tool/using-user-mapping-tool.html?lang=ja#important-considerations" text="ユーザーマッピングツール使用時の重要な考慮事項"

コンテンツ転送ツールを使用する際には、以下のガイドラインとベストプラクティスに従ってください。

* [リビジョンのクリーンアップ](https://experienceleague.adobe.com/docs/experience-manager-65/deploying/deploying/revision-cleanup.html?lang=ja)と[データストアの整合性チェック](https://helpx.adobe.com/jp/experience-manager/kb/How-to-run-a-datastore-consistency-check-via-oak-run-AEM.html)を&#x200B;**ソースリポジトリー**&#x200B;で実行して、潜在的な問題を特定し、リポジトリーのサイズを小さくすることをお勧めします。

* AEM as a Cloud Service オーサーのコンテンツ配信ネットワーク（CDN）に IP のホワイトリストが設定されている場合は、ソース環境と AEM as a Cloud Service 環境が相互に通信できるように、ソース環境の IP も許可リストに追加する必要があります。

* インジェスト段階では、*ワイプ*&#x200B;モードを有効にしてインジェストを実行することをお勧めします。このモードでは、ターゲット AEM as a Cloud Service 環境内の既存のリポジトリー（オーサーまたはパブリッシュ）が完全に削除された後、移行セットのデータで更新されます。このモードは、現在のコンテンツの上に移行セットが適用される非ワイプモードより、はるかに高速です。

* コンテンツ転送アクティビティが完了したら、Cloud Service 環境でコンテンツが正常にレンダリングされるように、Cloud Service 環境で正しいプロジェクト構造を使用する必要があります。

* コンテンツ転送ツールを実行する前に、ソース AEM インスタンスの `crx-quickstart` サブディレクトリに十分なディスク領域があることを確認する必要があります。これは、コンテンツ転送ツールによってリポジトリーのローカルコピーが作成され、後で移行セットにアップロードされるためです。必要な空きディスク容量を計算する一般的な式は次のとおりです。
   `data store size + node store size * 1.5`

   * *data store size*：実際のデータストアのサイズが大きい場合でも、コンテンツ転送ツールは 64 GB を使用します。
   * *node store size*：セグメントストアディレクトリのサイズまたは MongoDB データベースのサイズ。
したがって、セグメントストアのサイズが 20 GB の場合、必要な空きディスク容量は 94 GB になります。

* コンテンツ追加をサポートするには、コンテンツ転送アクティビティ全体を通して移行セットを維持管理する必要があります。コンテンツ転送アクティビティで一度に作成および維持管理できる移行セットは最大 10 個なので、コンテンツリポジトリーを適宜分割して、移行セットが不足しないようにすることをお勧めします。

## コンテンツ転送ツール使用前の重要な考慮事項 {#important-considerations}

コンテンツ転送ツールを実行する際には、次の重要事項を考慮してください。

* コンテンツ転送ツールに必要なシステム構成は、AEM 6.3 以降と Java 8 です。使用している AEM のバージョンがこれより古い場合、コンテンツ転送ツールを使用するには、コンテンツリポジトリーを AEM 6.5 にアップグレードする必要があります。

* AEM を開始するユーザーが `java` コマンドを実行できるように、AEM 環境上で Java を設定する必要があります。

* バージョン 1.3.0 のインストール時には、コンテンツ転送ツールのアーキテクチャが大きく変更されているため、旧バージョンのツールをアンインストールすることをお勧めします。また、1.3.0 では、新しい移行セットを作成し、その新しい移行セットで抽出と取り込みを再実行してください。

* コンテンツ転送ツールは、ファイルデータストア、S3 データストア、共有 S3 データストア、Azure Blob Store データストアと共に使用できます。

* *サンドボックス環境*&#x200B;を使用している場合は、環境が最新で最新のリリースにアップグレードされていることを確認してください。*実稼動環境*&#x200B;を使用している場合、環境は自動的に更新されます。

* コンテンツ転送ツールを使用するユーザーは、ソースインスタンスの管理者で、かつ、コンテンツ転送先の Cloud Service インスタンスのローカルの AEM **administrators** グループに属している必要があります。権限のないユーザーは、コンテンツ転送ツールを使用するアクセストークンを取得できません。

* 「**取得前にクラウドインスタンス上の既存のコンテンツを消去**」オプションが有効な場合は、既存のリポジトリー全体が削除され、コンテンツの取り込み先となる新しいリポジトリーが作成されます。つまり、ターゲットの Cloud Service インスタンスに対する権限を含むすべての設定がリセットされます。これは、**administrators** グループに追加された管理者ユーザーにも当てはまります。ユーザーを **管理者** グループを作成し、コンテンツ転送ツールのアクセストークンを取得します。

* 2 つのソースのコンテンツがターゲット上の同じパスに移動された場合、コンテンツ転送ツールでは、複数のソースのコンテンツをターゲットCloud Serviceインスタンスに結合することはできません。 複数のソースから 1 つのターゲットCloud Serviceインスタンスにコンテンツを移動するには、ソースからのコンテンツパスが重複しないようにする必要があります。

* アクセストークンは、特定の期間の後、または Cloud Service 環境のアップグレード後に、定期的に期限切れになる場合があります。アクセストークンの有効期限が切れると、Cloud Service インスタンスに接続できなくなり、新しいアクセストークンを取得する必要があります。既存の移行セットに関連付けられているステータスアイコンが赤の雲アイコンに変わり、その上にカーソルを置くとメッセージが表示されます。

* コンテンツ転送ツール（CTT）は、ソースインスタンスからターゲットインスタンスにコンテンツを転送する前に、どのような種類のコンテンツ分析も実行しません。例えば、CTT では、コンテンツをパブリッシュ環境に取り込む際に、公開済みコンテンツと非公開コンテンツを区別しません。移行セットで指定されているコンテンツは何であれ、選択したターゲットインスタンスに取り込まれます。オーサーインスタンスとパブリッシュインスタンスのどちらか一方または両方に移行セットを取り込むことができます。コンテンツを実稼動インスタンスに移動する際は、ソースオーサーインスタンスに CTT をインストールしてコンテンツをターゲットオーサーインスタンスに移動し、同様に、ソースパブリッシュインスタンスに CTT をインストールしてコンテンツをターゲットパブリッシュインスタンスに移動することをお勧めします。詳しくは、[パブリッシュインスタンスでのコンテンツ転送ツールの実行](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/moving/cloud-migration/content-transfer-tool/using-content-transfer-tool.html?lang=ja#running-ctt-on-publish)を参照してください。

* コンテンツ転送ツールによって転送されるユーザーとグループは、権限を満たすためにコンテンツで必要なものに限られます。*抽出*&#x200B;プロセスでは、`/home` 全体を移行セットにコピーし、*取り込み*&#x200B;プロセスでは、移行されたコンテンツ ACL で参照されているすべてのユーザーおよびグループをコピーします。既存のユーザーやグループを IMS ID に自動的にマッピングする場合は、[ユーザーマッピングツールの使用](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/moving/cloud-migration/content-transfer-tool/using-user-mapping-tool.html?lang=ja#cloud-migration)を参照してください。

* 抽出段階では、コンテンツ転送ツールはアクティブな AEM ソースインスタンスで実行されます。

* コンテンツ転送プロセスの&#x200B;*抽出*&#x200B;段階が完了したら、*取り込み段階*&#x200B;を開始してコンテンツを AEM as a Cloud Service の&#x200B;*ステージング*&#x200B;インスタンスまたは&#x200B;*実稼働*&#x200B;インスタンスに取り込む前に、サポートチケットを申請して、*取り込み*&#x200B;を実行する意図をアドビに知らせる必要があります。それにより、アドビは、*取り込み*&#x200B;プロセス中に中断が発生しないようにすることができます。予定している&#x200B;*取り込み*&#x200B;日の 1 週間前にサポートチケットを申請する必要があります。サポートチケットを申請したら、サポートチームから、次の手順に関するガイダンスが提供されます。サポートチケットを申請する際には、次の詳細を記載します。

   * *取り込み*&#x200B;段階の開始を予定している正確な日付と大体の時刻（およびタイムゾーン）
   * データの取り込み先として予定している環境のタイプ（ステージングまたは実稼働）
   * プログラム ID

* オーサーの&#x200B;*取得段階*&#x200B;では、オーサーのデプロイメント全体がスケールダウンされます。つまり、オーサー AEM インスタンスは、インジェストプロセス全体で使用できなくなります。また、*取り込み*&#x200B;段階の実行中に Cloud Manager パイプラインが実行されないようにしてください。

* ソース AEM システム上のデータストアとして `Amazon S3` または `Azure` を使用する場合は、保存された BLOB を削除（ガベージコレクション）できないように、データストアを設定する必要があります。これにより、インデックスデータの整合性が確保されます。このように設定しないと、このインデックスデータの整合性が欠落しているために抽出が失敗する可能性があります。

* カスタムインデックスを使用する場合は、コンテンツ転送ツールを実行する前に、`tika` ノードでカスタムインデックスを設定する必要があります。詳細は、「[新しいインデックス定義の準備](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/operations/indexing.html?lang=ja#preparing-the-new-index-definition)」を参照してください。

* 追加を行う場合は、最初の抽出を実行した時点から、追加抽出を実行する時点まで、既存コンテンツのコンテンツ構造が変わらないことが不可欠です。最初の抽出以降に構造が変更されたコンテンツに対しては、追加を実行できません。移行プロセス中は、必ずこの制限を実施してください。

* バージョンを移行セットの一部に含める予定で、`wipe=false` を指定して追加を行う場合、コンテンツ転送ツールの現在の制限事項により、バージョンのパージを無効にする必要があります。バージョンのパージを有効にしたまま、移行セットへの追加を行う場合は、`wipe=true` を指定して取り込みを実行する必要があります。

## 次の手順 {#whats-next}

コンテンツ転送ツールの使用に関するガイドライン、ベストプラクティス、重要な考慮事項を理解したら、ツールをインストールして使用する準備が整いました。まず、移行セットの作成から始めます。詳しくは、[コンテンツ転送ツールの基本を学ぶ](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/moving/cloud-migration/content-transfer-tool/getting-started-content-transfer-tool.html?lang=ja)を参照してください。
