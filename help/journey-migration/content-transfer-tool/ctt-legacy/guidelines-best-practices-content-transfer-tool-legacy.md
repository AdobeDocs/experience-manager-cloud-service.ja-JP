---
title: コンテンツ転送ツール（レガシー）の使用に関するガイドラインとベストプラクティス
description: コンテンツ転送ツール使用のガイドラインとベストプラクティス
hide: true
hidefromtoc: true
exl-id: 03449606-0fb4-4a9f-9abb-6b17c27a6046
source-git-commit: 3c8035e4db5729f58bae29136a32a0b9944d6a2f
workflow-type: tm+mt
source-wordcount: '1477'
ht-degree: 55%

---

# コンテンツ転送ツール使用のガイドラインとベストプラクティス（レガシー） {#guidelines}

## ガイドラインとベストプラクティス {#best-practices}

コンテンツ転送ツールを使用する際には、以下のガイドラインとベストプラクティスに従ってください。

* 実行 [リビジョンのクリーンアップ](https://experienceleague.adobe.com/docs/experience-manager-65/deploying/deploying/revision-cleanup.html?lang=ja) および [データストアの整合性チェック](https://experienceleague.adobe.com/docs/experience-cloud-kcs/kbarticles/KA-16550.html?lang=en) の **ソース** リポジトリを使用して、潜在的な問題を特定し、リポジトリのサイズを小さくします。

* AEM Cloud オーサーコンテンツ配信ネットワーク (CDN) の設定に IP のが設定されている場合許可リストは、ソース環境の IP も必ず設定に追加し許可リストます。 これにより、ソース環境とAEM Cloud 環境が相互に通信できるようになります。

* を使用してインジェストを実行する *ワイプ* モードは有効です。target AEM Cloud Service環境の既存のリポジトリ（オーサーまたはパブリッシュ）が削除され、移行セットデータで更新されます。 このモードは、現在のコンテンツの上に移行セットが適用される非ワイプモードより、はるかに高速です。

* コンテンツ転送アクティビティが完了したら、Cloud Service 環境でコンテンツが正常にレンダリングされるように、Cloud Service 環境で正しいプロジェクト構造を使用する必要があります。

* コンテンツ転送ツールを実行する前に、ソース AEM インスタンスの `crx-quickstart` サブディレクトリに十分なディスク領域があることを確認する必要があります。これは、コンテンツ転送ツールによってリポジトリーのローカルコピーが作成され、後で移行セットにアップロードされるためです。必要な空きディスク容量を計算する一般的な式は次のとおりです。
   `data store size + node store size * 1.5`

   * *data store size*：実際のデータストアのサイズが大きい場合でも、コンテンツ転送ツールは 64 GB を使用します。
   * *node store size*：セグメントストアディレクトリのサイズまたは MongoDB データベースのサイズ。
したがって、セグメントストアのサイズが 20 GB の場合、必要な空きディスク容量は 94 GB になります。

* コンテンツの追加をサポートするには、コンテンツ転送アクティビティ全体で移行セットを維持する必要があります。 コンテンツ転送中に一度に最大 10 個の移行セットを作成および管理できるので、それに応じてコンテンツリポジトリを分割することをお勧めします。 これにより、移行セットが不足するのを防ぐことができます。

## コンテンツ転送ツール使用前の重要な考慮事項 {#important-considerations}

コンテンツ転送ツールを実行する際には、次の重要事項を考慮してください。

* コンテンツ転送ツールに必要なシステム構成は、AEM 6.3 以降と Java™ 8 です。 使用している AEM のバージョンがこれより古い場合、コンテンツ転送ツールを使用するには、コンテンツリポジトリーを AEM 6.5 にアップグレードする必要があります。

* AEM環境で Java™を設定し、 `java` コマンドは、AEMを起動したユーザーが実行できます。

* バージョン 1.3.0 のインストール時に古いバージョンのコンテンツ転送ツールをアンインストールします。これは、ツールに大きなアーキテクチャの変更があったためです。 1.3.0 では、移行セットも作成し、新しい移行セットで抽出と取り込みを再実行する必要があります。

* コンテンツ転送ツールは、ファイルデータストア、S3 データストア、共有 S3 データストア、Azure Blob Store データストアと共に使用できます。

* *サンドボックス環境*&#x200B;を使用している場合は、環境が最新で最新のリリースにアップグレードされていることを確認してください。*実稼動環境*&#x200B;を使用している場合、環境は自動的に更新されます。

* コンテンツ転送ツールを使用するユーザーは、ソースインスタンスの管理者で、かつ、コンテンツ転送先の Cloud Service インスタンスのローカルの AEM **administrators** グループに属している必要があります。権限のないユーザーは、コンテンツ転送ツールを使用するためにアクセストークンを取得できません。

* 設定が **取り込み前にクラウドインスタンス上の既存のコンテンツを消去** オプションを有効にすると、既存のリポジトリ全体が削除され、コンテンツの取り込み先のリポジトリが作成されます。 このワークフローは、ターゲットCloud Serviceインスタンスに対する権限を含むすべての設定をリセットすることを意味します。 この結果は、 **管理者の** グループ化します。 ユーザーは **管理者の** グループを作成し、コンテンツ転送ツールのアクセストークンを取得します。

* 2 つのソースのコンテンツがターゲット上の同じパスに移動された場合、コンテンツ転送ツールでは、複数のソースのコンテンツをターゲット Cloud Service インスタンスに結合することはできません。複数のソースから 1 つのターゲット Cloud Service インスタンスにコンテンツを移動するには、ソースからのコンテンツパスが重複しないようにする必要があります。

* アクセストークンは、特定の期間の後、または Cloud Service 環境のアップグレード後に、定期的に期限切れになる場合があります。アクセストークンの有効期限が切れている場合、Cloud Serviceインスタンスに接続できません。 その場合は、新しいアクセストークンを取得する必要があります。 既存の移行セットに関連付けられているステータスアイコンは、赤い雲に変わり、その上にマウスポインターを置くとメッセージが表示されます。

* コンテンツ転送ツール（CTT）は、ソースインスタンスからターゲットインスタンスにコンテンツを転送する前に、どのような種類のコンテンツ分析も実行しません。例えば、CTT では、コンテンツをパブリッシュ環境に取り込む際に、公開済みコンテンツと非公開コンテンツを区別しません。移行セットで指定されているコンテンツが、選択したターゲットインスタンスに取り込まれます。 ユーザーは、移行セットをオーサーインスタンス、パブリッシュインスタンス、またはその両方に取り込むことができます。 コンテンツを実稼動インスタンスに移動する際に、ソースオーサーインスタンスに CTT をインストールして、コンテンツをターゲットオーサーインスタンスに移動します。 同様に、ソースパブリッシュインスタンスに CTT をインストールして、コンテンツをターゲットパブリッシュインスタンスに移動します。 詳しくは、[パブリッシュインスタンスでのコンテンツ転送ツールの実行](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/migration-journey/cloud-migration/content-transfer-tool/getting-started-content-transfer-tool.html?lang=en#running-tool)を参照してください。

* コンテンツ転送ツールによって転送されるユーザーとグループは、権限を満たすためにコンテンツで必要なものに限られます。*抽出*&#x200B;プロセスでは、`/home` 全体を移行セットにコピーし、*取り込み*&#x200B;プロセスでは、移行されたコンテンツ ACL で参照されているすべてのユーザーおよびグループをコピーします。既存のユーザーやグループを IMS ID に自動的にマッピングする場合は、[ユーザーマッピングツールの使用](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/migration-journey/cloud-migration/content-transfer-tool/legacy-user-mapping-tool/using-user-mapping-tool-legacy.html?lang=en)を参照してください。

* 抽出段階では、コンテンツ転送ツールはアクティブな AEM ソースインスタンスで実行されます。

* 完了後、 *抽出* コンテンツ転送プロセスのフェーズと、 *取り込み段階* コンテンツをAEM as a Cloud Serviceに取り込む *ステージ* または *実稼動* インスタンスは、サポートチケットをログに記録します。 Adobeに実行を通知 *取り込み* したがって、Adobeは、 *取り込み* プロセス。 予定より 1 週間前にサポートチケットをログに記録します *取り込み* 日付。 サポートチケットを送信すると、次の手順に関するガイダンスがサポートチームから提供されます。 サポートチケットを申請する際には、次の詳細を記載します。

   * *取り込み*&#x200B;段階の開始を予定している正確な日付と大体の時刻（およびタイムゾーン）
   * データの取り込み先として予定している環境のタイプ（ステージングまたは実稼働）
   * プログラム ID

* オーサーの&#x200B;*取得段階*&#x200B;では、オーサーのデプロイメント全体がスケールダウンされます。このプロセスでは、オーサーAEMは、インジェストプロセス全体で使用できなくなります。 また、*取り込み*&#x200B;段階の実行中に Cloud Manager パイプラインが実行されないようにしてください。

* ソース AEM システム上のデータストアとして `Amazon S3` または `Azure` を使用する場合は、保存された BLOB を削除（ガベージコレクション）できないように、データストアを設定する必要があります。これにより、インデックスデータの整合性が確保されます。このように設定しないと、このインデックスデータの整合性が欠落しているために抽出が失敗する可能性があります。

* カスタムインデックスを使用する場合は、コンテンツ転送ツールを実行する前に、`tika` ノードでカスタムインデックスを設定する必要があります。詳細は、「[新しいインデックス定義の準備](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/operations/indexing.html?lang=en#preparing-the-new-index-definition)」を参照してください。

* 追加の作業を行う場合は、追加の抽出を実行したときに、最初の抽出を実行したときからにしたときに、既存のコンテンツのコンテンツ構造が変更されないようにしてください。 最初の抽出以降に構造が変更されたコンテンツでは、トップアップを実行できません。 移行プロセス中は、必ず制限を適用してください。

* バージョンを移行セットの一部に含める予定で、`wipe=false` を指定して追加を行う場合、コンテンツ転送ツールの現在の制限事項により、バージョンのパージを無効にする必要があります。バージョンのパージを有効にしたまま、移行セットへの追加を行う場合は、`wipe=true` を指定して取り込みを実行する必要があります。

## 次の手順 {#whats-next}

コンテンツ転送ツールの使用に関するガイドライン、ベストプラクティス、重要な考慮事項を理解したら、ツールをインストールして使用する準備が整いました。まず、移行セットの作成から始めます。詳しくは、[コンテンツ転送ツールの基本を学ぶ](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/migration-journey/cloud-migration/content-transfer-tool/getting-started-content-transfer-tool.html?lang=ja)を参照してください。
