---
title: ユーザーマッピングツールの使用
description: ユーザーマッピングツールの使用
translation-type: tm+mt
source-git-commit: 410b7900981596590fa80b286b40a965700f108e
workflow-type: tm+mt
source-wordcount: '750'
ht-degree: 6%

---


# ユーザーマッピングツールの使用{#user-mapping-tool}

## 概要 {#overview}

トランジションジャーニーの一環として、Cloud ServiceとしてAEMにユーザーとグループを移動するには、既存のAEMシステムからAEMにCloud Serviceとしてユーザーとグループを移動する必要があります。 これは、コンテンツ転送ツールで行います。

AEM as a Cloud Service の重要な変更の 1 つは、Adobe ID を使用したオーサー層へのアクセスが完全に統合されていることです。これには、ユーザーとユーザーグループの管理にAdobe Admin Consoleを使用する必要があります。 ユーザープロファイル情報は、AdobeIdentity Managementシステム(IMS)に一元化され、すべてのAdobeクラウドアプリケーションにシングルサインオンを提供します。 詳細はIdentity Managementを参照。 この変更により、Cloud Service作成者インスタンス上の重複ユーザーとグループを回避するために、既存のユーザーとグループをIMS IDにマッピングする必要があります。

## 重要な検討事項 {#important-considerations}

考慮すべき例はいくつかある。 次の特定のケースがログに記録され、該当するユーザーまたはグループはマッピングされません。

1. ユーザーのjcrノードの`profile/email`フィールドに電子メールアドレスがない場合。

1. 使用されている組織IDのIMSシステムで特定の電子メールが見つからない場合（または、別の理由でIMS IDを取得できない場合）。

1. ユーザーが現在無効になっている場合は、無効になっていない場合と同じように扱われます。  通常どおりマップおよび移行され、クラウドインスタンスでは無効のままになります。

## ユーザーマッピングツールの使用{#using-user-mapping-tool}

ユーザーマッピングツールはAPIを使用し、IMSユーザーを電子メールで検索し、IMS IDを返すことができます。 このAPIでは、組織のクライアントID、クライアントシークレット、アクセストークン/ベアラートークンを作成する必要があります。

この設定を行うには、次の手順に従います。

1. Adobe IDを使用して[Adobeデベロッパーコンソール](https://console.adobe.io)に移動します。
1. 新しいプロジェクトを作成するか、既存のプロジェクトを開く
1. 追加API
1. ユーザー管理APIの選択
1. JWT秘密鍵証明書の作成
1. キーペアを生成するか、公開鍵をアップロードする（rsaは良くありません）
1. アクセストークン（またはJWTトークンまたはベアラトークン）を生成します。
1. これらの情報(クライアントID、クライアントシークレット、テクニカルアカウントID、テクニカルアカウント電子メール、組織ID、アクセストークン)をすべて安全な場所に保存します。

## ユーザーインターフェイス {#user-interface}

ユーザマッピングツールは、コンテンツ転送ツールに統合されています。 コンテンツ転送ツールは、ソフトウェア配布ポータルからダウンロードできます。 最新バージョンの詳細については、「リリースノート」を参照してください。

1. 「Adobe Experience Managerを選択」を選択し、ツール/**操作** -> **コンテンツ転送**&#x200B;に移動します。
1. 「**ユーザーマッピング設定を作成**」をクリックします。

   >[!NOTE]
   >この手順をスキップすると、ユーザーとグループのマッピングは抽出段階でスキップされます。

   以下の説明に従って、User Management API設定のフィールドに値を入力します。

   * **組織ID**:ユーザーを移行する組織のIMS組織IDを入力します。

      >[!NOTE]
      >組織IDを取得するには、[Admin Console](https://adminconsole.adobe.com/)にログインし、（右上の領域で）組織を選択します（複数の組織に属している場合）。 組織IDは、`xx@AdobeOrg`のような形式で、そのページのURLに含まれます。xxはIMS組織IDです。  組織IDは、アクセストークンを生成した[Adobe開発者コンソール](https://console.adobe.io)ページにあります。

   * **クライアントID**:設定手順で保存したクライアントIDを入力します

   * **アクセストークン**:設定手順で保存したアクセストークンを入力します

      >[!NOTE]
      >アクセストークンの有効期限は24時間ごとに切れ、新しいアイテムを作成する必要があります。 新しいトークンを作成するには、[Adobe開発者コンソール](https://console.adobe.io)に戻って、プロジェクトを選択し、User Management APIをクリックして、ボックスに同じ秘密鍵を貼り付けます。

1. 上記の情報を入力した後、「保存」をクリックします。

1. 移行セットを作成するには、[移行セットの作成]をクリックしてフィールドに値を入力し、[保存]をクリックします。 詳しくは、「コンテンツ転送ツールの実行」を参照してください。

   >[!NOTE]
   >切り替えスイッチで、「Mapping Users from IMS Users and Groups」がデフォルトでオンになっています。 この設定を使用すると、この移行セットで抽出が実行されると、ユーザーマッピングツールは抽出段階の一部として実行されます。 これは、コンテンツ転送ツールの抽出段階を実行する場合に推奨される方法です。 この切り替えをオフにした場合、またはユーザマッピング設定が作成されない場合、ユーザとグループのマッピングは抽出段階でスキップされます。

1. 抽出フェーズを実行するには、「[コンテンツ転送ツールの実行](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/moving/cloud-migration/content-transfer-tool/using-content-transfer-tool.html?lang=en#running-tool)」を参照してください。



