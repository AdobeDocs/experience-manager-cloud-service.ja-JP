---
title: Cloud ServiceとしてのAEMヘッドレスの使用の手引き
description: AEMヘッドレス開発者ジャーニーのこの部分では、AEMヘッドレスの前提条件について説明します。
hide: true
hidefromtoc: true
index: false
translation-type: tm+mt
source-git-commit: 9fb18dbe60121f46dba1e11d4133e5264a6d538d
workflow-type: tm+mt
source-wordcount: '3087'
ht-degree: 4%

---


# Cloud ServiceとしてのAEMヘッドレスの使用の手引き{#getting-started}

>[!CAUTION]
>
>作業中 — このドキュメントの作成は現在進行中で、完全なもの、最終的なもの、または実稼働目的で使用するものとして理解してはなりません。

[AEMヘッドレス開発者ジャーニーのこの部分では、](overview.md)は、自分のプロジェクトをAEMヘッドレスで開始するために必要なものについて学びます。

## {#story-so-far}

以前のドキュメントのAEMヘッドレスジャーニー[CMSヘッドレス開発について](learn-about.md)では、ヘッドレスCMSとは何かの基本的な理論を学びました。

* ヘッドレスコンテンツ配信の基本概念と用語の理解
* ヘッドレスが必要な理由と時期を理解する
* ヘッドレスコンセプトの使い方とそれらの相互関係を高度に把握する

この記事は、これらの基本事項に基づいて構築されており、AEMを使用してヘッドレスソリューションを実装する方法を理解しています。

## 目的 {#objective}

このドキュメントは、独自のプロジェクトのコンテキストでAEMヘッドレスを理解するのに役立ちます。 読んだ後は、次の操作を行います。

* AEMヘッドレス機能の基本を理解します。
* AEMヘッドレス機能の使用に関する前提条件を確認する。
* AEMヘッドレス統合レベルに注意してください。
* プロジェクトを範囲で定義できる。

## AEMの基本{#aem-basics}

AEM内でヘッドレスプロジェクトを定義する前に、いくつかの基本的なAEMの概念を理解することが重要です。

### 作成者インスタンス{#author}

最も単純なAEMは、コンテンツの作成、管理および公開に連携して機能する作成者インスタンスと[発行インスタンス](#publish)で構成されます。

コンテンツは作成者インスタンスで開始されます。 コンテンツ作成者がコンテンツを作成する場所です。 作成者環境は、作成者がコンテンツを作成、整理、再利用するための様々なツールをオファーします。

### 発行インスタンス{#publish}

作成者インスタンスでコンテンツを作成したら、他のサービスで利用できるように発行して、他のサービスで利用できるようにする必要があります。 発行インスタンスには、発行されたすべてのコンテンツが含まれます。

### レプリケーション {#replication}

複製は、コンテンツを作成者インスタンスから発行インスタンスに転送する操作です。 これは、作成者または適切な権限を持つ他のユーザーがコンテンツを公開する際に、AEMによって自動的に行われます。

### AEMの基本事項{#aem-basics-summary}

最もシンプルなレベルで、AEMでデジタルエクスペリエンスを作成するには、次の手順を実行する必要があります。

1. コンテンツ作成者は、オーサーインスタンスにヘッドレスコンテンツを作成します。
1. このコンテンツの準備が整うと、パブリッシュインスタンスに複製されます。 その後、APIを呼び出して、このコンテンツを取得できます。

AEMヘッドレスは、次のセクションで説明するヘッドレスコンテンツを管理する強力なツールを提供することで、この技術基盤から構築されます。[](#aem-headless-basics)

## AEM Headless Basics {#aem-headless-basics}

AEMのヘッドレス機能は、いくつかの主な機能に基づいています。 これらについては、ジャーニー後半で詳しく説明します。 彼らが何をするか、何と呼ばれるかの基礎を知るだけが大切です。

### コンテンツフラグメントモデル {#content-fragment-models}

コンテンツフラグメントモデルは、AEM で作成および管理するデータとコンテンツの構造を定義するもので、コンテンツの一種の基礎として機能します。コンテンツの作成を選択すると、作成者はあなたが定義したコンテンツフラグメントモデルから選択します。これが、コンテンツの作成のガイドとなります。

### コンテンツフラグメント {#content-fragments}

コンテンツフラグメントを使用すると、ページに依存しないコンテンツの設計、作成、キュレーションおよび使用が可能になります。複数の場所や複数のチャネルで使用可能なコンテンツを用意できるようになります。

コンテンツフラグメントには構造化されたコンテンツが含まれ、JSON 形式で配信できます。

### GraphQLおよびREST API {#apis}

コンテンツを無理に変更するには、AEMオファーに2つの堅牢なAPIがあります。

* GraphQL API を使用すると、コンテンツフラグメントにアクセスして配信するリクエストを作成できます。
* アセット REST API を使用すると、コンテンツフラグメント（およびその他のアセット）を作成および変更できます。

これらのAPIの概要と、AEMのヘッドレスジャーニーの後半での使用方法について学習します。 または、以下の[追加のリソース](#additional-resources)を参照して、追加のドキュメントを参照してください。

## ヘッドレス統合レベル{#integration-levels}

AEMは、フルヘッドレス、従来のフルスタック、またはCMSのヘッドフルモデルの両方をサポートしています。 ただし、AEMオファーはこの2つの排他的な選択肢のみならず、両方の利点を組み合わせたハイブリッドモデルをサポートする機能を備えており、ヘッドレスプロジェクトに独自の柔軟性を提供します。

ヘッドレスコンセプトを確実に理解するために、このAEMヘッドレス開発者ジャーニーでは、AEMでコーディングを使用せずにできるだけ早く立ち上がり、実行できるだけ早く、純粋なヘッドレスモデルに焦点を当てます。

ただし、AEMのヘッドレス機能を理解したら、新たに追加されたハイブリッドの可能性に注意する必要があります。 私たちは、あなたの認識のために、これらの事例を下に掲げます。 プロジェクトに柔軟性が必要な場合に備えて、ジャーニーの最後にこれらの概念について詳しく説明します。

### 既に1つのページアプリ(SPA)などのヘッドレスコンテンツを外部で消費しています。{#already-have-a-spa}

基本的な要件が、少なくともAEMから既存の外部サービスにコンテンツを配信することであると仮定します。

#### レベル1:コンテンツフラグメントの統合 — 従来のヘッドレスモデル{#level-1}

このレベルの統合は従来のヘッドレスモデルであり、コンテンツ作成者はAEMでコンテンツを作成し、GraphQLを使用して任意の数の外部サービスに無料で配信したり、Assets APIを使用して外部サービスから編集したりできます。 AEMではコーディングは必要ありません。

このモデルでは、AEMは、AEMコンテンツフラグメントを使用してコンテンツを作成し、提供する場合にのみ使用されます。 コンテンツのレンダリングと操作は、消費する外部アプリケーション(多くの場合はシングルページアプリケーション(SPA)に委任されます。

#### レベル2:SPAをAEMに埋め込む — ハイブリッドモデル{#level-2}

このレベルの統合は第1レベルに基づいていますが、外部アプリケーション(SPA)をAEMに埋め込むことで、コンテンツ作成者がAEM内の外部アプリケーションのコンテキストでコンテンツを表示できるようにします。 また、AEM内での外部アプリケーションの制限付き編集をサポートすることもできます。

このレベルの利点は、コンテンツ作成者が独自のコンテンツを組み込み外部SPAで文脈に沿って提供しながらも、AEMで柔軟にコンテンツをオーサリングできる点にあります。

#### レベル3:AEMでSPAを埋め込んで完全に有効にする — ハイブリッドモデル{#level-3}

このレベルの統合は、外部SPAのほとんどのコンテンツをAEM内で編集できるようにすることで、レベル2に基づいて構築されます。

### まだ単一のページアプリ(SPA)などのヘッドレスコンテンツの外部コンシューマーはお持ちではありません。{#do-not-have-a-spa}

AEMのコンテンツを無理に消費する新しいSPAを作成する場合は、コンテンツフラグメントなどの機能を使用してヘッドレスコンテンツを管理し、AEM SPAエディタフレームワークを使用してSPAを構築できます。

SPAエディタを使用すると、SPAはAEMのコンテンツを使用するだけでなく、コンテンツ作成者がAEM内で完全に編集できるので、AEM内でのヘッドレス配信とコンテキスト内編集の柔軟性が得られます。

## 要件と前提条件{#requirements-prerequisites}

ヘッドレスAEMプロジェクトを開始する前に、いくつかの要件があります。

### 知識{#knowledge}

* GraphQL
* ReactまたはAngularフレームワークを使用したSPAの開発エクスペリエンスの作成
* AEMの基本的なスキルでコンテンツフラグメントを作成し、エディターを使用する

### ツール {#tools}

* プロジェクトの展開をテストするためのSandboxへのアクセス
* データのモデリングとテストのローカル開発インスタンス
* 既存の外部SPAまたはヘッドレスAEMコンテンツのその他の消費者

## プロジェクトの定義{#defining-your-project}

成功するプロジェクトには、プロジェクトの要件だけでなく、役割や責任も明確に定義することが重要です。

### 対象範囲 {#scope}

プロジェクトの範囲を明確に定義することは非常に重要です。 スコープは、受け入れ条件を通知し、完了の定義を確立できます。

最初に自問する必要がある質問は「AEMヘッドレスで何を達成しようとしているのか」です 一般的に、AEMと組み合わせることなく、独自の開発ツールを使用して構築したエクスペリエンスアプリケーションが、将来、あるいは今後提供されることになります。 このエクスペリエンスアプリは、モバイルアプリ、Webサイト、またはエンドユーザーが使用するエクスペリエンスアプリケーションの場合があります。 AEM Headlessの目的は、AEMで作成、保存、管理されるコンテンツをエクスペリエンスアプリケーションにフィードさせ、AEM Headlessを呼び出してコンテンツを取得したり、エクスペリエンスアプリケーションから直接完全なCRUDコンテンツを取得することです。 これが期待しているものでない場合は、[AEMのドキュメント](https://experienceleague.adobe.com/docs/experience-manager-cloud-service.html?lang=ja)に戻って、目的に合ったセクションを見つけてください。

### 役割と責任{#roles-responsibilities}

個々のプロジェクトに対する役割は異なりますが、AEMヘッドレス開発の内容で考慮すべき重要な役割は次のとおりです。

* [管理者](#administrator)
* [コンテンツ作成者](#content-author)
* [コンテンツモデラー](#content-modeler)
* [開発者](#developer)

#### 管理者 {#administrator}

管理者は、システムの基本セットアップと設定を担当します。 例えば、管理者がAdobeのユーザー管理システム(Identity Managementシステム(IMS))内に組織を設定するとします。 組織がIMS内のAdobeによって作成された後、Adobeから電子メールの招待状を受け取るのは、組織の最初のユーザーです。 管理者は、IMSにログインして他のユーザーを追加できます。

管理者がユーザを設定すると、AEM Headlessを使用したエクスペリエンスアプリケーションの配信に寄与したユーザに対して、すべてのAEMリソースにアクセスする権限が与えられます。

管理者はAEMを設定し、コンテンツ作成者](#content-author)がコンテンツを作成および更新できるようにランタイム環境を準備し、[開発者](#developer)がエクスペリエンスアプリケーションのコンテンツを取得または変更するAPIを使用できるようにします。[

#### コンテンツ作成者 {#content-author}

コンテンツ作成者は、AEMがヘッドレスに配信するコンテンツを作成し管理します。 コンテンツ作成者は、コンテンツフラグメントやアセットコンソールなどのAEM機能を使用してコンテンツを管理します。

コンテンツ作成者は、次のベストプラクティスに注意する必要があります。

#### ローカライゼーションの計画{#localization}

翻訳とローカライゼーションの計画は、プロジェクトの最初に立てます。 「国際化プロジェクトマネージャ」は、翻訳するコンテンツと翻訳しないコンテンツを定義し、その翻訳後のコンテンツを地域または地域のコンテンツ制作者が変更する役割を持つ個別の人物として考えてください。

必要なコンテンツローカライゼーションに関する計画を作成します。

* 地域固有の言語を採用するには、別の言語だけが必要ですか、それとも言語も必要ですか。
* 画像やビデオなどのリッチメディアコンテンツをロケールごとに異なるものにする必要がありますか。

コンテンツ更新ワークフローについては、明確に説明してください。 システムがサポートする必要がある承認プロセスは何ですか。 AEMワークフローを活用してこのプロセスを自動化できるか。

[コンテンツ階層](#content-hierarchy)を活用してローカライゼーションを容易にできることに注意してください。

AEMワークフローとローカライゼーションツールに関する追加ドキュメントについては、「[追加のリソース](#additional-resources)」の節を参照してください。

##### コンテンツ階層の活用{#content-hierarchy}

フォルダー階層は、コンテンツ管理に関する2つの主な問題に対処できます。

* [ローカライゼーション](#localization) - AEMは、コンテンツのコピーをロケール固有のフォルダーに保持することで、コンテンツのローカライゼーションを管理します。
* 組織 — フォルダーは、ローカライゼーションのニーズをサポートするために必要なコンテンツ階層を定義すると同時に、コンテンツフラグメントを論理的に管理するために使用します。

AEMでは非常に柔軟なコンテンツ構造が可能で、階層は任意に大きくできます。 ただし、フォルダー構造を変更すると、[がコンテンツパスに依存する既存のクエリに意図しない結果が生じる可能性があることに注意することが重要です。](#developer) したがって、明確に定義された階層が事前に明確に設定されている場合は、コンテンツ作成者にとって非常に役立ちます。

また、フォルダーを制限して、特定のタイプのコンテンツのみを許可することもできます（コンテンツフラグメントモデルに基づきます）。 通常は、階層内のすべてのフォルダで許可するモデルを必ず明示的に指定することをお勧めします。 特定のフォルダーに対して許可するコンテンツを指定する：

* フォルダーに属していないコンテンツをコンテンツ作成者がオーサリングできないようにします。
* 作成中にフォルダーで許可されたコンテンツのタイプをフィルタリングして、有効なタイプのコンテンツのみを表示することで、コンテンツ作成プロセスを最適化します。

適切なコンテンツ構造を作成することで、チャネル間でヘッドレスコンテンツのオーサリングを容易に調整し、コンテンツの再利用を最大限にすることができます。 複数のチャネルにわたるコンテンツの活用により、コンテンツの制作と変更管理の効率性が大幅に向上します。

##### 適切な命名規則の確立{#naming-conventions}

コンテンツフラグメント名は、コンテンツ作成者にとってわかりやすい名前にする必要があります。 AEMは、使用されたID名のエスケープや切り捨てをリポジトリレベルで透過的に処理します。 したがって、コンテンツ作成者が提供する論理名は、常に読み取り可能で、コンテンツを表す必要があります。

* 不正な名前：`cta_btn_1`
* Good Name:`Call To Action Button`

AEMページの命名規則に関する追加ドキュメントについては、「[追加のリソース](#additional-resources)」の節を参照してください。

##### コンテンツの入れ子を過度に過度にしない{#content-nesting}

[コンテンツ](#content-fragments) フラグメントは、AEMでヘッドレスコンテンツを作成する際に使用されます。AEMでは、コンテンツフラグメントに対して最大10レベルのコンテンツのネストをサポートしています。 ただし、AEMは親コンテンツフラグメントに定義された各参照を反復的に解決し、すべての兄弟に子参照が存在するかどうかを確認する必要があることに注意してください。 これらの操作は迅速に増加し、パフォーマンス上の問題となる可能性があります。

一般的な目安として、コンテンツフラグメント参照は5レベルを超える階層にネストしないでください。

#### コンテンツモデラー{#content-modeler}

コンテンツモデラーは、ヘッドレスに配信する必要のあるデータの要件を分析し、このデータの構造を定義します。 これらの構造体は、AEMでは[コンテンツフラグメントモデル](#content-fragment-models)と呼ばれます。 コンテンツフラグメントモデルは、コンテンツ作成者が作成するコンテンツフラグメントの基盤として使用されます。

コンテンツフラグメントモデルを定義する場合に便利なアプローチは、コンテンツを使用するアプリケーションのUXコンポーネントにマップするモデルを作成することです。

コンテンツ作成者は、新しいコンテンツを作成するたびにモデルとの対話を継続的に行うので、モデルをUXに合わせることで、結果として生じるデジタルエクスペリエンスを視覚化できます。 この配置をさらに進めて、UX要素を表すコンテンツフラグメントモデルにアイコンを割り当てると、作成者は視覚的なキューに基づいて適切なモデルを直感的に選択できます。

#### 開発者 {#developer}

開発者は、AEMで無責任に作成されるコンテンツをそのコンテンツの利用者に結合する責任があります。単一ページアプリ(SPA)、プログレッシブWebアプリ(PWA)、Webショップ、またはAEMの外部の他のサービスを使用する場合があります。

GraphQLは、AEMとヘッドレスコンテンツの利用者の「接着」の役割を果たします。 GraphQLは、AEMが必要なコンテンツをクエリするための言語です。

開発者は、クエリを計画する際に、次の基本的な推奨事項に留意する必要があります。

* クエリは、固定パス(`ByPath`)を使用してコンテンツフラグメントを取得しないでください。
   * [コンテンツ作成者は、コンテンツフラグメントの](#content-hierarchy) 階層を完全に制御でき、そのようなクエリを破るような変更を行うことができます。
   * 代わりに、クエリは、動的クエリパラメーターを持つコンテンツフラグメントモデル参照をオプトして、結果をフィルタリングし、目的のペイロードを生成する必要があります。
* 最高のクエリパフォーマンスを得るには、常にAEMで持続的なクエリを使用してください。 これらについては、ジャーニーで後述します。
* GraphQLは、「必要なものを求め、それを正確に得る」というモットに従って宣言的に設計されています。 つまり、GraphQLクエリを作成する場合は、リレーショナルデータベースで作成する`select *`型のクエリは必ず避けてください。

AEMを使用した[一般的なヘッドレス実装の場合、](#level-1)開発者はAEMのコーディング知識を必要としません。

### パフォーマンス要件{#performance-requirements}

どのプロジェクトも成功するためには、コンテンツを作成する前にパフォーマンスを考慮する必要があります。

ユーザーや訪問者が期待している内容や、それらに対するデザインを理解する必要があります。 SLO（Service Level Objective：サービス・レベル目標）を設定し、ユーザーの期待に応える場合に、SLOを測定して把握します。

#### トラフィックパターン{#traffic-patterns}

過去の知識を収集し、今後数年間で予測される成長に予測されるものを収集し、トラフィックおよびトラフィックのパターン開始を把握する。 最も重要な変数のいくつかを次に示します。

* 1時間/日/月に何回のAPI呼び出しが予想されますか。また、スパイクやシーズナリティが発生する可能性はありますか。
* コンテンツ作成者は何人いますか。
* 同時に作業する予定のコンテンツ作成者は何人ですか。
* コンテンツの更新頻度はどのくらいか
* いくつのコンテンツモデルが必要ですか。
* モデルのインスタンスはいくつ必要ですか。

#### 更新頻度{#update-frequency}

多くの場合、エクスペリエンスのセクションが異なると、コンテンツの更新頻度が異なります。 CDNとキャッシュの設定を微調整するには、これを理解することが重要です。 これは、コンテンツを表すモデルを設計する際に、[コンテンツモデラー](#content-modeler)にとって重要な入力でもあります。 考慮事項：

* 一部のタイプのコンテンツは、特定の期間の後に期限切れになる必要がありますか。
* ユーザー固有の要素があり、そのためキャッシュできないか。

## 次の作業{#what-is-next}

AEMヘッドレス開発者ジャーニーのこの部分が完了したら、次の作業を行う必要があります。

* AEMヘッドレス機能の基本を理解します。
* AEMヘッドレス機能の使用に関する前提条件を確認する。
* AEMヘッドレス統合レベルに注意してください。
* プロジェクトを範囲で定義できる。

必要なツールの設定方法とAEMでのデータのモデリングの始め方を学ぶ前に、「AEM headless](path-to-first-experience.md)を使用した初めてのエクスペリエンスへのパス」ドキュメントを確認し、AEMのヘッドレスジャーニーを続ける必要があります。[

## その他のリソース {#additional-resources}

「AEM headlessを使用した初めてのエクスペリエンスへのパス」ドキュメント[を確認して、ヘッドレス開発ジャーニーの次の部分に進むことをお勧めしますが、以下は、このドキュメントで述べられている概念をより深く掘り下げる追加のオプションリソースです。](path-to-first-experience.md)

* [Adobe Experience Manager建築をCloud Service](/help/core-concepts/architecture.md) -AEMをCloud Serviceの構造として理解
* [AEMヘッドレスTutorials](https://experienceleague.adobe.com/docs/experience-manager-learn/getting-started-with-aem-headless/overview.html?lang=ja)  — これらの実践的なチュートリアルを使用して、AEMのヘッドレスエンドポイントにコンテンツを配信する様々なオプションの使用方法を学び、最適なオプションを選択します。
* [GraphQL APIを使用したヘッドレスコンテンツ管理](https://experienceleague.adobe.com/?Solution=Experience+Manager&amp;Solution=Experience+Manager+Sites&amp;Solution=Experience+Manager+Forms&amp;Solution=Experience+Manager+Screens&amp;launch=ExperienceManager-D-1-2020.1.headless#courses) - AEMで実装されているGraphQL APIの概要については、このコースに従ってください。AdobeIDを使用した認証が必要です。
* [AEM Guides WKND - GraphQL](https://github.com/adobe/aem-guides-wknd-graphql)  — このGitHubプロジェクトには、AEM GraphQL APIをハイライトするサンプルアプリケーションが含まれています。
* [オーサリングの概念](/help/sites-cloud/authoring/getting-started/concepts.md) - AEMのオーサリング環境に関する技術ドキュメント（作成者と発行の設定の詳細を含む）
* [ページの公開](/help/sites-cloud/authoring/fundamentals/publishing-pages.md) - AEMでコンテンツを公開するための技術ドキュメント
* [命名規則](/help/implementing/developing/introduction/naming-conventions.md) - AEMでのページ命名の制限に関する技術文書
* [マルチサイトマネージャと翻訳](/help/sites-cloud/administering/msm-and-translation.md) - AEMの強力な翻訳機能に関する技術ドキュメント
* [AEMワークフロー](/help/sites-cloud/authoring/workflows/overview.md) - AEMでのワークフローの自動化方法に関する技術ドキュメント
* [コンテンツフラグメント](/help/assets/content-fragments/content-fragments.md)  — コンテンツフラグメントの技術ドキュメント。
* [コンテンツフラグメントモデル](/help/assets/content-fragments/content-fragments-models.md)  — コンテンツフラグメントモデルの技術ドキュメント。
* [GraphQLテクニカルドキュメント](https://graphql.org) - GraphQL定義（外部リンク）
* [GraphQL API](/help/assets/content-fragments/graphql-api-content-fragments.md)  — コンテンツフラグメントにアクセスして配信するリクエストを作成する方法を説明する技術ドキュメント
* [アセットREST API](/help/assets/content-fragments/assets-api-content-fragments.md)  — コンテンツフラグメント（およびその他のアセット）の作成および変更方法を説明する技術ドキュメント。
* [永続的なクエリ](/help/assets/content-fragments/graphql-api-content-fragments.md#persisted-queries-caching) - AEMで持続的なクエリに関する技術ドキュメント
* [headful and Headless in AEM](/help/implementing/developing/headful-headless.md)  -AEMで使用可能なヘッドレス統合レベルの詳細な説明
