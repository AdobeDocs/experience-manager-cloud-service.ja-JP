---
title: 環境の管理
description: 作成できる環境のタイプと、Cloud Manager プロジェクト用の環境の作成方法について説明します。
exl-id: 93fb216c-c4a7-481a-bad6-057ab3ef09d3
source-git-commit: cf1e2717342ca4e00780428d6ccf264bd8eca371
workflow-type: tm+mt
source-wordcount: '2276'
ht-degree: 37%

---


# 環境の管理 {#managing-environments}

作成できる環境のタイプと、Cloud Manager プロジェクト用の環境の作成方法について説明します。

## 環境タイプ {#environment-types}

必要な権限を持っているユーザーは、（特定のテナントで使用できる範囲内で）次のタイプの環境を作成できます。

* **実稼動環境とステージング環境** - 実稼動環境とステージング環境はペアとして使用でき、それぞれ実稼動およびテストのために使用されます。

* **開発**  — 開発環境は、開発およびテストの目的で作成でき、実稼動以外のパイプラインにのみ関連付けることができます。

* **急速な開発**  — 迅速なローカル開発環境 (RDE) を使用すると、開発者は変更を迅速にデプロイおよびレビューし、開発環境で動作すると証明された機能のテストに要する時間を最小限に抑えることができます。 詳しくは、 [迅速な開発環境ドキュメント](/help/implementing/developing/introduction/rapid-development-environments.md) を参照してください。

各環境の機能は、その環境の[プログラム](/help/implementing/cloud-manager/getting-access-to-aem-in-cloud/program-types.md)で有効になっているソリューションによって異なります。

* [Sites](/help/sites-cloud/home.md)
* [Assets](/help/assets/home.md)
* [Forms](/help/forms/home.md)
* [Screens](/help/screens-cloud/home.md)

>[!NOTE]
>
>実稼動環境とステージング環境はペアとしてのみ作成されます。ステージング環境や実稼動環境のみを作成することはできません。

## 環境の追加 {#adding-environments}

1. [my.cloudmanager.adobe.com](https://my.cloudmanager.adobe.com/) で Cloud Manager にログインし、適切な組織を選択します。

1. 環境を追加するプログラムをクリックします。

1. 次の **プログラムの概要** ページ、クリック **環境を追加** の **環境** カードを使用して環境を追加します。

   ![環境カード](assets/no-environments.png)

   * 「**環境を追加**」オプションは「**環境**」タブでも使用できます。

     ![「環境」タブ](assets/environments-tab.png)

   * 「**環境を追加**」オプションは、権限がない場合やライセンスされているリソースによっては、無効になっている場合があります。

1. 表示される&#x200B;**環境を追加**&#x200B;ダイアログで以下を行います。

   * 「[**環境タイプ**」を選択します。](#environment-types)
      * 使用可能な環境または使用中の環境の数は、環境タイプ名の後ろの括弧内に表示されます。
   * 「**環境名**」を入力します。
   * 「**環境の説明**」を入力します。
   * 次の場合に **実稼動+ステージ** 環境の場合は、実稼動環境とステージング環境の両方に対して、環境名と説明を指定する必要があります。
   * ドロップダウンから「**メイン地域**」を選択します。
      * 作成後に主領域を変更することはできません。
      * 使用可能な権限に応じて、次の設定が可能です。 [複数の地域](#multiple-regions).

   ![環境を追加ダイアログ](assets/add-environment2.png)

1. 「**保存**」をクリックして、指定された環境を追加します。

これで、**概要**&#x200B;画面の&#x200B;**環境**&#x200B;カードに新しい環境が表示されます。新しい環境にパイプラインを設定できるようになりました。

## 複数の公開地域 {#multiple-regions}

ユーザーが **ビジネスオーナー** の役割は、プライマリ領域に加えて、最大 3 つのパブリッシュ領域を追加で含めるように、実稼動環境とステージング環境を設定できます。 その他の公開領域を使用すると、可用性が向上します。 詳しくは、 [その他の公開地域ドキュメント](/help/operations/additional-publish-regions.md) を参照してください。

>[!TIP]
>
>以下を使用して、 [Cloud Manager API](https://developer.adobe.com/experience-cloud/cloud-manager/guides/api-usage/creating-programs-and-environments/#creating-aem-cloud-service-environments?lang=ja) をクリックして、使用可能な地域の現在のリストを照会します。

### 新しい環境への複数のパブリッシュ領域の追加 {#add-regions}

環境を追加する際に、主地域に加えて、追加の地域も設定できます。

1. を選択します。 **プライマリ域**.
   * 環境の作成後は、主領域を変更できません。
1. オプションを選択します。 **他の公開地域を追加する** 新しい **その他の公開地域** オプションドロップダウンが表示されます。
1. 内 **その他の公開地域** 」ドロップダウンで、追加の地域を選択します。
1. 選択した地域がドロップダウンの下に追加され、選択内容が示されます。
   * をタップまたはクリックします。 `X` をクリックします。
1. 別の地域を **その他の公開地域** ドロップダウンして別の地域を追加します。
1. タップまたはクリック **保存** 環境を作成する準備が整ったら、次の手順に従います。

![複数の地域の選択](assets/select-multiple-regions.png)

選択した地域は、実稼動環境とステージング環境の両方に適用されます。

追加の地域を指定しない場合、 [後で環境を作成した後で実行できます。](#edit-regions)

プロビジョニングする場合 [高度なネットワーク](/help/security/configuring-advanced-networking.md) プログラムの場合は、Cloud Manager API を使用して環境に公開領域を追加する前に、このプロビジョニングをおこなうことをお勧めします。 それ以外の場合は、追加のパブリッシュ地域のトラフィックがプライマリ地域のプロキシを通過します。

### 複数の公開地域の編集 {#edit-regions}

最初に追加の地域を指定しなかった場合は、必要な権限がある場合、環境の作成後に指定できます。

また、追加の公開領域を削除することもできます。 ただし、1 つのトランザクションで追加または削除できるのは、地域のみです。 1 つの地域を追加し、1 つの地域を削除する必要がある場合は、まず追加し、変更を保存してから、削除（または逆）します。

1. プログラムのプログラム概要コンソールから、実稼動環境の省略記号ボタンをクリックし、「 」を選択します。 **編集** を選択します。

   ![環境を編集](assets/select-edit-environment.png)

1. 内 **実稼動環境を編集** ダイアログで、追加のパブリッシュ領域に必要な変更を加えます。
   * 以下を使用： **その他の公開地域** 」ドロップダウンリストから、追加の地域を選択します。
   * 選択した追加の公開領域の横にある X をクリックして、その領域の選択を解除します。

   ![環境を編集](assets/edit-environment.png)

1. 「**保存**」をタップまたはクリックして、変更内容を保存します。

実稼動環境に対する変更は、実稼動環境とステージング環境の両方に適用されます。 複数のパブリッシュ領域に対する変更は、実稼動環境でのみ編集できます。

プロビジョニングする場合 [高度なネットワーク](/help/security/configuring-advanced-networking.md) プログラムの場合は、環境に公開領域を追加する前に、このプロビジョニングをおこなうことをお勧めします。 それ以外の場合は、追加のパブリッシュ地域のトラフィックがプライマリ地域のプロキシを経由します。

## 環境の詳細 {#viewing-environment}

以下を使用して、 **環境** カードを使用して、2 つの方法で環境の詳細にアクセスできます。

1. 次の **概要** ページで、 **環境** 」タブをクリックします。

   ![「環境」タブ](assets/environments-tab2.png)

   * または、 **すべて表示** ボタン **環境** 直接～に飛び乗るカード **環境** タブをクリックします。

     ![「すべて表示」オプション](assets/environment-showall.png)

1. **環境**&#x200B;が開いて、プログラムのすべての環境が一覧表示されます。

   ![「環境」タブ](assets/environment-view-2.png)

1. リスト内の環境をクリックすると、その環境の詳細が表示されます。

   ![環境の詳細](assets/environ-preview1.png)

または、目的とする環境の省略記号ボタンをクリックし、「**詳細を表示**」を選択します。

![環境の詳細を表示](assets/view-environment-details.png)

>[!NOTE]
>
>**環境**&#x200B;カードには 3 つの環境のみ表示されます。クリック **すべて表示** 前述のように、プログラムのすべての環境を表示します。

### プレビューサービスへのアクセス {#access-preview-service}

Cloud Manager は、各AEMas a Cloud Service環境に（追加のパブリッシュサービスとして提供される）プレビューサービスを提供します。

このサービスを使用すると、web サイトが実際のパブリッシュ環境に達して公開される前に、web サイトの最終的なエクスペリエンスをプレビューできます。

プレビューサービスの作成時には、デフォルトの IP許可リストが適用され、 `Preview Default [<envId>]`：プレビューサービスへのすべてのトラフィックをブロックします。 デフォルトの IP をプ許可リストレビューサービスから適用解除して、アクセスを有効にできます。

![プレビューサービスとその許可リスト](assets/preview-ip-allow.png)

必要な権限を持つユーザーは、プレビューサービスの URL を共有してアクセス権を確保する前に、次の手順を完了する必要があります。

1. 適切な IP を作許可リスト成し、それをプレビューサービスに適用し、直ちに `Preview Default [<envId>]` 許可リスト

   * 詳しくは、 [IP許可リストの適用と適用解除](/help/implementing/cloud-manager/ip-allow-lists/apply-allow-list.md) を参照してください。

1. **IP 許可リスト**&#x200B;の更新ワークフローを使用して、デフォルトの IP を削除し、必要に応じて IP を追加します。詳しくは、「[IP 許可リストの管理](/help/implementing/cloud-manager/ip-allow-lists/managing-ip-allow-lists.md)」を参照してください。

プレビューサービスへのアクセスをロック解除すると、プレビューサービス名の前にあるロックアイコンが表示されなくなります。

アクティブ化した後は、AEM 内の「公開を管理」UI を使用して、コンテンツをプレビューサービスに公開できます。詳しくは、 [コンテンツのプレビュー](/help/sites-cloud/authoring/fundamentals/previewing-content.md) を参照してください。

>[!NOTE]
>
>プレビューサービスを使用するには、環境が AEM バージョン `2021.05.5368.20210529T101701Z` 以降である必要があります。プレビューサービスを使用できるよう、環境で更新パイプラインが正常に実行されていることを確認します。

## 環境の更新 {#updating-dev-environment}

実稼動プログラム内のステージング環境と実稼動環境の更新は、クラウドネイティブなサービスなので、アドビが自動的に管理します。

ただし、開発環境とサンドボックスプログラム内の環境への更新は、プログラム内で管理されます。 そのような環境で最新の公開バージョンが実行されていない場合、AEM **環境** カード **概要** 番組の画面 **更新可能**.

![環境のアップデートステータス](assets/environ-update.png)

### アップデートとパイプライン {#updates-pipelines}

パイプラインは、[AEM as a Cloud Service の環境にコードをデプロイする](deploy-code.md)唯一の手段です。そのため、各パイプラインは特定の AEM バージョンに関連付けられています。

Cloud Manager が、パイプラインで最後にデプロイされたバージョンより新しいバージョンのAEMを検出した場合、 **更新可能** 環境のステータス。

したがって、更新プロセスは次の 2 つの手順で構成されます。

1. パイプラインを最新バージョンの AEM に更新する
1. パイプラインを実行して新しいバージョンの AEM を環境にデプロイする

### 環境の更新 {#updating-your-environments}

この **更新** オプションは、 **環境** サンドボックスプログラムの開発環境および環境用カードを表示するには、環境の省略記号ボタンをクリックします。

![環境カードの「更新」オプション](assets/environ-update2.png)

このオプションは、 **環境** 」タブをクリックし、環境の省略記号ボタンをクリックします。

![「環境」タブの「更新」オプション](assets/environ-update3.png)

**デプロイメントマネージャー**&#x200B;の役割を持つユーザーは、このオプションを使用して、この環境に関連付けられているパイプラインを最新の AEM バージョンに更新できます。

パイプラインのバージョンが公開済みの最新の AEM バージョンに更新されたら、ユーザーは、関連するパイプラインを実行して最新バージョンの AEM を環境にデプロイするように促されます。

![パイプラインを実行して環境を更新するように促すメッセージ](assets/update-run-pipeline.png)

「**更新**」オプションの動作は、プログラムの設定と現在の状態によって異なります。

* パイプラインが既に更新されている場合は、「**更新**」オプションを選択すると、パイプラインの実行をユーザーに促すメッセージが表示されます。
* パイプラインが既に更新中の場合は、「**更新**」オプションを選択すると、更新が既に実行中であることがユーザーに通知されます。
* 適切なパイプラインが存在しない場合は、「**更新**」オプションを選択すると、パイプラインの作成をユーザーに促すメッセージが表示されます。

## 開発環境の削除 {#deleting-environment}

必要な権限を持つユーザーは、開発環境を削除できます。

次の **概要** 上の番組の画面 **環境** 「 」カードで、削除する開発環境の省略記号ボタンをクリックします。

![「削除」オプション](assets/environ-delete.png)

「削除」オプションは、プログラムの&#x200B;**概要**&#x200B;ウィンドウの「**環境**」タブでも使用できます。環境の省略記号ボタンをクリックし、「 」を選択します。 **削除**.

![「環境」タブの「削除」オプション](assets/environ-delete2.png)

>[!NOTE]
>
>* 実稼動プログラムで作成された実稼動環境とステージング環境は削除できません。
>* サンドボックスプログラム内の実稼動環境とステージング環境は削除できます。

## アクセスの管理 {#managing-access}

**環境**&#x200B;カードで環境の省略記号メニューから「**アクセスを管理**」を選択します。オーサーインスタンスに直接移動して、環境のアクセスを管理できます。

![「アクセスを管理」オプション](assets/environ-access.png)

>[!TIP]
>
>詳しくは、 [AEMas a Cloud Serviceのチームおよび製品プロファイル](/help/onboarding/aem-cs-team-product-profiles.md) AEMas a Cloud Serviceのチームおよび製品プロファイルがライセンスを持つAdobeソリューションに対してアクセスを許可および制限する方法を学習する場合。

## 開発者コンソールへのアクセス {#accessing-developer-console}

**環境**&#x200B;カードで環境の省略記号メニューから「**開発者コンソール**」を選択します。ブラウザーに新しいタブが開き、 **開発者コンソール**.

![開発者コンソールにログインします。](assets/environ-devconsole.png)

ユーザーのみ **開発者** ロールは、 **開発者コンソール**. ただし、サンドボックスプログラムの場合、サンドボックスプログラムにアクセスできるすべてのユーザーは、 **開発者コンソール**.

詳しくは、 [サンドボックス環境の休止と休止解除](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/implementing/using-cloud-manager/programs/introduction-sandbox-programs.html#hibernation) を参照してください。

このオプションは、**概要**&#x200B;ウィンドウの「**環境**」タブで個々の環境の省略記号メニューからも使用できます。

## ローカルログイン {#login-locally}

選択 **ローカルログイン** を選択します。 **環境** カードを使用して、Adobe Experience Managerにローカルでログオンできるようにします。

![ローカルログイン](assets/environ-login-locally.png)

また、 **環境** タブ **概要** ページ。

![「環境」タブからのローカルログイン](assets/environ-login-locally-2.png)

## カスタムドメイン名の管理 {#manage-cdn}

Cloud Manager では、Sites プログラムのパブリッシュサービスとプレビューサービスの両方に対してカスタムドメイン名がサポートされています。各 Cloud Manager 環境は、最大 250 個のカスタムドメインをホストできます。

カスタムドメイン名を設定するには、 **環境** 「 」タブをクリックし、環境をクリックして、環境の詳細を表示します。

![環境の詳細](assets/domain-names.png)

使用している環境のパブリッシュサービスに対して、次のアクションを実行できます。

* [カスタムドメイン名の追加](/help/implementing/cloud-manager/custom-domain-names/add-custom-domain-name.md)

* [カスタムドメイン名の管理](/help/implementing/cloud-manager/custom-domain-names/managing-custom-domain-names.md)

* [カスタムドメイン名のステータスの確認](/help/implementing/cloud-manager/custom-domain-names/check-domain-name-status.md#pre-existing-cdn)または [SSL 証明書のステータスの確認](/help/implementing/cloud-manager/managing-ssl-certifications/managing-certificates.md#pre-existing-cdn)

* [IP 許可リストの管理](/help/implementing/cloud-manager/ip-allow-lists/managing-ip-allow-lists.md#pre-existing-cdn)


## IP 許可リストの管理 {#manage-ip-allow-lists}

Cloud Manager で許可リストは、Sites プログラムのオーサー、パブリッシュ、プレビューサービスに対して IP がサポートされています。

IP を管許可リスト理するには、 **環境** タブ **概要** ページを開きます。 個々の環境をクリックして、その詳細を管理できます。

### IP 許可リストの適用 {#apply-ip-allow-list}

IP を適用す許可リストると、環境内のオーサーサービスまたはパブリッシュサービスに、の定義に含まれるすべての IP 範囲が関連付けられま許可リストす。 ユーザーの **ビジネスオーナー** または **デプロイメントマネージャー** IP ロールを適用するには、ロールをログインする必要があり許可リストます。

IP を環境に適用するに許可リストは、Cloud Manager に IP タグが存在する必要があります。 Cloud Manager での IP許可リストについて詳しくは、 [Cloud Manager での IP許可リストの概要](/help/implementing/cloud-manager/ip-allow-lists/introduction.md).

**IP を適用するには、次の手順に従い許可リストます。**

1. プログラムの&#x200B;**概要**&#x200B;画面の「**環境**」タブから特定の環境に移動し、**IP 許可リスト**&#x200B;テーブルに移動します。
1. IP テーブルの上部にある入力フィールドを使用し許可リストて、IP と、その IP テンプレートを適用するオーサーサービスまたはパブリッシュサービスを選択できるようにします。
1. 「**適用**」をクリックし、送信を確認します。

### IP の適用許可リスト解除 {#unapply-ip-allow-list}

IP を適用しな許可リストいと、環境内のオーサーまたはパブリッシャーサービスから、の定義に含まれるすべての IP 範囲が関連付け解除されま許可リストす。 ユーザーの **ビジネスオーナー** または **デプロイメントマネージャー** IP の適用を解除するには、の役割をログインする必要があり許可リストます。

**IP 適用を解除するには、次の手順に許可リスト従います。**

1. プログラムの&#x200B;**概要**&#x200B;画面の「**環境**」タブから特定の環境に移動し、**IP 許可リスト**&#x200B;テーブルに移動します。
1. 適用を解除する IP許可リスト・ルールが表示されている行を特定します。
1. その行の末尾の省略記号ボタンをクリックします。
1. 「**適用解除**」を選択し、送信を確認します。
