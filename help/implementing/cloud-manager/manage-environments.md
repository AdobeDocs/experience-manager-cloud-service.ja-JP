---
title: 環境の管理
description: 作成できる環境のタイプと、Cloud Manager プロジェクト用に環境を作成する方法について説明します。
exl-id: 93fb216c-c4a7-481a-bad6-057ab3ef09d3
source-git-commit: ecc15501b6187380c2039afdf68cbef909c54721
workflow-type: tm+mt
source-wordcount: '2302'
ht-degree: 78%

---


# 環境の管理 {#managing-environments}

作成できる環境のタイプと、Cloud Manager プロジェクト用に環境を作成する方法について説明します。

## 環境タイプ {#environment-types}

必要な権限を持っているユーザーは、（特定のテナントで使用できる範囲内で）次のタイプの環境を作成できます。

* **実稼動環境とステージング環境** - 実稼動環境とステージング環境はペアとして使用でき、それぞれ実稼動およびテストのために使用されます。

* **開発環境**：開発環境は、開発およびテストのために構築でき、実稼動以外のパイプラインにのみ関連付けることができます。

* **迅速な開発** - 迅速な開発環境（RDE）を使用すると、開発者は、ローカル開発環境での動作が証明済みの機能に要するテスト時間を最小限に抑え、変更を迅速にデプロイおよび確認できます。RDE の使用方法について詳しくは、[迅速な開発環境ドキュメント](/help/implementing/developing/introduction/rapid-development-environments.md)を参照してください。

各環境の機能は、その環境の[プログラム](/help/implementing/cloud-manager/getting-access-to-aem-in-cloud/program-types.md)で有効になっているソリューションによって異なります。

* [Sites](/help/sites-cloud/home.md)
* [Assets](/help/assets/home.md)
* [Forms](/help/forms/home.md)
* [Screens](/help/screens-cloud/home.md)

>[!NOTE]
>
>実稼動環境とステージング環境はペアとしてのみ作成されます。ステージング環境または実稼動環境のどちらか一方のみを作成することはできません。

## 環境の追加 {#adding-environments}

1. [my.cloudmanager.adobe.com](https://my.cloudmanager.adobe.com/) で Cloud Manager にログインし、適切な組織を選択します。

1. 環境を追加するプログラムをクリックします。

1. **プログラムの概要**&#x200B;ページで、**環境**&#x200B;カードの「**環境を追加**」をクリックして環境を追加します。

   ![環境カード](assets/no-environments.png)

   * 「**環境を追加**」オプションは「**環境**」タブでも使用できます。

      ![「環境」タブ](assets/environments-tab.png)

   * 「**環境を追加**」オプションは、権限がない場合やライセンスされているリソースによっては、無効になっている場合があります。

1. 表示される&#x200B;**環境を追加**&#x200B;ダイアログで以下を行います。

   * 「[**環境タイプ**」を選択します。](#environment-types)
      * 使用可能な環境または使用中の環境の数は、環境タイプ名の後ろの括弧内に表示されます。
   * 「**環境名**」を入力します。
   * 「**環境の説明**」を入力します。
   * 次の場合に **実稼動+ステージ** 環境の場合は、実稼動環境とステージング環境の両方に対して、環境名と説明を指定する必要があります。
   * ドロップダウンから「**メイン地域**」を選択します。
      * 作成後に変更することはできません。
      * 使用可能な権限に応じて、次の設定が可能です。 [複数の地域。](#multiple-regions)

   ![環境を追加ダイアログ](assets/add-environment2.png)

1. 「**保存**」をクリックして、指定された環境を追加します。

これで、**概要**&#x200B;画面の&#x200B;**環境**&#x200B;カードに新しい環境が表示されます。新しい環境にパイプラインを設定できるようになりました。

## 複数の公開地域 {#multiple-regions}

ユーザーが **ビジネスオーナー** の役割では、プライマリ領域に加えて、最大 3 つのパブリッシュ領域を含めるように、実稼動環境とステージング環境を設定できます。 その他の公開領域を使用すると、可用性が向上します。 詳しくは、 [その他の公開地域ドキュメント](/help/operations/additional-publish-regions.md) を参照してください。

>[!TIP]
>
>以下を使用して、 [Cloud Manager API](https://developer.adobe.com/experience-cloud/cloud-manager/guides/api-usage/creating-programs-and-environments/#creating-aem-cloud-service-environments?lang=ja) をクリックして、使用可能な地域の現在のリストを照会します。

### 新しい環境への複数のパブリッシュ領域の追加 {#add-regions}

新しい環境を追加する場合、主要地域に加えて、追加の地域も設定できます。

1. を選択します。 **プライマリ域**.
   * これは、環境の作成後は変更できません。
1. オプションを選択します。 **他の公開地域を追加する** 新しい **その他の公開地域** 」ドロップダウンが表示されます。
1. 内 **その他の公開地域** 」ドロップダウンで、追加の地域を選択します。
1. 選択した地域がドロップダウンの下に追加され、選択内容が示されます。
   * 選択した領域の横にある「 X 」をタップまたはクリックすると、その領域の選択を解除できます。
1. 別の地域を **その他の公開地域** ドロップダウンして別の地域を追加します。
1. タップまたはクリック **保存** 環境を作成する準備が整ったら、次の手順に従います。

![複数の地域の選択](assets/select-multiple-regions.png)

選択した地域は、実稼動環境とステージング環境の両方に適用されます。

追加の地域を指定しない場合、 [後で環境を作成した後で実行できます。](#edit-regions)

プロビジョニングをおこなう場合 [高度なネットワーク](/help/security/configuring-advanced-networking.md) プログラムの場合は、Cloud Manager API を使用して環境に公開領域を追加する前に、この操作をおこなうことをお勧めします。 そうしないと、追加のパブリッシュ地域のトラフィックがプライマリ地域のプロキシを経由します。

### 複数の公開地域の編集 {#edit-regions}

最初に追加の地域を指定しなかった場合は、必要な権限がある場合、環境の作成後に指定できます。

また、追加の公開領域を削除することもできます。 ただし、1 つのトランザクションで追加または削除できるのは、地域のみです。 1 つの地域を追加し、1 つの地域を削除する必要がある場合は、まず追加し、変更を保存してから削除します（またはその逆も同様です）。

1. プログラムのプログラム概要コンソールから、実稼動環境の省略記号ボタンをクリックし、「 」を選択します。 **編集** を選択します。

   ![環境を編集](assets/select-edit-environment.png)

1. 内 **実稼動環境を編集** ダイアログで、追加のパブリッシュ領域に必要な変更を加えます。
   * 以下を使用： **その他の公開地域** 」ドロップダウンリストから、追加の地域を選択します。
   * 選択した追加の公開領域の横にある X をクリックして、その領域の選択を解除します。

   ![環境を編集](assets/edit-environment.png)

1. 「**保存**」をタップまたはクリックして、変更内容を保存します。

実稼動環境に対する変更は、実稼動環境とステージング環境の両方に適用されます。 複数のパブリッシュ領域に対する変更は、実稼動環境でのみ編集できます。

プロビジョニングをおこなう場合 [高度なネットワーク](/help/security/configuring-advanced-networking.md) プログラムの場合は、環境にパブリッシュ領域を追加する前に、この操作を行うことをお勧めします。 そうしないと、追加のパブリッシュ地域のトラフィックがプライマリ地域のプロキシを経由します。

## 環境の詳細 {#viewing-environment}

概要ページの&#x200B;**環境**&#x200B;カードを使用して、２ 通りの方法で環境の詳細にアクセスできます。

1. 次の **概要**&#x200B;ページで、画面上部の「**環境**」タブをクリックします。

   ![「環境」タブ](assets/environments-tab2.png)

   * または、**環境**&#x200B;カードの「**すべて表示**」ボタンをクリックして、「**環境**」タブに直接ジャンプします。

      ![「すべて表示」オプション](assets/environment-showall.png)

1. **環境**&#x200B;が開いて、プログラムのすべての環境が一覧表示されます。

   ![「環境」タブ](assets/environment-view-2.png)

1. リスト内の環境をクリックすると、その環境の詳細が表示されます。

   ![環境の詳細](assets/environ-preview1.png)

または、目的とする環境の省略記号ボタンをクリックし、「**詳細を表示**」を選択します。

![環境の詳細を表示](assets/view-environment-details.png)

>[!NOTE]
>
>**環境**&#x200B;カードには 3 つの環境のみ表示されます。前述のように「**すべて表示**」ボタンをクリックすると、プログラムのすべての環境が表示されます。

### プレビューサービスへのアクセス {#access-preview-service}

Cloud Manager は、各 AEM as a Cloud Service 環境に（追加のパブリッシュサービスとして）プレビューサービスを提供します。

このサービスを使用すると、web サイトが実際のパブリッシュ環境に達して公開される前に、web サイトの最終的なエクスペリエンスをプレビューできます。

作成時に、プレビューサービスには、`Preview Default [<envId>]` というラベルの付いたデフォルトの IP 許可リストが適用されます。これはプレビューサービスへのすべてのトラフィックをブロックします。アクセスを有効にするには、プレビューサービスに適用されたデフォルトの IP 許可リストを能動的に解除する必要があります。

![プレビューサービスとその許可リスト](assets/preview-ip-allow.png)

必要な権限を持つユーザーは、プレビューサービスの URL を共有する前に、次の手順を完了して、URL に確実にアクセスできるようにする必要があります。

1. 適切な IP 許可リストを作成してプレビューサービスに適用し、`Preview Default [<envId>]` 許可リストの適用を直ちに解除します。

   * 詳しくは、[IP 許可リストの適用と適用解除](/help/implementing/cloud-manager/ip-allow-lists/apply-allow-list.md)ドキュメントを参照してください。

1. **IP 許可リスト**&#x200B;の更新ワークフローを使用して、デフォルトの IP を削除し、必要に応じて IP を追加します。詳しくは、「[IP 許可リストの管理](/help/implementing/cloud-manager/ip-allow-lists/managing-ip-allow-lists.md)」を参照してください。

プレビューサービスへのアクセスをロック解除すると、プレビューサービス名の前にあるロックアイコンは表示されなくなります。

アクティブ化した後は、AEM 内の「公開を管理」UI を使用して、コンテンツをプレビューサービスに公開できます。詳しくは、[コンテンツのプレビュー](/help/sites-cloud/authoring/fundamentals/previewing-content.md)のドキュメントを参照してください。

>[!NOTE]
>
>プレビューサービスを使用するには、環境が AEM バージョン `2021.05.5368.20210529T101701Z` 以降である必要があります。そのためには、更新パイプラインが環境で正常に実行されていることを確認します。

## 環境の更新 {#updating-dev-environment}

実稼動プログラム内のステージング環境と実稼動環境の更新は、クラウドネイティブなサービスなので、アドビが自動的に管理します。

ただし、開発環境およびサンドボックスプログラム内の環境の更新は、プログラム内で管理されます。そのような環境で AEM の最新の公開バージョンが動作していない場合、プログラムの&#x200B;**概要**&#x200B;画面で&#x200B;**環境**&#x200B;カードのステータスには&#x200B;**アップデート利用可能**&#x200B;と表示されます。

![環境のアップデートステータス](assets/environ-update.png)

### アップデートとパイプライン {#updates-pipelines}

パイプラインは、[AEM as a Cloud Service の環境にコードをデプロイする](deploy-code.md)唯一の手段です。そのため、各パイプラインは特定の AEM バージョンに関連付けられています。

パイプラインで前回デプロイされた AEM よりも新しいバージョンの AEM が使用可能であることが Cloud Manager で検出された場合は、環境のステータスが&#x200B;**アップデート利用可能**&#x200B;と表示されます。

したがって、更新プロセスは次の 2 つの手順で構成されます。

1. パイプラインを最新バージョンの AEM に更新する
1. パイプラインを実行して新しいバージョンの AEM を環境にデプロイする

### 環境の更新 {#updating-your-environments}

「**更新**」オプションは、開発環境およびサンドボックスプログラム内の環境の&#x200B;**環境**&#x200B;カードで環境の省略記号ボタンをクリックして使用できます。

![環境カードの「更新」オプション](assets/environ-update2.png)

このオプションは、プログラムの「**環境**」タブをクリックしたあと環境の省略記号ボタンをクリックしても使用できます。

![「環境」タブの「更新」オプション](assets/environ-update3.png)

**デプロイメントマネージャー**&#x200B;の役割を持つユーザーは、このオプションを使用して、この環境に関連付けられているパイプラインを最新の AEM バージョンに更新できます。

パイプラインのバージョンが公開済みの最新の AEM バージョンに更新されたら、ユーザーは、関連するパイプラインを実行して最新バージョンの AEM を環境にデプロイするように促されます。

![パイプラインを実行して環境を更新するように促すメッセージ](assets/update-run-pipeline.png)

「**更新**」オプションの動作は、プログラムの設定と現在の状態によって異なります。

* パイプラインが既に更新されている場合は、「**更新**」オプションを選択すると、パイプラインの実行をユーザーに促すメッセージが表示されます。
* パイプラインが既に更新中の場合は、「**更新**」オプションを選択すると、更新が既に実行中であることがユーザーに通知されます。
* 適切なパイプラインが存在しない場合は、「**更新**」オプションを選択すると、パイプラインの作成をユーザーに促すメッセージが表示されます。

## 開発環境の削除 {#deleting-environment}

必要な権限を持つユーザーは、開発環境を削除できます。

**環境**&#x200B;カードのプログラムの&#x200B;**概要**&#x200B;画面で、削除する開発環境の省略記号ボタンをクリックします。

![「削除」オプション](assets/environ-delete.png)

「削除」オプションは、プログラムの&#x200B;**概要**&#x200B;ウィンドウの「**環境**」タブでも使用できます。環境の省略記号ボタンをクリックし、「**削除**」を選択します。

![「環境」タブの「削除」オプション](assets/environ-delete2.png)

>[!NOTE]
>
>* 実稼動プログラムに作成された実稼動環境とステージング環境は削除できません。
>* サンドボックスプログラム内の実稼動環境とステージング環境は削除できます。


## アクセスの管理 {#managing-access}

**環境**&#x200B;カードで環境の省略記号メニューから「**アクセスを管理**」を選択します。オーサーインスタンスに直接移動して、環境のアクセスを管理できます。

![「アクセスを管理」オプション](assets/environ-access.png)

## 開発者コンソールへのアクセス {#accessing-developer-console}

**環境**&#x200B;カードで環境の省略記号メニューから「**開発者コンソール**」を選択します。ブラウザーに新しいタブが開き、**開発者コンソール**&#x200B;へのログインページが表示されます。

![](assets/environ-devconsole.png)

**開発者コンソール**&#x200B;にアクセスできるのは、**開発者**&#x200B;の役割を持つユーザーだけです。ただし、サンドボックスプログラムの場合は、そのサンドボックスプログラムにアクセスできるユーザーは誰でも、**開発者コンソール**&#x200B;にアクセスできます。

詳しくは、[サンドボックス環境の休止と休止解除](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/onboarding/getting-access/cloud-service-programs/sandbox-programs.html?lang=ja#hibernating-introduction)のドキュメントを参照してください。

このオプションは、**概要**&#x200B;ウィンドウの「**環境**」タブで個々の環境の省略記号メニューからも使用できます。

## ローカルログイン {#login-locally}

**環境**&#x200B;カードで環境の省略記号メニューから「**ローカルログイン**」を選択して、Adobe Experience Manager にローカルにログインします。

![ローカルログイン](assets/environ-login-locally.png)

さらに、**概要**&#x200B;ページの「**環境**」タブからもローカルにログインできます。

![「環境」タブからのローカルログイン](assets/environ-login-locally-2.png)

## カスタムドメイン名の管理 {#manage-cdn}

Cloud Manager では、Sites プログラムのパブリッシュサービスとプレビューサービスの両方に対してカスタムドメイン名がサポートされています。各 Cloud Manager 環境は、最大 250 個のカスタムドメインをホストできます。

カスタムドメイン名を設定するには、「**環境**」タブに移動し、環境をクリックして環境の詳細を表示します。

![環境の詳細](assets/domain-names.png)

使用している環境のパブリッシュサービスに対して、次のアクションを実行できます。

* [カスタムドメイン名の追加](/help/implementing/cloud-manager/custom-domain-names/add-custom-domain-name.md)

* [カスタムドメイン名の管理](/help/implementing/cloud-manager/custom-domain-names/managing-custom-domain-names.md)

* [カスタムドメイン名のステータスの確認](/help/implementing/cloud-manager/custom-domain-names/check-domain-name-status.md#pre-existing-cdn)または [SSL 証明書のステータスの確認](/help/implementing/cloud-manager/managing-ssl-certifications/managing-certificates.md#pre-existing-cdn)

* [IP 許可リストの管理](/help/implementing/cloud-manager/ip-allow-lists/managing-ip-allow-lists.md#pre-existing-cdn)


## IP 許可リストの管理 {#manage-ip-allow-lists}

Cloud Manager では、Sites プログラムのオーサーサービス、パブリッシュサービスおよびプレビューサービスで IP 許可リストがサポートされています。

IP 許可リストを管理するには、プログラムの&#x200B;**概要**&#x200B;ページの「**環境**」タブに移動します。個々の環境をクリックして、その詳細を管理します。

### IP 許可リストの適用 {#apply-ip-allow-list}

IP 許可リストを適用すると、許可リストの定義に含まれているすべての IP 範囲が環境のオーサーサービスまたはパブリッシュサービスに関連付けられます。IP 許可リストを適用するには、**ビジネスオーナー**&#x200B;または&#x200B;**デプロイメントマネージャー**&#x200B;の役割を持つユーザーがログインする必要があります。

IP 許可リストを環境に適用するには、その IP 許可リストが Cloud Manager に存在する必要があります。Cloud Manager での IP 許可リストについて詳しくは、[概要 - Could Manager での IP 許可リスト](/help/implementing/cloud-manager/ip-allow-lists/introduction.md)のドキュメントを参照してください。

IP 許可リストを適用するには、次の手順に従います。

1. プログラムの&#x200B;**概要**&#x200B;画面の「**環境**」タブから特定の環境に移動し、**IP 許可リスト**&#x200B;テーブルに移動します。
1. IP 許可リストテーブルの上部にある入力フィールドを使用して、IP 許可リストと、その適用先となるオーサーサービスまたはパブリッシュサービスを選択します。
1. 「**適用**」をクリックし、送信を確認します。

### IP 許可リストの適用解除 {#unapply-ip-allow-list}

IP 許可リストの適用を解除すると、許可リストの定義に含まれているすべての IP 範囲と、環境のオーサーサービスまたはパブリッシュサービスとの関連付けが解除されます。IP 許可リストの適用を解除するには、**ビジネスオーナー**&#x200B;または&#x200B;**デプロイメントマネージャー**&#x200B;の役割を持つユーザーがログインする必要があります。

IP 許可リストの適用を解除するには、次の手順に従います。

1. プログラムの&#x200B;**概要**&#x200B;画面の「**環境**」タブから特定の環境に移動し、**IP 許可リスト**&#x200B;テーブルに移動します。
1. 適用を解除する IP 許可リストルールが表示されている行を見つけます。
1. その行の末尾の省略記号ボタンをクリックします。
1. 「**適用解除**」を選択し、送信を確認します。
