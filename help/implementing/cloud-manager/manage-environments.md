---
title: 環境の管理
description: 作成できる環境のタイプと、Cloud Manager プロジェクト用に環境を作成する方法について説明します。
exl-id: 93fb216c-c4a7-481a-bad6-057ab3ef09d3
source-git-commit: 7174b398040acbf9b18b5ac2aa20fdba4f98ca78
workflow-type: tm+mt
source-wordcount: '0'
ht-degree: 0%

---

# 環境の管理 {#managing-environments}

作成できる環境のタイプと、Cloud Manager プロジェクト用に環境を作成する方法について説明します。

## 環境タイプ {#environment-types}

必要な権限を持っているユーザーは、（特定のテナントで使用できる範囲内で）次のタイプの環境を作成できます。

* **実稼動環境とステージング環境** - 実稼動環境とステージング環境はペアとして使用でき、それぞれ実稼動およびテストのために使用されます。

* **開発環境**：開発環境は、開発およびテストのために構築でき、実稼動以外のパイプラインにのみ関連付けることができます。


個々の環境の機能は、その環境を含んでいる[プログラム](/help/implementing/cloud-manager/getting-access-to-aem-in-cloud/program-types.md)で有効になっているソリューションによって異なります。

* [Sites](/help/sites-cloud/home.md)
* [Assets](/help/assets/home.md)
* [Forms](/help/forms/home.md)
* [Screens](/help/screens-cloud/home.md)

>[!NOTE]
>
>実稼動環境とステージング環境はペアとしてのみ作成されます。ステージング環境または実稼動環境のどちらか一方のみを作成することはできません。

## 環境の追加 {#adding-environments}

1. [my.cloudmanager.adobe.com](https://my.cloudmanager.adobe.com/) で Cloud Manager にログインし、適切な組織を選択します。

1. 環境を追加するプログラムをクリックします。

1. **プログラムの概要**&#x200B;ページで、**環境**&#x200B;カードの「**環境を追加**」をクリックして環境を追加します。

   ![環境カード](assets/no-environments.png)

   * 「**環境を追加**」オプションは「**環境**」タブでも使用できます。

      ![「環境」タブ](assets/environments-tab.png)

   * 「**環境を追加**」オプションは、権限がない場合やライセンスされているリソースによっては、無効になっている場合があります。

1. 表示される&#x200B;**環境を追加**&#x200B;ダイアログで以下を行います。

   * 「**環境タイプ**」を選択します。
      * 使用可能/使用済み環境の数は、「開発環境」タイプの後ろの括弧内に表示されます。
   * 「**環境名**」を入力します。
   * 「**環境の説明**」を入力します。
   * 「**クラウドリージョン**」を選択します。

   ![環境を追加ダイアログ](assets/add-environment2.png)

1. 「**保存**」をクリックして、指定された環境を追加します。

これで、**概要**&#x200B;画面の&#x200B;**環境**&#x200B;カードに新しい環境が表示されます。新しい環境にパイプラインを設定できるようになりました。

## 環境の詳細 {#viewing-environment}

概要ページの&#x200B;**環境**&#x200B;カードを使用して、２ 通りの方法で環境の詳細にアクセスできます。

1. 次の **概要**&#x200B;ページで、画面上部の「**環境**」タブをクリックします。

   ![「環境」タブ](assets/environments-tab2.png)

   * または、**環境**&#x200B;カードの「**すべて表示**」ボタンをクリックして、「**環境**」タブに直接ジャンプします。

      ![「すべて表示」オプション](assets/environment-showall.png)

1. **環境**&#x200B;が開いて、プログラムのすべての環境が一覧表示されます。

   ![「環境」タブ](assets/environment-view-2.png)

1. リスト内の環境をクリックすると、その環境の詳細が表示されます。

   ![環境の詳細](assets/environ-preview1.png)

または、目的とする環境の省略記号ボタンをクリックし、「**詳細を表示**」を選択します。

![環境の詳細を表示](assets/view-environment-details.png)

>[!NOTE]
>
>**環境**&#x200B;カードには 3 つの環境のみ表示されます。前述のように「**すべて表示**」ボタンをクリックすると、プログラムのすべての環境が表示されます。

### プレビューサービスへのアクセス {#access-preview-service}

Cloud Manager は、各 AEM as a Cloud Service 環境に（追加のパブリッシュサービスとして）プレビューサービスを提供します。

このサービスを使用すると、web サイトが実際のパブリッシュ環境に達して公開される前に、web サイトの最終的なエクスペリエンスをプレビューできます。

作成時に、プレビューサービスには、`Preview Default [<envId>]` というラベルの付いたデフォルトの IP 許可リストが適用されます。これはプレビューサービスへのすべてのトラフィックをブロックします。アクセスを有効にするには、プレビューサービスに適用されたデフォルトの IP 許可リストを能動的に解除する必要があります。

![プレビューサービスとその許可リスト](assets/preview-ip-allow.png)

必要な権限を持つユーザーがプレビュー URL に確実にアクセスできるようにするには、プレビューサービス URL を任意のチームと共有する前に、次のオプションの手順を完了する必要があります。

1. 適切な IP 許可リストを作成してプレビューサービスに適用し、`Preview Default [<envId>]` 許可リストの適用を直ちに解除します。

   * 詳しくは、[IP 許可リストの適用と適用解除](/help/implementing/cloud-manager/ip-allow-lists/apply-allow-list.md)ドキュメントを参照してください。

1. **IP 許可リスト**&#x200B;の更新ワークフローを使用して、デフォルトの IP を削除し、必要に応じて IP を追加します。詳しくは、「[IP 許可リストの管理](/help/implementing/cloud-manager/ip-allow-lists/managing-ip-allow-lists.md)」を参照してください。

プレビューサービスへのアクセスをロック解除すると、プレビューサービス名の前にあるロックアイコンは表示されなくなります。

アクティブ化した後は、AEM 内の「公開を管理」UI を使用して、コンテンツをプレビューサービスに公開できます。詳しくは、[コンテンツのプレビュー](/help/sites-cloud/authoring/fundamentals/previewing-content.md)のドキュメントを参照してください。

>[!NOTE]
>
>お使いの環境が AEM バージョン `2021.05.5368.20210529T101701Z` 以降をベースにしている必要があります。そのためには、更新パイプラインが環境で正常に実行されていることを確認します。

## 環境の更新 {#updating-dev-environment}

実稼動プログラム内のステージング環境と実稼動環境の更新は、クラウドネイティブなサービスなので、アドビが自動的に管理します。

ただし、開発環境およびサンドボックスプログラム内の環境の更新は、プログラム内で管理されます。そのような環境で AEM の最新の公開バージョンが動作していない場合、プログラムの&#x200B;**概要**&#x200B;画面で&#x200B;**環境**&#x200B;カードのステータスには&#x200B;**アップデート利用可能**&#x200B;と表示されます。

![環境のアップデートステータス](assets/environ-update.png)

### アップデートとパイプライン {#updates-pipelines}

パイプラインは、[AEM as a Cloud Service の環境にコードをデプロイする](deploy-code.md)唯一の手段です。そのため、各パイプラインは特定の AEM バージョンに関連付けられています。

パイプラインで前回デプロイされた AEM よりも新しいバージョンの AEM が使用可能であることが Cloud Manager で検出された場合は、環境のステータスが&#x200B;**アップデート利用可能**&#x200B;と表示されます。

したがって、更新プロセスは次の 2 つの手順で構成されます。

1. パイプラインを最新バージョンの AEM に更新する
1. パイプラインを実行して新しいバージョンの AEM を環境にデプロイする

### 環境の更新 {#updating-your-environments}

「**更新**」オプションは、開発環境およびサンドボックスプログラム内の環境の&#x200B;**環境**&#x200B;カードで環境の省略記号ボタンをクリックして使用できます。

![環境カードの「更新」オプション](assets/environ-update2.png)

このオプションは、プログラムの「**環境**」タブをクリックしたあと環境の省略記号ボタンをクリックしても使用できます。

![「環境」タブの「更新」オプション](assets/environ-update3.png)

**デプロイメントマネージャー**&#x200B;の役割を持つユーザーは、このオプションを使用して、この環境に関連付けられているパイプラインを最新の AEM バージョンに更新できます。

パイプラインのバージョンが公開済みの最新の AEM バージョンに更新されたら、ユーザーは、関連するパイプラインを実行して最新バージョンの AEM を環境にデプロイするように促されます。

![パイプラインを実行して環境を更新するように促すメッセージ](assets/update-run-pipeline.png)

「**更新**」オプションの動作は、プログラムの設定と現在の状態によって異なります。

* パイプラインが既に更新されている場合は、「**更新**」オプションを選択すると、パイプラインの実行をユーザーに促すメッセージが表示されます。
* パイプラインが既に更新中の場合は、「**更新**」オプションを選択すると、更新が既に実行中であることがユーザーに通知されます。
* 適切なパイプラインが存在しない場合は、「**更新**」オプションを選択すると、パイプラインの作成をユーザーに促すメッセージが表示されます。

## 開発環境の削除 {#deleting-environment}

必要な権限を持つユーザーは、開発環境を削除できます。

**環境**&#x200B;カードのプログラムの&#x200B;**概要**&#x200B;画面で、削除する開発環境の省略記号ボタンをクリックします。

![「削除」オプション](assets/environ-delete.png)

「削除」オプションは、プログラムの&#x200B;**概要**&#x200B;ウィンドウの「**環境**」タブでも使用できます。環境の省略記号ボタンをクリックし、「**削除**」を選択します。

![「環境」タブの「削除」オプション](assets/environ-delete2.png)

>[!NOTE]
>
>* 実稼動プログラムに作成された実稼動環境とステージング環境は削除できません。
>* サンドボックスプログラム内の実稼動環境とステージング環境は削除できます。


## アクセスの管理 {#managing-access}

**環境**&#x200B;カードで環境の省略記号メニューから「**アクセスを管理**」を選択します。オーサーインスタンスに直接移動して、環境のアクセスを管理できます。

![「アクセスを管理」オプション](assets/environ-access.png)

## 開発者コンソールへのアクセス {#accessing-developer-console}

**環境**&#x200B;カードで環境の省略記号メニューから「**開発者コンソール**」を選択します。ブラウザーに新しいタブが開き、**開発者コンソール**&#x200B;へのログインページが表示されます。

![](assets/environ-devconsole.png)

**開発者コンソール**&#x200B;にアクセスできるのは、**開発者**&#x200B;の役割を持つユーザーだけです。ただし、サンドボックスプログラムの場合は、そのサンドボックスプログラムにアクセスできるユーザーは誰でも、**開発者コンソール**&#x200B;にアクセスできます。

詳しくは、[サンドボックス環境の休止と休止解除](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/onboarding/getting-access/cloud-service-programs/sandbox-programs.html?lang=ja#hibernating-introduction)のドキュメントを参照してください。

このオプションは、**概要**&#x200B;ウィンドウの「**環境**」タブで個々の環境の省略記号メニューからも使用できます。

## ローカルログイン {#login-locally}

**環境**&#x200B;カードで環境の省略記号メニューから「**ローカルログイン**」を選択して、Adobe Experience Manager にローカルにログインします。

![ローカルログイン](assets/environ-login-locally.png)

さらに、**概要**&#x200B;ページの「**環境**」タブからもローカルにログインできます。

![「環境」タブからのローカルログイン](assets/environ-login-locally-2.png)

## カスタムドメイン名の管理 {#manage-cdn}

Cloud Manager では、Sites プログラムのパブリッシュサービスとプレビューサービスの両方に対してカスタムドメイン名がサポートされています。各 Cloud Manager 環境は、最大 250 個のカスタムドメインをホストできます。

カスタムドメイン名を設定するには、「**環境**」タブに移動し、環境をクリックして環境の詳細を表示します。

![環境の詳細](assets/domain-names.png)

使用している環境のパブリッシュサービスに対して、次のアクションを実行できます。

* [カスタムドメイン名の追加](/help/implementing/cloud-manager/custom-domain-names/add-custom-domain-name.md)

* [カスタムドメイン名の管理](/help/implementing/cloud-manager/custom-domain-names/managing-custom-domain-names.md)

* [カスタムドメイン名のステータスの確認](/help/implementing/cloud-manager/custom-domain-names/check-domain-name-status.md#pre-existing-cdn)または [SSL 証明書のステータスの確認](/help/implementing/cloud-manager/managing-ssl-certifications/managing-certificates.md#pre-existing-cdn)

* [IP 許可リストの管理](/help/implementing/cloud-manager/ip-allow-lists/managing-ip-allow-lists.md#pre-existing-cdn)


## IP 許可リストの管理 {#manage-ip-allow-lists}

Cloud Manager では、Sites プログラムのオーサーサービス、パブリッシュサービスおよびプレビューサービスで IP 許可リストがサポートされています。

IP 許可リストを管理するには、プログラムの&#x200B;**概要**&#x200B;ページの「**環境**」タブに移動します。個々の環境をクリックして、その詳細を管理します。

### IP 許可リストの適用 {#apply-ip-allow-list}

IP 許可リストを適用すると、許可リストの定義に含まれているすべての IP 範囲が環境のオーサーサービスまたはパブリッシュサービスに関連付けられます。IP 許可リストを適用するには、**ビジネスオーナー**&#x200B;または&#x200B;**デプロイメントマネージャー**&#x200B;の役割を持つユーザーがログインする必要があります。

IP 許可リストを環境に適用するには、その IP 許可リストが Cloud Manager に存在する必要があります。Cloud Manager での IP 許可リストについて詳しくは、[概要 - Could Manager での IP 許可リスト](/help/implementing/cloud-manager/ip-allow-lists/introduction.md)のドキュメントを参照してください。

IP 許可リストを適用するには、次の手順に従います。

1. プログラムの&#x200B;**概要**&#x200B;画面の「**環境**」タブから特定の環境に移動し、**IP 許可リスト**&#x200B;テーブルに移動します。
1. IP 許可リストテーブルの上部にある入力フィールドを使用して、IP 許可リストと、その適用先となるオーサーサービスまたはパブリッシュサービスを選択します。
1. 「**適用**」をクリックし、送信を確認します。

### IP 許可リストの適用解除 {#unapply-ip-allow-list}

IP 許可リストの適用を解除すると、許可リストの定義に含まれているすべての IP 範囲と、環境のオーサーサービスまたはパブリッシュサービスとの関連付けが解除されます。IP 許可リストの適用を解除するには、**ビジネスオーナー**&#x200B;または&#x200B;**デプロイメントマネージャー**&#x200B;の役割を持つユーザーがログインする必要があります。

IP 許可リストの適用を解除するには、次の手順に従います。

1. プログラムの&#x200B;**概要**&#x200B;画面の「**環境**」タブから特定の環境に移動し、**IP 許可リスト**&#x200B;テーブルに移動します。
1. 適用を解除する IP 許可リストルールが表示されている行を見つけます。
1. その行の末尾の省略記号ボタンをクリックします。
1. 「**適用解除**」を選択し、送信を確認します。
